2019-07-08 09:27:14.282 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.282 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x491e461c, L:/10.5.0.2:8080 - R:/10.5.0.2:57250] New http connection, requesting read
2019-07-08 09:27:14.282 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.283 DEBUG 12856 --- [reactor-http-nio-15] reactor.netty.channel.BootstrapHandlers  : [id: 0x491e461c, L:/10.5.0.2:8080 - R:/10.5.0.2:57250] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.283 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.283 DEBUG 12856 --- [reactor-http-nio-14] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.283 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x491e461c, L:/10.5.0.2:8080 - R:/10.5.0.2:57250] Increasing pending responses, now 1
2019-07-08 09:27:14.283 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.283 DEBUG 12856 --- [reactor-http-nio-14] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.283 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.283 DEBUG 12856 --- [reactor-http-nio-15] reactor.netty.http.server.HttpServer     : [id: 0x491e461c, L:/10.5.0.2:8080 - R:/10.5.0.2:57250] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.283 DEBUG 12856 --- [reactor-http-nio-14] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.283 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.283 DEBUG 12856 --- [reactor-http-nio-15] o.s.w.s.adapter.HttpWebHandlerAdapter    : [491e461c] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.283 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.283 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.283 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.283 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 72 bytes, 9 commands in the stack
2019-07-08 09:27:14.284 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : [491e461c] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.284 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 9 commands
2019-07-08 09:27:14.284 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.284 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.284 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.284 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.284 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [2cc7fabe] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.284 DEBUG 12856 --- [reactor-http-nio-15] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.284 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x2cc7fabe, L:/10.5.0.2:8080 - R:/10.5.0.2:57241] Last HTTP response frame
2019-07-08 09:27:14.284 DEBUG 12856 --- [reactor-http-nio-15] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.284 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x2cc7fabe, L:/10.5.0.2:8080 - R:/10.5.0.2:57241] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.284 DEBUG 12856 --- [reactor-http-nio-15] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.284 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x2cc7fabe, L:/10.5.0.2:8080 - R:/10.5.0.2:57241] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.284 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.284 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.284 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x2cc7fabe, L:/10.5.0.2:8080 - R:/10.5.0.2:57241] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.284 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.284 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.284 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [25937716] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.284 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x25937716, L:/10.5.0.2:8080 - R:/10.5.0.2:57242] Last HTTP response frame
2019-07-08 09:27:14.284 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x25937716, L:/10.5.0.2:8080 - R:/10.5.0.2:57242] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.284 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.284 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x25937716, L:/10.5.0.2:8080 - R:/10.5.0.2:57242] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.284 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.285 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x25937716, L:/10.5.0.2:8080 - R:/10.5.0.2:57242] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.285 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.284 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0xc13f8eb7, L:/10.5.0.2:8080 - R:/10.5.0.2:57251] New http connection, requesting read
2019-07-08 09:27:14.285 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.285 DEBUG 12856 --- [reactor-http-nio-16] reactor.netty.channel.BootstrapHandlers  : [id: 0xc13f8eb7, L:/10.5.0.2:8080 - R:/10.5.0.2:57251] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.285 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [ac1bc8bb] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.285 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0xc13f8eb7, L:/10.5.0.2:8080 - R:/10.5.0.2:57251] Increasing pending responses, now 1
2019-07-08 09:27:14.285 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xac1bc8bb, L:/10.5.0.2:8080 - R:/10.5.0.2:57243] Last HTTP response frame
2019-07-08 09:27:14.285 DEBUG 12856 --- [reactor-http-nio-16] reactor.netty.http.server.HttpServer     : [id: 0xc13f8eb7, L:/10.5.0.2:8080 - R:/10.5.0.2:57251] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.285 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0xdf32f799, L:/10.5.0.2:8080 - R:/10.5.0.2:57252] New http connection, requesting read
2019-07-08 09:27:14.285 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xac1bc8bb, L:/10.5.0.2:8080 - R:/10.5.0.2:57243] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.285 DEBUG 12856 --- [reactor-http-nio-1] reactor.netty.channel.BootstrapHandlers  : [id: 0xdf32f799, L:/10.5.0.2:8080 - R:/10.5.0.2:57252] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.285 DEBUG 12856 --- [reactor-http-nio-16] o.s.w.s.adapter.HttpWebHandlerAdapter    : [c13f8eb7] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.285 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.285 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0xac1bc8bb, L:/10.5.0.2:8080 - R:/10.5.0.2:57243] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.285 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0xdf32f799, L:/10.5.0.2:8080 - R:/10.5.0.2:57252] Increasing pending responses, now 1
2019-07-08 09:27:14.285 DEBUG 12856 --- [reactor-http-nio-1] reactor.netty.http.server.HttpServer     : [id: 0xdf32f799, L:/10.5.0.2:8080 - R:/10.5.0.2:57252] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.285 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.285 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.285 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.285 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0xac1bc8bb, L:/10.5.0.2:8080 - R:/10.5.0.2:57243] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.285 DEBUG 12856 --- [reactor-http-nio-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [df32f799] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.285 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.285 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.285 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.285 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [897f548f] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.285 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.285 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : [c13f8eb7] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.285 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x897f548f, L:/10.5.0.2:8080 - R:/10.5.0.2:57244] Last HTTP response frame
2019-07-08 09:27:14.286 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.286 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : [df32f799] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.286 DEBUG 12856 --- [reactor-http-nio-16] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.286 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.286 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x897f548f, L:/10.5.0.2:8080 - R:/10.5.0.2:57244] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.286 DEBUG 12856 --- [reactor-http-nio-16] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.286 DEBUG 12856 --- [reactor-http-nio-16] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.286 DEBUG 12856 --- [reactor-http-nio-1] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.286 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.286 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x897f548f, L:/10.5.0.2:8080 - R:/10.5.0.2:57244] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.286 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x897f548f, L:/10.5.0.2:8080 - R:/10.5.0.2:57244] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.286 DEBUG 12856 --- [reactor-http-nio-1] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.286 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.286 DEBUG 12856 --- [reactor-http-nio-1] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.286 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.286 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.286 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [3d2bc8ae] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.286 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0xadefad5c, L:/10.5.0.2:8080 - R:/10.5.0.2:57253] New http connection, requesting read
2019-07-08 09:27:14.286 DEBUG 12856 --- [reactor-http-nio-2] reactor.netty.channel.BootstrapHandlers  : [id: 0xadefad5c, L:/10.5.0.2:8080 - R:/10.5.0.2:57253] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.286 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x1e205c61, L:/10.5.0.2:8080 - R:/10.5.0.2:57254] New http connection, requesting read
2019-07-08 09:27:14.287 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0xadefad5c, L:/10.5.0.2:8080 - R:/10.5.0.2:57253] Increasing pending responses, now 1
2019-07-08 09:27:14.287 DEBUG 12856 --- [reactor-http-nio-3] reactor.netty.channel.BootstrapHandlers  : [id: 0x1e205c61, L:/10.5.0.2:8080 - R:/10.5.0.2:57254] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.286 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x3d2bc8ae, L:/10.5.0.2:8080 - R:/10.5.0.2:57245] Last HTTP response frame
2019-07-08 09:27:14.287 DEBUG 12856 --- [reactor-http-nio-2] reactor.netty.http.server.HttpServer     : [id: 0xadefad5c, L:/10.5.0.2:8080 - R:/10.5.0.2:57253] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.287 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x1e205c61, L:/10.5.0.2:8080 - R:/10.5.0.2:57254] Increasing pending responses, now 1
2019-07-08 09:27:14.287 DEBUG 12856 --- [reactor-http-nio-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [adefad5c] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.287 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x3d2bc8ae, L:/10.5.0.2:8080 - R:/10.5.0.2:57245] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.287 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.287 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 4 commands
2019-07-08 09:27:14.287 DEBUG 12856 --- [reactor-http-nio-3] reactor.netty.http.server.HttpServer     : [id: 0x1e205c61, L:/10.5.0.2:8080 - R:/10.5.0.2:57254] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.287 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x3d2bc8ae, L:/10.5.0.2:8080 - R:/10.5.0.2:57245] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.287 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x3d2bc8ae, L:/10.5.0.2:8080 - R:/10.5.0.2:57245] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.287 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.287 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.287 DEBUG 12856 --- [reactor-http-nio-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [1e205c61] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.287 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : [adefad5c] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.287 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.287 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.287 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.287 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x96aac5d9, L:/10.5.0.2:8080 - R:/10.5.0.2:57255] New http connection, requesting read
2019-07-08 09:27:14.287 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.287 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.287 DEBUG 12856 --- [reactor-http-nio-4] reactor.netty.channel.BootstrapHandlers  : [id: 0x96aac5d9, L:/10.5.0.2:8080 - R:/10.5.0.2:57255] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.287 DEBUG 12856 --- [reactor-http-nio-2] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.287 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : [1e205c61] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.287 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [79da596a] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.287 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x96aac5d9, L:/10.5.0.2:8080 - R:/10.5.0.2:57255] Increasing pending responses, now 1
2019-07-08 09:27:14.287 DEBUG 12856 --- [reactor-http-nio-4] reactor.netty.http.server.HttpServer     : [id: 0x96aac5d9, L:/10.5.0.2:8080 - R:/10.5.0.2:57255] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.287 DEBUG 12856 --- [reactor-http-nio-2] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.287 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.287 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x79da596a, L:/10.5.0.2:8080 - R:/10.5.0.2:57246] Last HTTP response frame
2019-07-08 09:27:14.287 DEBUG 12856 --- [reactor-http-nio-4] o.s.w.s.adapter.HttpWebHandlerAdapter    : [96aac5d9] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.288 DEBUG 12856 --- [reactor-http-nio-2] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.288 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.288 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x79da596a, L:/10.5.0.2:8080 - R:/10.5.0.2:57246] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.288 DEBUG 12856 --- [reactor-http-nio-3] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.288 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.288 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.288 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.288 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x79da596a, L:/10.5.0.2:8080 - R:/10.5.0.2:57246] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.288 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : [96aac5d9] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.288 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x79da596a, L:/10.5.0.2:8080 - R:/10.5.0.2:57246] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.288 DEBUG 12856 --- [reactor-http-nio-3] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.288 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.288 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.288 DEBUG 12856 --- [reactor-http-nio-3] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.288 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.288 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x5ca11294, L:/10.5.0.2:8080 - R:/10.5.0.2:57256] New http connection, requesting read
2019-07-08 09:27:14.292 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.288 DEBUG 12856 --- [reactor-http-nio-4] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.292 DEBUG 12856 --- [reactor-http-nio-5] reactor.netty.channel.BootstrapHandlers  : [id: 0x5ca11294, L:/10.5.0.2:8080 - R:/10.5.0.2:57256] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.292 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.292 DEBUG 12856 --- [reactor-http-nio-4] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.292 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x5ca11294, L:/10.5.0.2:8080 - R:/10.5.0.2:57256] Increasing pending responses, now 1
2019-07-08 09:27:14.292 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.292 DEBUG 12856 --- [reactor-http-nio-4] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.292 DEBUG 12856 --- [reactor-http-nio-5] reactor.netty.http.server.HttpServer     : [id: 0x5ca11294, L:/10.5.0.2:8080 - R:/10.5.0.2:57256] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.292 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.292 DEBUG 12856 --- [reactor-http-nio-5] o.s.w.s.adapter.HttpWebHandlerAdapter    : [5ca11294] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.292 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.292 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.292 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.292 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.293 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.293 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : [5ca11294] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.293 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.293 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.293 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 48 bytes, 9 commands in the stack
2019-07-08 09:27:14.293 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 9 commands
2019-07-08 09:27:14.293 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.293 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.293 DEBUG 12856 --- [reactor-http-nio-5] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.293 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.293 DEBUG 12856 --- [reactor-http-nio-5] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.293 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [9c491b3f] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.293 DEBUG 12856 --- [reactor-http-nio-5] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.293 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x9c491b3f, L:/10.5.0.2:8080 - R:/10.5.0.2:57247] Last HTTP response frame
2019-07-08 09:27:14.293 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x9c491b3f, L:/10.5.0.2:8080 - R:/10.5.0.2:57247] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.293 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.293 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x9c491b3f, L:/10.5.0.2:8080 - R:/10.5.0.2:57247] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.293 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.294 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x9c491b3f, L:/10.5.0.2:8080 - R:/10.5.0.2:57247] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.294 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.294 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.294 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [b4f938c8] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.294 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xb4f938c8, L:/10.5.0.2:8080 - R:/10.5.0.2:57248] Last HTTP response frame
2019-07-08 09:27:14.294 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xb4f938c8, L:/10.5.0.2:8080 - R:/10.5.0.2:57248] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.294 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.294 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0xb4f938c8, L:/10.5.0.2:8080 - R:/10.5.0.2:57248] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.294 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.294 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x28366046, L:/10.5.0.2:8080 - R:/10.5.0.2:57257] New http connection, requesting read
2019-07-08 09:27:14.294 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0xb4f938c8, L:/10.5.0.2:8080 - R:/10.5.0.2:57248] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.294 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.294 DEBUG 12856 --- [reactor-http-nio-6] reactor.netty.channel.BootstrapHandlers  : [id: 0x28366046, L:/10.5.0.2:8080 - R:/10.5.0.2:57257] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.294 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.294 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x28366046, L:/10.5.0.2:8080 - R:/10.5.0.2:57257] Increasing pending responses, now 1
2019-07-08 09:27:14.294 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [e2b21f65] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.294 DEBUG 12856 --- [reactor-http-nio-6] reactor.netty.http.server.HttpServer     : [id: 0x28366046, L:/10.5.0.2:8080 - R:/10.5.0.2:57257] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.294 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xe2b21f65, L:/10.5.0.2:8080 - R:/10.5.0.2:57249] Last HTTP response frame
2019-07-08 09:27:14.294 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xe2b21f65, L:/10.5.0.2:8080 - R:/10.5.0.2:57249] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.294 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x22929c7a, L:/10.5.0.2:8080 - R:/10.5.0.2:57258] New http connection, requesting read
2019-07-08 09:27:14.294 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0xe2b21f65, L:/10.5.0.2:8080 - R:/10.5.0.2:57249] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.294 DEBUG 12856 --- [reactor-http-nio-7] reactor.netty.channel.BootstrapHandlers  : [id: 0x22929c7a, L:/10.5.0.2:8080 - R:/10.5.0.2:57258] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.294 DEBUG 12856 --- [reactor-http-nio-6] o.s.w.s.adapter.HttpWebHandlerAdapter    : [28366046] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.294 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.294 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0xe2b21f65, L:/10.5.0.2:8080 - R:/10.5.0.2:57249] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.294 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.294 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x22929c7a, L:/10.5.0.2:8080 - R:/10.5.0.2:57258] Increasing pending responses, now 1
2019-07-08 09:27:14.294 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.295 DEBUG 12856 --- [reactor-http-nio-7] reactor.netty.http.server.HttpServer     : [id: 0x22929c7a, L:/10.5.0.2:8080 - R:/10.5.0.2:57258] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.295 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.295 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.295 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : [28366046] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.295 DEBUG 12856 --- [reactor-http-nio-7] o.s.w.s.adapter.HttpWebHandlerAdapter    : [22929c7a] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.295 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.295 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0xc36d7258, L:/10.5.0.2:8080 - R:/10.5.0.2:57259] New http connection, requesting read
2019-07-08 09:27:14.295 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.295 DEBUG 12856 --- [reactor-http-nio-6] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.295 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [491e461c] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.295 DEBUG 12856 --- [reactor-http-nio-6] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.295 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.295 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.295 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : [22929c7a] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.295 DEBUG 12856 --- [reactor-http-nio-8] reactor.netty.channel.BootstrapHandlers  : [id: 0xc36d7258, L:/10.5.0.2:8080 - R:/10.5.0.2:57259] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.296 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0xc36d7258, L:/10.5.0.2:8080 - R:/10.5.0.2:57259] Increasing pending responses, now 1
2019-07-08 09:27:14.296 DEBUG 12856 --- [reactor-http-nio-8] reactor.netty.http.server.HttpServer     : [id: 0xc36d7258, L:/10.5.0.2:8080 - R:/10.5.0.2:57259] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.295 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x491e461c, L:/10.5.0.2:8080 - R:/10.5.0.2:57250] Last HTTP response frame
2019-07-08 09:27:14.295 DEBUG 12856 --- [reactor-http-nio-6] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.295 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.296 DEBUG 12856 --- [reactor-http-nio-8] o.s.w.s.adapter.HttpWebHandlerAdapter    : [c36d7258] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.296 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x491e461c, L:/10.5.0.2:8080 - R:/10.5.0.2:57250] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.296 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.296 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.296 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x491e461c, L:/10.5.0.2:8080 - R:/10.5.0.2:57250] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.296 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x491e461c, L:/10.5.0.2:8080 - R:/10.5.0.2:57250] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.296 DEBUG 12856 --- [reactor-http-nio-7] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.296 DEBUG 12856 --- [reactor-http-nio-7] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.296 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.296 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.296 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0xf5823872, L:/10.5.0.2:8080 - R:/10.5.0.2:57260] New http connection, requesting read
2019-07-08 09:27:14.296 DEBUG 12856 --- [reactor-http-nio-7] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.296 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : [c36d7258] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.296 DEBUG 12856 --- [reactor-http-nio-9] reactor.netty.channel.BootstrapHandlers  : [id: 0xf5823872, L:/10.5.0.2:8080 - R:/10.5.0.2:57260] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.296 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.297 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.296 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.297 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0xf5823872, L:/10.5.0.2:8080 - R:/10.5.0.2:57260] Increasing pending responses, now 1
2019-07-08 09:27:14.297 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.297 DEBUG 12856 --- [reactor-http-nio-9] reactor.netty.http.server.HttpServer     : [id: 0xf5823872, L:/10.5.0.2:8080 - R:/10.5.0.2:57260] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.297 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.297 DEBUG 12856 --- [reactor-http-nio-8] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.297 DEBUG 12856 --- [reactor-http-nio-9] o.s.w.s.adapter.HttpWebHandlerAdapter    : [f5823872] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.297 DEBUG 12856 --- [reactor-http-nio-8] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.297 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 60 bytes, 8 commands in the stack
2019-07-08 09:27:14.297 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.297 DEBUG 12856 --- [reactor-http-nio-8] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.297 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.297 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.297 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : [f5823872] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.297 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.297 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.297 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.298 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.298 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [c13f8eb7] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.298 DEBUG 12856 --- [reactor-http-nio-9] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.298 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xc13f8eb7, L:/10.5.0.2:8080 - R:/10.5.0.2:57251] Last HTTP response frame
2019-07-08 09:27:14.298 DEBUG 12856 --- [reactor-http-nio-9] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.298 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xc13f8eb7, L:/10.5.0.2:8080 - R:/10.5.0.2:57251] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.298 DEBUG 12856 --- [reactor-http-nio-9] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.298 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.298 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0xc13f8eb7, L:/10.5.0.2:8080 - R:/10.5.0.2:57251] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.298 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.298 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0xc13f8eb7, L:/10.5.0.2:8080 - R:/10.5.0.2:57251] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.298 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.298 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.298 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [df32f799] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.298 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xdf32f799, L:/10.5.0.2:8080 - R:/10.5.0.2:57252] Last HTTP response frame
2019-07-08 09:27:14.298 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xdf32f799, L:/10.5.0.2:8080 - R:/10.5.0.2:57252] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.298 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.298 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0xbaf9ec11, L:/10.5.0.2:8080 - R:/10.5.0.2:57261] New http connection, requesting read
2019-07-08 09:27:14.298 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0xdf32f799, L:/10.5.0.2:8080 - R:/10.5.0.2:57252] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.298 DEBUG 12856 --- [reactor-http-nio-10] reactor.netty.channel.BootstrapHandlers  : [id: 0xbaf9ec11, L:/10.5.0.2:8080 - R:/10.5.0.2:57261] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.298 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.298 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0xdf32f799, L:/10.5.0.2:8080 - R:/10.5.0.2:57252] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.298 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0xbaf9ec11, L:/10.5.0.2:8080 - R:/10.5.0.2:57261] Increasing pending responses, now 1
2019-07-08 09:27:14.298 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.299 DEBUG 12856 --- [reactor-http-nio-10] reactor.netty.http.server.HttpServer     : [id: 0xbaf9ec11, L:/10.5.0.2:8080 - R:/10.5.0.2:57261] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.299 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.299 DEBUG 12856 --- [reactor-http-nio-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [baf9ec11] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.299 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [adefad5c] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.299 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.299 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0xfc5b8316, L:/10.5.0.2:8080 - R:/10.5.0.2:57262] New http connection, requesting read
2019-07-08 09:27:14.299 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xadefad5c, L:/10.5.0.2:8080 - R:/10.5.0.2:57253] Last HTTP response frame
2019-07-08 09:27:14.299 DEBUG 12856 --- [reactor-http-nio-11] reactor.netty.channel.BootstrapHandlers  : [id: 0xfc5b8316, L:/10.5.0.2:8080 - R:/10.5.0.2:57262] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.299 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.299 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xadefad5c, L:/10.5.0.2:8080 - R:/10.5.0.2:57253] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.299 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0xfc5b8316, L:/10.5.0.2:8080 - R:/10.5.0.2:57262] Increasing pending responses, now 1
2019-07-08 09:27:14.299 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.299 DEBUG 12856 --- [reactor-http-nio-11] reactor.netty.http.server.HttpServer     : [id: 0xfc5b8316, L:/10.5.0.2:8080 - R:/10.5.0.2:57262] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.299 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.299 DEBUG 12856 --- [reactor-http-nio-11] o.s.w.s.adapter.HttpWebHandlerAdapter    : [fc5b8316] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.299 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : [baf9ec11] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.299 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.299 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0xadefad5c, L:/10.5.0.2:8080 - R:/10.5.0.2:57253] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.299 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.299 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0xadefad5c, L:/10.5.0.2:8080 - R:/10.5.0.2:57253] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.299 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.299 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.299 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.300 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : [fc5b8316] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.299 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x17f5d439, L:/10.5.0.2:8080 - R:/10.5.0.2:57263] New http connection, requesting read
2019-07-08 09:27:14.300 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [1e205c61] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.300 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.300 DEBUG 12856 --- [reactor-http-nio-12] reactor.netty.channel.BootstrapHandlers  : [id: 0x17f5d439, L:/10.5.0.2:8080 - R:/10.5.0.2:57263] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.300 DEBUG 12856 --- [reactor-http-nio-10] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.300 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x1e205c61, L:/10.5.0.2:8080 - R:/10.5.0.2:57254] Last HTTP response frame
2019-07-08 09:27:14.300 DEBUG 12856 --- [reactor-http-nio-10] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.300 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x17f5d439, L:/10.5.0.2:8080 - R:/10.5.0.2:57263] Increasing pending responses, now 1
2019-07-08 09:27:14.300 DEBUG 12856 --- [reactor-http-nio-11] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.300 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x1e205c61, L:/10.5.0.2:8080 - R:/10.5.0.2:57254] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.300 DEBUG 12856 --- [reactor-http-nio-10] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.300 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 4 commands
2019-07-08 09:27:14.300 DEBUG 12856 --- [reactor-http-nio-12] reactor.netty.http.server.HttpServer     : [id: 0x17f5d439, L:/10.5.0.2:8080 - R:/10.5.0.2:57263] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.300 DEBUG 12856 --- [reactor-http-nio-11] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.300 DEBUG 12856 --- [reactor-http-nio-12] o.s.w.s.adapter.HttpWebHandlerAdapter    : [17f5d439] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.300 DEBUG 12856 --- [reactor-http-nio-11] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.300 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x1e205c61, L:/10.5.0.2:8080 - R:/10.5.0.2:57254] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.300 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.300 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.300 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x1e205c61, L:/10.5.0.2:8080 - R:/10.5.0.2:57254] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.300 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.300 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.301 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : [17f5d439] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.301 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.301 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0xe2752b2c, L:/10.5.0.2:8080 - R:/10.5.0.2:57264] New http connection, requesting read
2019-07-08 09:27:14.301 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.301 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [96aac5d9] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.301 DEBUG 12856 --- [reactor-http-nio-13] reactor.netty.channel.BootstrapHandlers  : [id: 0xe2752b2c, L:/10.5.0.2:8080 - R:/10.5.0.2:57264] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.301 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x96aac5d9, L:/10.5.0.2:8080 - R:/10.5.0.2:57255] Last HTTP response frame
2019-07-08 09:27:14.301 DEBUG 12856 --- [reactor-http-nio-12] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.301 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x96aac5d9, L:/10.5.0.2:8080 - R:/10.5.0.2:57255] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.301 DEBUG 12856 --- [reactor-http-nio-12] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.301 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.301 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0xe2752b2c, L:/10.5.0.2:8080 - R:/10.5.0.2:57264] Increasing pending responses, now 1
2019-07-08 09:27:14.301 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x96aac5d9, L:/10.5.0.2:8080 - R:/10.5.0.2:57255] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.301 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.301 DEBUG 12856 --- [reactor-http-nio-12] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.301 DEBUG 12856 --- [reactor-http-nio-13] reactor.netty.http.server.HttpServer     : [id: 0xe2752b2c, L:/10.5.0.2:8080 - R:/10.5.0.2:57264] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.301 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x96aac5d9, L:/10.5.0.2:8080 - R:/10.5.0.2:57255] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.301 DEBUG 12856 --- [reactor-http-nio-13] o.s.w.s.adapter.HttpWebHandlerAdapter    : [e2752b2c] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.301 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.302 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.302 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.303 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.303 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.303 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x8f6c9e0a, L:/10.5.0.2:8080 - R:/10.5.0.2:57265] New http connection, requesting read
2019-07-08 09:27:14.303 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : [e2752b2c] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.303 DEBUG 12856 --- [reactor-http-nio-14] reactor.netty.channel.BootstrapHandlers  : [id: 0x8f6c9e0a, L:/10.5.0.2:8080 - R:/10.5.0.2:57265] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.303 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.303 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.303 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x8f6c9e0a, L:/10.5.0.2:8080 - R:/10.5.0.2:57265] Increasing pending responses, now 1
2019-07-08 09:27:14.303 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.304 DEBUG 12856 --- [reactor-http-nio-14] reactor.netty.http.server.HttpServer     : [id: 0x8f6c9e0a, L:/10.5.0.2:8080 - R:/10.5.0.2:57265] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.304 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.304 DEBUG 12856 --- [reactor-http-nio-14] o.s.w.s.adapter.HttpWebHandlerAdapter    : [8f6c9e0a] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.304 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.304 DEBUG 12856 --- [reactor-http-nio-13] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.304 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.304 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.304 DEBUG 12856 --- [reactor-http-nio-13] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.304 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.304 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 48 bytes, 8 commands in the stack
2019-07-08 09:27:14.304 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.304 DEBUG 12856 --- [reactor-http-nio-13] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.304 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : [8f6c9e0a] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.304 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.304 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.304 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.304 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.305 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [5ca11294] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.305 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x5ca11294, L:/10.5.0.2:8080 - R:/10.5.0.2:57256] Last HTTP response frame
2019-07-08 09:27:14.305 DEBUG 12856 --- [reactor-http-nio-14] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.305 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x5ca11294, L:/10.5.0.2:8080 - R:/10.5.0.2:57256] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.305 DEBUG 12856 --- [reactor-http-nio-14] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.305 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.305 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x5ca11294, L:/10.5.0.2:8080 - R:/10.5.0.2:57256] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.305 DEBUG 12856 --- [reactor-http-nio-14] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.305 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.305 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x5ca11294, L:/10.5.0.2:8080 - R:/10.5.0.2:57256] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.305 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.305 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.305 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [28366046] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.305 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x28366046, L:/10.5.0.2:8080 - R:/10.5.0.2:57257] Last HTTP response frame
2019-07-08 09:27:14.305 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x28366046, L:/10.5.0.2:8080 - R:/10.5.0.2:57257] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.305 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x9525260f, L:/10.5.0.2:8080 - R:/10.5.0.2:57266] New http connection, requesting read
2019-07-08 09:27:14.305 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x28366046, L:/10.5.0.2:8080 - R:/10.5.0.2:57257] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.305 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.305 DEBUG 12856 --- [reactor-http-nio-15] reactor.netty.channel.BootstrapHandlers  : [id: 0x9525260f, L:/10.5.0.2:8080 - R:/10.5.0.2:57266] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.305 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.305 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x28366046, L:/10.5.0.2:8080 - R:/10.5.0.2:57257] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.305 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x9525260f, L:/10.5.0.2:8080 - R:/10.5.0.2:57266] Increasing pending responses, now 1
2019-07-08 09:27:14.305 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.305 DEBUG 12856 --- [reactor-http-nio-15] reactor.netty.http.server.HttpServer     : [id: 0x9525260f, L:/10.5.0.2:8080 - R:/10.5.0.2:57266] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.306 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.306 DEBUG 12856 --- [reactor-http-nio-15] o.s.w.s.adapter.HttpWebHandlerAdapter    : [9525260f] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.306 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x9365fe3e, L:/10.5.0.2:8080 - R:/10.5.0.2:57267] New http connection, requesting read
2019-07-08 09:27:14.306 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [22929c7a] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.306 DEBUG 12856 --- [reactor-http-nio-16] reactor.netty.channel.BootstrapHandlers  : [id: 0x9365fe3e, L:/10.5.0.2:8080 - R:/10.5.0.2:57267] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.306 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.306 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x22929c7a, L:/10.5.0.2:8080 - R:/10.5.0.2:57258] Last HTTP response frame
2019-07-08 09:27:14.306 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x9365fe3e, L:/10.5.0.2:8080 - R:/10.5.0.2:57267] Increasing pending responses, now 1
2019-07-08 09:27:14.306 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.306 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x22929c7a, L:/10.5.0.2:8080 - R:/10.5.0.2:57258] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.306 DEBUG 12856 --- [reactor-http-nio-16] reactor.netty.http.server.HttpServer     : [id: 0x9365fe3e, L:/10.5.0.2:8080 - R:/10.5.0.2:57267] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.306 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : [9525260f] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.306 DEBUG 12856 --- [reactor-http-nio-16] o.s.w.s.adapter.HttpWebHandlerAdapter    : [9365fe3e] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.306 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.306 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x22929c7a, L:/10.5.0.2:8080 - R:/10.5.0.2:57258] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.306 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.306 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.306 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.307 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.307 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x22929c7a, L:/10.5.0.2:8080 - R:/10.5.0.2:57258] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.307 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.307 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.307 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : [9365fe3e] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.307 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x780d9244, L:/10.5.0.2:8080 - R:/10.5.0.2:57268] New http connection, requesting read
2019-07-08 09:27:14.307 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.307 DEBUG 12856 --- [reactor-http-nio-15] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.307 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [c36d7258] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.307 DEBUG 12856 --- [reactor-http-nio-15] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.307 DEBUG 12856 --- [reactor-http-nio-1] reactor.netty.channel.BootstrapHandlers  : [id: 0x780d9244, L:/10.5.0.2:8080 - R:/10.5.0.2:57268] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.307 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xc36d7258, L:/10.5.0.2:8080 - R:/10.5.0.2:57259] Last HTTP response frame
2019-07-08 09:27:14.307 DEBUG 12856 --- [reactor-http-nio-16] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.307 DEBUG 12856 --- [reactor-http-nio-15] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.307 DEBUG 12856 --- [reactor-http-nio-16] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.307 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x780d9244, L:/10.5.0.2:8080 - R:/10.5.0.2:57268] Increasing pending responses, now 1
2019-07-08 09:27:14.307 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xc36d7258, L:/10.5.0.2:8080 - R:/10.5.0.2:57259] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.308 DEBUG 12856 --- [reactor-http-nio-16] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.308 DEBUG 12856 --- [reactor-http-nio-1] reactor.netty.http.server.HttpServer     : [id: 0x780d9244, L:/10.5.0.2:8080 - R:/10.5.0.2:57268] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.308 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.308 DEBUG 12856 --- [reactor-http-nio-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [780d9244] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.308 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0xc36d7258, L:/10.5.0.2:8080 - R:/10.5.0.2:57259] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.308 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.308 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.308 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0xc36d7258, L:/10.5.0.2:8080 - R:/10.5.0.2:57259] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.308 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.308 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.308 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : [780d9244] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.308 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.308 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.308 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.308 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.308 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.309 DEBUG 12856 --- [reactor-http-nio-1] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.309 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.309 DEBUG 12856 --- [reactor-http-nio-1] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.309 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 48 bytes, 8 commands in the stack
2019-07-08 09:27:14.309 DEBUG 12856 --- [reactor-http-nio-1] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.309 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.309 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.309 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x18e2fa09, L:/10.5.0.2:8080 - R:/10.5.0.2:57269] New http connection, requesting read
2019-07-08 09:27:14.309 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.309 DEBUG 12856 --- [reactor-http-nio-2] reactor.netty.channel.BootstrapHandlers  : [id: 0x18e2fa09, L:/10.5.0.2:8080 - R:/10.5.0.2:57269] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.309 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.309 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x18e2fa09, L:/10.5.0.2:8080 - R:/10.5.0.2:57269] Increasing pending responses, now 1
2019-07-08 09:27:14.309 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [f5823872] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.309 DEBUG 12856 --- [reactor-http-nio-2] reactor.netty.http.server.HttpServer     : [id: 0x18e2fa09, L:/10.5.0.2:8080 - R:/10.5.0.2:57269] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.309 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xf5823872, L:/10.5.0.2:8080 - R:/10.5.0.2:57260] Last HTTP response frame
2019-07-08 09:27:14.309 DEBUG 12856 --- [reactor-http-nio-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [18e2fa09] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.309 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xf5823872, L:/10.5.0.2:8080 - R:/10.5.0.2:57260] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.309 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.309 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.309 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.309 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0xf5823872, L:/10.5.0.2:8080 - R:/10.5.0.2:57260] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.310 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : [18e2fa09] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.309 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.310 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.310 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0xf5823872, L:/10.5.0.2:8080 - R:/10.5.0.2:57260] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.310 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.310 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.310 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [baf9ec11] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.310 DEBUG 12856 --- [reactor-http-nio-2] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.310 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xbaf9ec11, L:/10.5.0.2:8080 - R:/10.5.0.2:57261] Last HTTP response frame
2019-07-08 09:27:14.310 DEBUG 12856 --- [reactor-http-nio-2] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.310 DEBUG 12856 --- [reactor-http-nio-2] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.310 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xbaf9ec11, L:/10.5.0.2:8080 - R:/10.5.0.2:57261] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.310 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x7ff972b9, L:/10.5.0.2:8080 - R:/10.5.0.2:57270] New http connection, requesting read
2019-07-08 09:27:14.310 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.310 DEBUG 12856 --- [reactor-http-nio-3] reactor.netty.channel.BootstrapHandlers  : [id: 0x7ff972b9, L:/10.5.0.2:8080 - R:/10.5.0.2:57270] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.310 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.310 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0xbaf9ec11, L:/10.5.0.2:8080 - R:/10.5.0.2:57261] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.310 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.310 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0xbaf9ec11, L:/10.5.0.2:8080 - R:/10.5.0.2:57261] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.310 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x7ff972b9, L:/10.5.0.2:8080 - R:/10.5.0.2:57270] Increasing pending responses, now 1
2019-07-08 09:27:14.310 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.310 DEBUG 12856 --- [reactor-http-nio-3] reactor.netty.http.server.HttpServer     : [id: 0x7ff972b9, L:/10.5.0.2:8080 - R:/10.5.0.2:57270] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.310 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [fc5b8316] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.310 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xfc5b8316, L:/10.5.0.2:8080 - R:/10.5.0.2:57262] Last HTTP response frame
2019-07-08 09:27:14.310 DEBUG 12856 --- [reactor-http-nio-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [7ff972b9] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.311 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xfc5b8316, L:/10.5.0.2:8080 - R:/10.5.0.2:57262] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.311 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.311 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x4e1c6cb0, L:/10.5.0.2:8080 - R:/10.5.0.2:57271] New http connection, requesting read
2019-07-08 09:27:14.311 DEBUG 12856 --- [reactor-http-nio-4] reactor.netty.channel.BootstrapHandlers  : [id: 0x4e1c6cb0, L:/10.5.0.2:8080 - R:/10.5.0.2:57271] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.311 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.311 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x4e1c6cb0, L:/10.5.0.2:8080 - R:/10.5.0.2:57271] Increasing pending responses, now 1
2019-07-08 09:27:14.311 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.311 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.311 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : [7ff972b9] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.311 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0xfc5b8316, L:/10.5.0.2:8080 - R:/10.5.0.2:57262] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.311 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.311 DEBUG 12856 --- [reactor-http-nio-4] reactor.netty.http.server.HttpServer     : [id: 0x4e1c6cb0, L:/10.5.0.2:8080 - R:/10.5.0.2:57271] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.311 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.311 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0xfc5b8316, L:/10.5.0.2:8080 - R:/10.5.0.2:57262] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.311 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.311 DEBUG 12856 --- [reactor-http-nio-3] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.311 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [17f5d439] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.311 DEBUG 12856 --- [reactor-http-nio-4] o.s.w.s.adapter.HttpWebHandlerAdapter    : [4e1c6cb0] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.311 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x17f5d439, L:/10.5.0.2:8080 - R:/10.5.0.2:57263] Last HTTP response frame
2019-07-08 09:27:14.311 DEBUG 12856 --- [reactor-http-nio-3] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.311 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.311 DEBUG 12856 --- [reactor-http-nio-3] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.311 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x17f5d439, L:/10.5.0.2:8080 - R:/10.5.0.2:57263] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.312 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.311 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0xe354b34b, L:/10.5.0.2:8080 - R:/10.5.0.2:57272] New http connection, requesting read
2019-07-08 09:27:14.312 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.312 DEBUG 12856 --- [reactor-http-nio-5] reactor.netty.channel.BootstrapHandlers  : [id: 0xe354b34b, L:/10.5.0.2:8080 - R:/10.5.0.2:57272] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.311 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.312 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x17f5d439, L:/10.5.0.2:8080 - R:/10.5.0.2:57263] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.312 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.312 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0xe354b34b, L:/10.5.0.2:8080 - R:/10.5.0.2:57272] Increasing pending responses, now 1
2019-07-08 09:27:14.312 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : [4e1c6cb0] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.312 DEBUG 12856 --- [reactor-http-nio-5] reactor.netty.http.server.HttpServer     : [id: 0xe354b34b, L:/10.5.0.2:8080 - R:/10.5.0.2:57272] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.312 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x17f5d439, L:/10.5.0.2:8080 - R:/10.5.0.2:57263] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.312 DEBUG 12856 --- [reactor-http-nio-5] o.s.w.s.adapter.HttpWebHandlerAdapter    : [e354b34b] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.312 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.312 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.312 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.312 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.312 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0xdc41822c, L:/10.5.0.2:8080 - R:/10.5.0.2:57273] New http connection, requesting read
2019-07-08 09:27:14.312 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.312 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.312 DEBUG 12856 --- [reactor-http-nio-4] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.312 DEBUG 12856 --- [reactor-http-nio-6] reactor.netty.channel.BootstrapHandlers  : [id: 0xdc41822c, L:/10.5.0.2:8080 - R:/10.5.0.2:57273] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.313 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 48 bytes, 7 commands in the stack
2019-07-08 09:27:14.313 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : [e354b34b] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.313 DEBUG 12856 --- [reactor-http-nio-4] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.313 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0xdc41822c, L:/10.5.0.2:8080 - R:/10.5.0.2:57273] Increasing pending responses, now 1
2019-07-08 09:27:14.313 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.313 DEBUG 12856 --- [reactor-http-nio-6] reactor.netty.http.server.HttpServer     : [id: 0xdc41822c, L:/10.5.0.2:8080 - R:/10.5.0.2:57273] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.313 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.313 DEBUG 12856 --- [reactor-http-nio-6] o.s.w.s.adapter.HttpWebHandlerAdapter    : [dc41822c] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.313 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.313 DEBUG 12856 --- [reactor-http-nio-4] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.313 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.313 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.313 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.313 DEBUG 12856 --- [reactor-http-nio-5] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.313 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.313 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [e2752b2c] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.313 DEBUG 12856 --- [reactor-http-nio-5] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.314 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xe2752b2c, L:/10.5.0.2:8080 - R:/10.5.0.2:57264] Last HTTP response frame
2019-07-08 09:27:14.314 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : [dc41822c] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.314 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xe2752b2c, L:/10.5.0.2:8080 - R:/10.5.0.2:57264] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.314 DEBUG 12856 --- [reactor-http-nio-5] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.314 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.314 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.314 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0xe2752b2c, L:/10.5.0.2:8080 - R:/10.5.0.2:57264] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.314 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.314 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0xe2752b2c, L:/10.5.0.2:8080 - R:/10.5.0.2:57264] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.314 DEBUG 12856 --- [reactor-http-nio-6] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.314 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.314 DEBUG 12856 --- [reactor-http-nio-6] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.314 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.314 DEBUG 12856 --- [reactor-http-nio-6] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.314 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [8f6c9e0a] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.314 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x2b6479bb, L:/10.5.0.2:8080 - R:/10.5.0.2:57274] New http connection, requesting read
2019-07-08 09:27:14.314 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x8f6c9e0a, L:/10.5.0.2:8080 - R:/10.5.0.2:57265] Last HTTP response frame
2019-07-08 09:27:14.314 DEBUG 12856 --- [reactor-http-nio-7] reactor.netty.channel.BootstrapHandlers  : [id: 0x2b6479bb, L:/10.5.0.2:8080 - R:/10.5.0.2:57274] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.314 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x8f6c9e0a, L:/10.5.0.2:8080 - R:/10.5.0.2:57265] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.314 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x2b6479bb, L:/10.5.0.2:8080 - R:/10.5.0.2:57274] Increasing pending responses, now 1
2019-07-08 09:27:14.314 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.314 DEBUG 12856 --- [reactor-http-nio-7] reactor.netty.http.server.HttpServer     : [id: 0x2b6479bb, L:/10.5.0.2:8080 - R:/10.5.0.2:57274] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.315 DEBUG 12856 --- [reactor-http-nio-7] o.s.w.s.adapter.HttpWebHandlerAdapter    : [2b6479bb] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.314 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x8f6c9e0a, L:/10.5.0.2:8080 - R:/10.5.0.2:57265] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.315 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.315 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.315 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x8f6c9e0a, L:/10.5.0.2:8080 - R:/10.5.0.2:57265] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.315 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.315 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.315 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : [2b6479bb] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.315 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.315 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0xb0c2790e, L:/10.5.0.2:8080 - R:/10.5.0.2:57275] New http connection, requesting read
2019-07-08 09:27:14.315 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.315 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [9525260f] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.315 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x9525260f, L:/10.5.0.2:8080 - R:/10.5.0.2:57266] Last HTTP response frame
2019-07-08 09:27:14.315 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x9525260f, L:/10.5.0.2:8080 - R:/10.5.0.2:57266] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.315 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 4 commands
2019-07-08 09:27:14.315 DEBUG 12856 --- [reactor-http-nio-8] reactor.netty.channel.BootstrapHandlers  : [id: 0xb0c2790e, L:/10.5.0.2:8080 - R:/10.5.0.2:57275] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.315 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0xb0c2790e, L:/10.5.0.2:8080 - R:/10.5.0.2:57275] Increasing pending responses, now 1
2019-07-08 09:27:14.315 DEBUG 12856 --- [reactor-http-nio-7] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.315 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.315 DEBUG 12856 --- [reactor-http-nio-7] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.315 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x9525260f, L:/10.5.0.2:8080 - R:/10.5.0.2:57266] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.315 DEBUG 12856 --- [reactor-http-nio-8] reactor.netty.http.server.HttpServer     : [id: 0xb0c2790e, L:/10.5.0.2:8080 - R:/10.5.0.2:57275] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.315 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.316 DEBUG 12856 --- [reactor-http-nio-8] o.s.w.s.adapter.HttpWebHandlerAdapter    : [b0c2790e] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.316 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.316 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.315 DEBUG 12856 --- [reactor-http-nio-7] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.315 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x9525260f, L:/10.5.0.2:8080 - R:/10.5.0.2:57266] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.316 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [9365fe3e] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.316 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.316 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : [b0c2790e] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.316 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x9365fe3e, L:/10.5.0.2:8080 - R:/10.5.0.2:57267] Last HTTP response frame
2019-07-08 09:27:14.316 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.316 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x9365fe3e, L:/10.5.0.2:8080 - R:/10.5.0.2:57267] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.316 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x1909e165, L:/10.5.0.2:8080 - R:/10.5.0.2:57276] New http connection, requesting read
2019-07-08 09:27:14.316 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x9365fe3e, L:/10.5.0.2:8080 - R:/10.5.0.2:57267] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.316 DEBUG 12856 --- [reactor-http-nio-9] reactor.netty.channel.BootstrapHandlers  : [id: 0x1909e165, L:/10.5.0.2:8080 - R:/10.5.0.2:57276] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.316 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.316 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.316 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.316 DEBUG 12856 --- [reactor-http-nio-8] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.316 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x9365fe3e, L:/10.5.0.2:8080 - R:/10.5.0.2:57267] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.316 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x1909e165, L:/10.5.0.2:8080 - R:/10.5.0.2:57276] Increasing pending responses, now 1
2019-07-08 09:27:14.316 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.316 DEBUG 12856 --- [reactor-http-nio-8] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.317 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.317 DEBUG 12856 --- [reactor-http-nio-9] reactor.netty.http.server.HttpServer     : [id: 0x1909e165, L:/10.5.0.2:8080 - R:/10.5.0.2:57276] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.317 DEBUG 12856 --- [reactor-http-nio-8] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.317 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.317 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x405c29d9, L:/10.5.0.2:8080 - R:/10.5.0.2:57277] New http connection, requesting read
2019-07-08 09:27:14.317 DEBUG 12856 --- [reactor-http-nio-9] o.s.w.s.adapter.HttpWebHandlerAdapter    : [1909e165] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.317 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.317 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.317 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.317 DEBUG 12856 --- [reactor-http-nio-10] reactor.netty.channel.BootstrapHandlers  : [id: 0x405c29d9, L:/10.5.0.2:8080 - R:/10.5.0.2:57277] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.317 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.317 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.317 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x405c29d9, L:/10.5.0.2:8080 - R:/10.5.0.2:57277] Increasing pending responses, now 1
2019-07-08 09:27:14.317 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.317 DEBUG 12856 --- [reactor-http-nio-10] reactor.netty.http.server.HttpServer     : [id: 0x405c29d9, L:/10.5.0.2:8080 - R:/10.5.0.2:57277] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.317 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : [1909e165] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.317 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 36 bytes, 8 commands in the stack
2019-07-08 09:27:14.317 DEBUG 12856 --- [reactor-http-nio-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [405c29d9] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.317 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.317 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.317 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.318 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.318 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.318 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.318 DEBUG 12856 --- [reactor-http-nio-9] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.318 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : [405c29d9] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.318 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.318 DEBUG 12856 --- [reactor-http-nio-9] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.318 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.318 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [780d9244] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.318 DEBUG 12856 --- [reactor-http-nio-9] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.318 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x780d9244, L:/10.5.0.2:8080 - R:/10.5.0.2:57268] Last HTTP response frame
2019-07-08 09:27:14.318 DEBUG 12856 --- [reactor-http-nio-10] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.318 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x780d9244, L:/10.5.0.2:8080 - R:/10.5.0.2:57268] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.318 DEBUG 12856 --- [reactor-http-nio-10] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.318 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x780d9244, L:/10.5.0.2:8080 - R:/10.5.0.2:57268] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.318 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.318 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x780d9244, L:/10.5.0.2:8080 - R:/10.5.0.2:57268] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.318 DEBUG 12856 --- [reactor-http-nio-10] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.318 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.318 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.319 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.319 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0xc57d38fb, L:/10.5.0.2:8080 - R:/10.5.0.2:57278] New http connection, requesting read
2019-07-08 09:27:14.319 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [18e2fa09] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.319 DEBUG 12856 --- [reactor-http-nio-11] reactor.netty.channel.BootstrapHandlers  : [id: 0xc57d38fb, L:/10.5.0.2:8080 - R:/10.5.0.2:57278] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.319 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x18e2fa09, L:/10.5.0.2:8080 - R:/10.5.0.2:57269] Last HTTP response frame
2019-07-08 09:27:14.319 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0xc57d38fb, L:/10.5.0.2:8080 - R:/10.5.0.2:57278] Increasing pending responses, now 1
2019-07-08 09:27:14.319 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x18e2fa09, L:/10.5.0.2:8080 - R:/10.5.0.2:57269] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.319 DEBUG 12856 --- [reactor-http-nio-11] reactor.netty.http.server.HttpServer     : [id: 0xc57d38fb, L:/10.5.0.2:8080 - R:/10.5.0.2:57278] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.319 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.319 DEBUG 12856 --- [reactor-http-nio-11] o.s.w.s.adapter.HttpWebHandlerAdapter    : [c57d38fb] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.319 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.319 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x18e2fa09, L:/10.5.0.2:8080 - R:/10.5.0.2:57269] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.319 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.319 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.319 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x18e2fa09, L:/10.5.0.2:8080 - R:/10.5.0.2:57269] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.319 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.319 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.319 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : [c57d38fb] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.319 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [7ff972b9] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.319 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.319 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0xf7079493, L:/10.5.0.2:8080 - R:/10.5.0.2:57279] New http connection, requesting read
2019-07-08 09:27:14.319 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x7ff972b9, L:/10.5.0.2:8080 - R:/10.5.0.2:57270] Last HTTP response frame
2019-07-08 09:27:14.319 DEBUG 12856 --- [reactor-http-nio-12] reactor.netty.channel.BootstrapHandlers  : [id: 0xf7079493, L:/10.5.0.2:8080 - R:/10.5.0.2:57279] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.319 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x7ff972b9, L:/10.5.0.2:8080 - R:/10.5.0.2:57270] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.319 DEBUG 12856 --- [reactor-http-nio-11] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.320 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.320 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x7ff972b9, L:/10.5.0.2:8080 - R:/10.5.0.2:57270] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.320 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.320 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0xf7079493, L:/10.5.0.2:8080 - R:/10.5.0.2:57279] Increasing pending responses, now 1
2019-07-08 09:27:14.320 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x7ff972b9, L:/10.5.0.2:8080 - R:/10.5.0.2:57270] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.320 DEBUG 12856 --- [reactor-http-nio-12] reactor.netty.http.server.HttpServer     : [id: 0xf7079493, L:/10.5.0.2:8080 - R:/10.5.0.2:57279] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.320 DEBUG 12856 --- [reactor-http-nio-11] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.320 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.320 DEBUG 12856 --- [reactor-http-nio-11] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.320 DEBUG 12856 --- [reactor-http-nio-12] o.s.w.s.adapter.HttpWebHandlerAdapter    : [f7079493] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.320 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0xbf3f6e6d, L:/10.5.0.2:8080 - R:/10.5.0.2:57280] New http connection, requesting read
2019-07-08 09:27:14.320 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.320 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.320 DEBUG 12856 --- [reactor-http-nio-13] reactor.netty.channel.BootstrapHandlers  : [id: 0xbf3f6e6d, L:/10.5.0.2:8080 - R:/10.5.0.2:57280] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.320 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.320 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.320 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0xbf3f6e6d, L:/10.5.0.2:8080 - R:/10.5.0.2:57280] Increasing pending responses, now 1
2019-07-08 09:27:14.320 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : [f7079493] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.320 DEBUG 12856 --- [reactor-http-nio-13] reactor.netty.http.server.HttpServer     : [id: 0xbf3f6e6d, L:/10.5.0.2:8080 - R:/10.5.0.2:57280] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.320 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.320 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.320 DEBUG 12856 --- [reactor-http-nio-13] o.s.w.s.adapter.HttpWebHandlerAdapter    : [bf3f6e6d] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.320 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 60 bytes, 8 commands in the stack
2019-07-08 09:27:14.321 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.321 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.321 DEBUG 12856 --- [reactor-http-nio-12] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.321 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.321 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.321 DEBUG 12856 --- [reactor-http-nio-12] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.321 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.321 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : [bf3f6e6d] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.321 DEBUG 12856 --- [reactor-http-nio-12] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.321 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.321 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.321 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [4e1c6cb0] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.321 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x4e1c6cb0, L:/10.5.0.2:8080 - R:/10.5.0.2:57271] Last HTTP response frame
2019-07-08 09:27:14.321 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x4e1c6cb0, L:/10.5.0.2:8080 - R:/10.5.0.2:57271] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.321 DEBUG 12856 --- [reactor-http-nio-13] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.321 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.321 DEBUG 12856 --- [reactor-http-nio-13] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.321 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x4e1c6cb0, L:/10.5.0.2:8080 - R:/10.5.0.2:57271] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.321 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.321 DEBUG 12856 --- [reactor-http-nio-13] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.322 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.321 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x4e1c6cb0, L:/10.5.0.2:8080 - R:/10.5.0.2:57271] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.322 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.322 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [e354b34b] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.322 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xe354b34b, L:/10.5.0.2:8080 - R:/10.5.0.2:57272] Last HTTP response frame
2019-07-08 09:27:14.322 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xe354b34b, L:/10.5.0.2:8080 - R:/10.5.0.2:57272] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.322 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.322 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0xe354b34b, L:/10.5.0.2:8080 - R:/10.5.0.2:57272] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.322 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.322 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0xe354b34b, L:/10.5.0.2:8080 - R:/10.5.0.2:57272] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.322 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.322 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.322 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [dc41822c] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.322 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xdc41822c, L:/10.5.0.2:8080 - R:/10.5.0.2:57273] Last HTTP response frame
2019-07-08 09:27:14.322 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xdc41822c, L:/10.5.0.2:8080 - R:/10.5.0.2:57273] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.322 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x1e33e31e, L:/10.5.0.2:8080 - R:/10.5.0.2:57281] New http connection, requesting read
2019-07-08 09:27:14.322 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0xdc41822c, L:/10.5.0.2:8080 - R:/10.5.0.2:57273] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.322 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x0ae869ea, L:/10.5.0.2:8080 - R:/10.5.0.2:57282] New http connection, requesting read
2019-07-08 09:27:14.322 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0xdc41822c, L:/10.5.0.2:8080 - R:/10.5.0.2:57273] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.322 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.322 DEBUG 12856 --- [reactor-http-nio-14] reactor.netty.channel.BootstrapHandlers  : [id: 0x1e33e31e, L:/10.5.0.2:8080 - R:/10.5.0.2:57281] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.322 DEBUG 12856 --- [reactor-http-nio-15] reactor.netty.channel.BootstrapHandlers  : [id: 0x0ae869ea, L:/10.5.0.2:8080 - R:/10.5.0.2:57282] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.322 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0xb39bf996, L:/10.5.0.2:8080 - R:/10.5.0.2:57283] New http connection, requesting read
2019-07-08 09:27:14.322 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.322 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x1e33e31e, L:/10.5.0.2:8080 - R:/10.5.0.2:57281] Increasing pending responses, now 1
2019-07-08 09:27:14.322 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x0ae869ea, L:/10.5.0.2:8080 - R:/10.5.0.2:57282] Increasing pending responses, now 1
2019-07-08 09:27:14.322 DEBUG 12856 --- [reactor-http-nio-16] reactor.netty.channel.BootstrapHandlers  : [id: 0xb39bf996, L:/10.5.0.2:8080 - R:/10.5.0.2:57283] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.322 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.323 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0xb39bf996, L:/10.5.0.2:8080 - R:/10.5.0.2:57283] Increasing pending responses, now 1
2019-07-08 09:27:14.322 DEBUG 12856 --- [reactor-http-nio-14] reactor.netty.http.server.HttpServer     : [id: 0x1e33e31e, L:/10.5.0.2:8080 - R:/10.5.0.2:57281] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.322 DEBUG 12856 --- [reactor-http-nio-15] reactor.netty.http.server.HttpServer     : [id: 0x0ae869ea, L:/10.5.0.2:8080 - R:/10.5.0.2:57282] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.323 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.323 DEBUG 12856 --- [reactor-http-nio-16] reactor.netty.http.server.HttpServer     : [id: 0xb39bf996, L:/10.5.0.2:8080 - R:/10.5.0.2:57283] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.323 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [2b6479bb] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.323 DEBUG 12856 --- [reactor-http-nio-16] o.s.w.s.adapter.HttpWebHandlerAdapter    : [b39bf996] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.323 DEBUG 12856 --- [reactor-http-nio-14] o.s.w.s.adapter.HttpWebHandlerAdapter    : [1e33e31e] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.323 DEBUG 12856 --- [reactor-http-nio-15] o.s.w.s.adapter.HttpWebHandlerAdapter    : [0ae869ea] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.323 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x2b6479bb, L:/10.5.0.2:8080 - R:/10.5.0.2:57274] Last HTTP response frame
2019-07-08 09:27:14.323 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.323 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.323 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : [0ae869ea] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.323 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.323 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.323 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.323 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x2b6479bb, L:/10.5.0.2:8080 - R:/10.5.0.2:57274] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.323 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.323 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.323 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : [b39bf996] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.323 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 4 commands
2019-07-08 09:27:14.323 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.323 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x2b6479bb, L:/10.5.0.2:8080 - R:/10.5.0.2:57274] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.323 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : [1e33e31e] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.323 DEBUG 12856 --- [reactor-http-nio-15] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.323 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.323 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x2b6479bb, L:/10.5.0.2:8080 - R:/10.5.0.2:57274] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.324 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.324 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.324 DEBUG 12856 --- [reactor-http-nio-16] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.324 DEBUG 12856 --- [reactor-http-nio-15] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.324 DEBUG 12856 --- [reactor-http-nio-16] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.324 DEBUG 12856 --- [reactor-http-nio-14] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.324 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.324 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0xe9314483, L:/10.5.0.2:8080 - R:/10.5.0.2:57284] New http connection, requesting read
2019-07-08 09:27:14.324 DEBUG 12856 --- [reactor-http-nio-15] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.324 DEBUG 12856 --- [reactor-http-nio-1] reactor.netty.channel.BootstrapHandlers  : [id: 0xe9314483, L:/10.5.0.2:8080 - R:/10.5.0.2:57284] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.324 DEBUG 12856 --- [reactor-http-nio-16] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.324 DEBUG 12856 --- [reactor-http-nio-14] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.324 DEBUG 12856 --- [reactor-http-nio-14] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.324 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [b0c2790e] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.324 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0xe9314483, L:/10.5.0.2:8080 - R:/10.5.0.2:57284] Increasing pending responses, now 1
2019-07-08 09:27:14.324 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xb0c2790e, L:/10.5.0.2:8080 - R:/10.5.0.2:57275] Last HTTP response frame
2019-07-08 09:27:14.324 DEBUG 12856 --- [reactor-http-nio-1] reactor.netty.http.server.HttpServer     : [id: 0xe9314483, L:/10.5.0.2:8080 - R:/10.5.0.2:57284] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.324 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xb0c2790e, L:/10.5.0.2:8080 - R:/10.5.0.2:57275] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.324 DEBUG 12856 --- [reactor-http-nio-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [e9314483] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.324 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.324 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0xb0c2790e, L:/10.5.0.2:8080 - R:/10.5.0.2:57275] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.324 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.324 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.324 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0xb0c2790e, L:/10.5.0.2:8080 - R:/10.5.0.2:57275] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.324 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.324 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.324 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.324 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : [e9314483] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.324 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.325 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.325 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.325 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.325 DEBUG 12856 --- [reactor-http-nio-1] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.325 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.325 DEBUG 12856 --- [reactor-http-nio-1] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.325 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.325 DEBUG 12856 --- [reactor-http-nio-1] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.325 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.325 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.325 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x0c0c094a, L:/10.5.0.2:8080 - R:/10.5.0.2:57285] New http connection, requesting read
2019-07-08 09:27:14.325 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.325 DEBUG 12856 --- [reactor-http-nio-2] reactor.netty.channel.BootstrapHandlers  : [id: 0x0c0c094a, L:/10.5.0.2:8080 - R:/10.5.0.2:57285] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.325 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 36 bytes, 9 commands in the stack
2019-07-08 09:27:14.325 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x0c0c094a, L:/10.5.0.2:8080 - R:/10.5.0.2:57285] Increasing pending responses, now 1
2019-07-08 09:27:14.325 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 9 commands
2019-07-08 09:27:14.325 DEBUG 12856 --- [reactor-http-nio-2] reactor.netty.http.server.HttpServer     : [id: 0x0c0c094a, L:/10.5.0.2:8080 - R:/10.5.0.2:57285] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.325 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.325 DEBUG 12856 --- [reactor-http-nio-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [0c0c094a] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.325 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.325 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.325 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.325 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.325 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [1909e165] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.325 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : [0c0c094a] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.326 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x1909e165, L:/10.5.0.2:8080 - R:/10.5.0.2:57276] Last HTTP response frame
2019-07-08 09:27:14.326 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.326 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x1909e165, L:/10.5.0.2:8080 - R:/10.5.0.2:57276] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.326 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.326 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.326 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x1909e165, L:/10.5.0.2:8080 - R:/10.5.0.2:57276] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.326 DEBUG 12856 --- [reactor-http-nio-2] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.326 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x1909e165, L:/10.5.0.2:8080 - R:/10.5.0.2:57276] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.326 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.326 DEBUG 12856 --- [reactor-http-nio-2] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.326 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.326 DEBUG 12856 --- [reactor-http-nio-2] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.326 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [405c29d9] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.326 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x405c29d9, L:/10.5.0.2:8080 - R:/10.5.0.2:57277] Last HTTP response frame
2019-07-08 09:27:14.326 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x4e910cdb, L:/10.5.0.2:8080 - R:/10.5.0.2:57286] New http connection, requesting read
2019-07-08 09:27:14.326 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x405c29d9, L:/10.5.0.2:8080 - R:/10.5.0.2:57277] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.326 DEBUG 12856 --- [reactor-http-nio-3] reactor.netty.channel.BootstrapHandlers  : [id: 0x4e910cdb, L:/10.5.0.2:8080 - R:/10.5.0.2:57286] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.326 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.326 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x405c29d9, L:/10.5.0.2:8080 - R:/10.5.0.2:57277] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.326 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x4e910cdb, L:/10.5.0.2:8080 - R:/10.5.0.2:57286] Increasing pending responses, now 1
2019-07-08 09:27:14.326 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.326 DEBUG 12856 --- [reactor-http-nio-3] reactor.netty.http.server.HttpServer     : [id: 0x4e910cdb, L:/10.5.0.2:8080 - R:/10.5.0.2:57286] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.326 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x405c29d9, L:/10.5.0.2:8080 - R:/10.5.0.2:57277] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.326 DEBUG 12856 --- [reactor-http-nio-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [4e910cdb] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.326 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.327 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.327 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.327 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.327 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [c57d38fb] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.327 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x652611bb, L:/10.5.0.2:8080 - R:/10.5.0.2:57287] New http connection, requesting read
2019-07-08 09:27:14.327 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : [4e910cdb] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.327 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xc57d38fb, L:/10.5.0.2:8080 - R:/10.5.0.2:57278] Last HTTP response frame
2019-07-08 09:27:14.327 DEBUG 12856 --- [reactor-http-nio-4] reactor.netty.channel.BootstrapHandlers  : [id: 0x652611bb, L:/10.5.0.2:8080 - R:/10.5.0.2:57287] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.327 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.327 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xc57d38fb, L:/10.5.0.2:8080 - R:/10.5.0.2:57278] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.327 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x652611bb, L:/10.5.0.2:8080 - R:/10.5.0.2:57287] Increasing pending responses, now 1
2019-07-08 09:27:14.327 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.327 DEBUG 12856 --- [reactor-http-nio-4] reactor.netty.http.server.HttpServer     : [id: 0x652611bb, L:/10.5.0.2:8080 - R:/10.5.0.2:57287] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.327 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.327 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0xc57d38fb, L:/10.5.0.2:8080 - R:/10.5.0.2:57278] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.327 DEBUG 12856 --- [reactor-http-nio-3] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.327 DEBUG 12856 --- [reactor-http-nio-4] o.s.w.s.adapter.HttpWebHandlerAdapter    : [652611bb] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.327 DEBUG 12856 --- [reactor-http-nio-3] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.327 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 64 bytes, 7 commands in the stack
2019-07-08 09:27:14.327 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0xc57d38fb, L:/10.5.0.2:8080 - R:/10.5.0.2:57278] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.327 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.327 DEBUG 12856 --- [reactor-http-nio-3] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.327 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.327 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.327 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : [652611bb] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.328 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.327 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x27c877a7, L:/10.5.0.2:8080 - R:/10.5.0.2:57288] New http connection, requesting read
2019-07-08 09:27:14.328 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.328 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.328 DEBUG 12856 --- [reactor-http-nio-5] reactor.netty.channel.BootstrapHandlers  : [id: 0x27c877a7, L:/10.5.0.2:8080 - R:/10.5.0.2:57288] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.328 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.328 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x27c877a7, L:/10.5.0.2:8080 - R:/10.5.0.2:57288] Increasing pending responses, now 1
2019-07-08 09:27:14.328 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [f7079493] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.328 DEBUG 12856 --- [reactor-http-nio-4] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.328 DEBUG 12856 --- [reactor-http-nio-5] reactor.netty.http.server.HttpServer     : [id: 0x27c877a7, L:/10.5.0.2:8080 - R:/10.5.0.2:57288] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.328 DEBUG 12856 --- [reactor-http-nio-4] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.328 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xf7079493, L:/10.5.0.2:8080 - R:/10.5.0.2:57279] Last HTTP response frame
2019-07-08 09:27:14.328 DEBUG 12856 --- [reactor-http-nio-5] o.s.w.s.adapter.HttpWebHandlerAdapter    : [27c877a7] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.328 DEBUG 12856 --- [reactor-http-nio-4] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.328 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xf7079493, L:/10.5.0.2:8080 - R:/10.5.0.2:57279] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.328 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.328 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.328 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.328 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0xf7079493, L:/10.5.0.2:8080 - R:/10.5.0.2:57279] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.328 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.328 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : [27c877a7] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.328 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0xf7079493, L:/10.5.0.2:8080 - R:/10.5.0.2:57279] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.329 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.328 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.329 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0xb519f98d, L:/10.5.0.2:8080 - R:/10.5.0.2:57289] New http connection, requesting read
2019-07-08 09:27:14.329 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.329 DEBUG 12856 --- [reactor-http-nio-6] reactor.netty.channel.BootstrapHandlers  : [id: 0xb519f98d, L:/10.5.0.2:8080 - R:/10.5.0.2:57289] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.329 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [bf3f6e6d] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.329 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0xb519f98d, L:/10.5.0.2:8080 - R:/10.5.0.2:57289] Increasing pending responses, now 1
2019-07-08 09:27:14.329 DEBUG 12856 --- [reactor-http-nio-5] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.329 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xbf3f6e6d, L:/10.5.0.2:8080 - R:/10.5.0.2:57280] Last HTTP response frame
2019-07-08 09:27:14.329 DEBUG 12856 --- [reactor-http-nio-6] reactor.netty.http.server.HttpServer     : [id: 0xb519f98d, L:/10.5.0.2:8080 - R:/10.5.0.2:57289] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.329 DEBUG 12856 --- [reactor-http-nio-5] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.329 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xbf3f6e6d, L:/10.5.0.2:8080 - R:/10.5.0.2:57280] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.329 DEBUG 12856 --- [reactor-http-nio-6] o.s.w.s.adapter.HttpWebHandlerAdapter    : [b519f98d] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.329 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.329 DEBUG 12856 --- [reactor-http-nio-5] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.329 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0xbf3f6e6d, L:/10.5.0.2:8080 - R:/10.5.0.2:57280] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.329 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.329 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.329 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0xbf3f6e6d, L:/10.5.0.2:8080 - R:/10.5.0.2:57280] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.329 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.329 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.329 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.329 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : [b519f98d] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.329 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [0ae869ea] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.329 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0xde1b392a, L:/10.5.0.2:8080 - R:/10.5.0.2:57290] New http connection, requesting read
2019-07-08 09:27:14.329 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.329 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x0ae869ea, L:/10.5.0.2:8080 - R:/10.5.0.2:57282] Last HTTP response frame
2019-07-08 09:27:14.329 DEBUG 12856 --- [reactor-http-nio-7] reactor.netty.channel.BootstrapHandlers  : [id: 0xde1b392a, L:/10.5.0.2:8080 - R:/10.5.0.2:57290] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.330 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x0ae869ea, L:/10.5.0.2:8080 - R:/10.5.0.2:57282] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.330 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0xde1b392a, L:/10.5.0.2:8080 - R:/10.5.0.2:57290] Increasing pending responses, now 1
2019-07-08 09:27:14.330 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x0ae869ea, L:/10.5.0.2:8080 - R:/10.5.0.2:57282] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.330 DEBUG 12856 --- [reactor-http-nio-6] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.330 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 4 commands
2019-07-08 09:27:14.330 DEBUG 12856 --- [reactor-http-nio-7] reactor.netty.http.server.HttpServer     : [id: 0xde1b392a, L:/10.5.0.2:8080 - R:/10.5.0.2:57290] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.330 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x0ae869ea, L:/10.5.0.2:8080 - R:/10.5.0.2:57282] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.330 DEBUG 12856 --- [reactor-http-nio-7] o.s.w.s.adapter.HttpWebHandlerAdapter    : [de1b392a] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.330 DEBUG 12856 --- [reactor-http-nio-6] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.330 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.330 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.330 DEBUG 12856 --- [reactor-http-nio-6] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.330 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.330 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.330 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x49c8ebb1, L:/10.5.0.2:8080 - R:/10.5.0.2:57291] New http connection, requesting read
2019-07-08 09:27:14.330 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.330 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : [de1b392a] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.330 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [b39bf996] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.330 DEBUG 12856 --- [reactor-http-nio-8] reactor.netty.channel.BootstrapHandlers  : [id: 0x49c8ebb1, L:/10.5.0.2:8080 - R:/10.5.0.2:57291] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.330 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.330 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xb39bf996, L:/10.5.0.2:8080 - R:/10.5.0.2:57283] Last HTTP response frame
2019-07-08 09:27:14.330 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x49c8ebb1, L:/10.5.0.2:8080 - R:/10.5.0.2:57291] Increasing pending responses, now 1
2019-07-08 09:27:14.330 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xb39bf996, L:/10.5.0.2:8080 - R:/10.5.0.2:57283] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.330 DEBUG 12856 --- [reactor-http-nio-8] reactor.netty.http.server.HttpServer     : [id: 0x49c8ebb1, L:/10.5.0.2:8080 - R:/10.5.0.2:57291] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.330 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 3 commands
2019-07-08 09:27:14.330 DEBUG 12856 --- [reactor-http-nio-8] o.s.w.s.adapter.HttpWebHandlerAdapter    : [49c8ebb1] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.330 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.330 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0xb39bf996, L:/10.5.0.2:8080 - R:/10.5.0.2:57283] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.330 DEBUG 12856 --- [reactor-http-nio-7] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.330 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.330 DEBUG 12856 --- [reactor-http-nio-7] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.330 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.330 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0xb39bf996, L:/10.5.0.2:8080 - R:/10.5.0.2:57283] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.330 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.331 DEBUG 12856 --- [reactor-http-nio-7] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.331 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : [49c8ebb1] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.331 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.331 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.331 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x48e59253, L:/10.5.0.2:8080 - R:/10.5.0.2:57292] New http connection, requesting read
2019-07-08 09:27:14.331 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [1e33e31e] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.331 DEBUG 12856 --- [reactor-http-nio-9] reactor.netty.channel.BootstrapHandlers  : [id: 0x48e59253, L:/10.5.0.2:8080 - R:/10.5.0.2:57292] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.331 DEBUG 12856 --- [reactor-http-nio-8] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.331 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x1e33e31e, L:/10.5.0.2:8080 - R:/10.5.0.2:57281] Last HTTP response frame
2019-07-08 09:27:14.331 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x48e59253, L:/10.5.0.2:8080 - R:/10.5.0.2:57292] Increasing pending responses, now 1
2019-07-08 09:27:14.331 DEBUG 12856 --- [reactor-http-nio-8] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.331 DEBUG 12856 --- [reactor-http-nio-9] reactor.netty.http.server.HttpServer     : [id: 0x48e59253, L:/10.5.0.2:8080 - R:/10.5.0.2:57292] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.331 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x1e33e31e, L:/10.5.0.2:8080 - R:/10.5.0.2:57281] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.331 DEBUG 12856 --- [reactor-http-nio-8] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.331 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 2 commands
2019-07-08 09:27:14.331 DEBUG 12856 --- [reactor-http-nio-9] o.s.w.s.adapter.HttpWebHandlerAdapter    : [48e59253] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.331 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x1e33e31e, L:/10.5.0.2:8080 - R:/10.5.0.2:57281] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.331 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.331 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.331 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x1e33e31e, L:/10.5.0.2:8080 - R:/10.5.0.2:57281] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.331 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: false
2019-07-08 09:27:14.331 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.331 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 20 bytes, 2 commands in the stack
2019-07-08 09:27:14.331 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : [48e59253] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.331 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0xc5d7e575, L:/10.5.0.2:8080 - R:/10.5.0.2:57293] New http connection, requesting read
2019-07-08 09:27:14.331 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.331 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 2 commands
2019-07-08 09:27:14.331 DEBUG 12856 --- [reactor-http-nio-10] reactor.netty.channel.BootstrapHandlers  : [id: 0xc5d7e575, L:/10.5.0.2:8080 - R:/10.5.0.2:57293] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.332 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.332 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0xc5d7e575, L:/10.5.0.2:8080 - R:/10.5.0.2:57293] Increasing pending responses, now 1
2019-07-08 09:27:14.332 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.332 DEBUG 12856 --- [reactor-http-nio-9] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.332 DEBUG 12856 --- [reactor-http-nio-10] reactor.netty.http.server.HttpServer     : [id: 0xc5d7e575, L:/10.5.0.2:8080 - R:/10.5.0.2:57293] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.332 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.332 DEBUG 12856 --- [reactor-http-nio-9] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.332 DEBUG 12856 --- [reactor-http-nio-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [c5d7e575] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.332 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [e9314483] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.332 DEBUG 12856 --- [reactor-http-nio-9] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.332 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.332 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xe9314483, L:/10.5.0.2:8080 - R:/10.5.0.2:57284] Last HTTP response frame
2019-07-08 09:27:14.332 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.332 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xe9314483, L:/10.5.0.2:8080 - R:/10.5.0.2:57284] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.332 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : [c5d7e575] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.332 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 1 commands
2019-07-08 09:27:14.332 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0xe9314483, L:/10.5.0.2:8080 - R:/10.5.0.2:57284] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.332 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.332 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.332 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0xe9314483, L:/10.5.0.2:8080 - R:/10.5.0.2:57284] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.332 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.332 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.332 DEBUG 12856 --- [reactor-http-nio-10] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.332 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [0c0c094a] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.332 DEBUG 12856 --- [reactor-http-nio-10] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.332 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x0c0c094a, L:/10.5.0.2:8080 - R:/10.5.0.2:57285] Last HTTP response frame
2019-07-08 09:27:14.332 DEBUG 12856 --- [reactor-http-nio-10] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.332 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x59145c2c, L:/10.5.0.2:8080 - R:/10.5.0.2:57294] New http connection, requesting read
2019-07-08 09:27:14.332 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x0c0c094a, L:/10.5.0.2:8080 - R:/10.5.0.2:57285] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.344 DEBUG 12856 --- [reactor-http-nio-11] reactor.netty.channel.BootstrapHandlers  : [id: 0x59145c2c, L:/10.5.0.2:8080 - R:/10.5.0.2:57294] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.344 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.344 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x59145c2c, L:/10.5.0.2:8080 - R:/10.5.0.2:57294] Increasing pending responses, now 1
2019-07-08 09:27:14.344 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.344 DEBUG 12856 --- [reactor-http-nio-11] reactor.netty.http.server.HttpServer     : [id: 0x59145c2c, L:/10.5.0.2:8080 - R:/10.5.0.2:57294] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.344 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x0c0c094a, L:/10.5.0.2:8080 - R:/10.5.0.2:57285] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.344 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.344 DEBUG 12856 --- [reactor-http-nio-11] o.s.w.s.adapter.HttpWebHandlerAdapter    : [59145c2c] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.345 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.345 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.344 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x0c0c094a, L:/10.5.0.2:8080 - R:/10.5.0.2:57285] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.345 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.345 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.345 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.345 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.345 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.345 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : [59145c2c] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.345 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.345 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0xc657a05d, L:/10.5.0.2:8080 - R:/10.5.0.2:57295] New http connection, requesting read
2019-07-08 09:27:14.345 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.345 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.345 DEBUG 12856 --- [reactor-http-nio-12] reactor.netty.channel.BootstrapHandlers  : [id: 0xc657a05d, L:/10.5.0.2:8080 - R:/10.5.0.2:57295] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.345 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.345 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0xc657a05d, L:/10.5.0.2:8080 - R:/10.5.0.2:57295] Increasing pending responses, now 1
2019-07-08 09:27:14.345 DEBUG 12856 --- [reactor-http-nio-11] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.345 DEBUG 12856 --- [reactor-http-nio-12] reactor.netty.http.server.HttpServer     : [id: 0xc657a05d, L:/10.5.0.2:8080 - R:/10.5.0.2:57295] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.345 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.345 DEBUG 12856 --- [reactor-http-nio-11] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.346 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.346 DEBUG 12856 --- [reactor-http-nio-12] o.s.w.s.adapter.HttpWebHandlerAdapter    : [c657a05d] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.346 DEBUG 12856 --- [reactor-http-nio-11] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.346 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.346 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.346 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.346 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.346 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.346 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : [c657a05d] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.346 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.346 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.346 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.346 DEBUG 12856 --- [reactor-http-nio-12] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.346 DEBUG 12856 --- [reactor-http-nio-12] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.346 DEBUG 12856 --- [reactor-http-nio-12] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.347 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.347 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.347 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 48 bytes, 10 commands in the stack
2019-07-08 09:27:14.347 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 10 commands
2019-07-08 09:27:14.347 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.347 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.347 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.347 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [4e910cdb] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.347 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x4e910cdb, L:/10.5.0.2:8080 - R:/10.5.0.2:57286] Last HTTP response frame
2019-07-08 09:27:14.347 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x4e910cdb, L:/10.5.0.2:8080 - R:/10.5.0.2:57286] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.347 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 9 commands
2019-07-08 09:27:14.347 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x4e910cdb, L:/10.5.0.2:8080 - R:/10.5.0.2:57286] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.347 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.347 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x4e910cdb, L:/10.5.0.2:8080 - R:/10.5.0.2:57286] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.347 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.347 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.347 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [652611bb] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.347 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x652611bb, L:/10.5.0.2:8080 - R:/10.5.0.2:57287] Last HTTP response frame
2019-07-08 09:27:14.347 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x652611bb, L:/10.5.0.2:8080 - R:/10.5.0.2:57287] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.347 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.347 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x652611bb, L:/10.5.0.2:8080 - R:/10.5.0.2:57287] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.347 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x3ff3b099, L:/10.5.0.2:8080 - R:/10.5.0.2:57296] New http connection, requesting read
2019-07-08 09:27:14.347 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.347 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x652611bb, L:/10.5.0.2:8080 - R:/10.5.0.2:57287] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.347 DEBUG 12856 --- [reactor-http-nio-13] reactor.netty.channel.BootstrapHandlers  : [id: 0x3ff3b099, L:/10.5.0.2:8080 - R:/10.5.0.2:57296] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.348 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.348 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x3ff3b099, L:/10.5.0.2:8080 - R:/10.5.0.2:57296] Increasing pending responses, now 1
2019-07-08 09:27:14.348 DEBUG 12856 --- [reactor-http-nio-13] reactor.netty.http.server.HttpServer     : [id: 0x3ff3b099, L:/10.5.0.2:8080 - R:/10.5.0.2:57296] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.348 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.348 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0xd7917980, L:/10.5.0.2:8080 - R:/10.5.0.2:57297] New http connection, requesting read
2019-07-08 09:27:14.348 DEBUG 12856 --- [reactor-http-nio-13] o.s.w.s.adapter.HttpWebHandlerAdapter    : [3ff3b099] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.348 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [27c877a7] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.348 DEBUG 12856 --- [reactor-http-nio-14] reactor.netty.channel.BootstrapHandlers  : [id: 0xd7917980, L:/10.5.0.2:8080 - R:/10.5.0.2:57297] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.348 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.348 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x27c877a7, L:/10.5.0.2:8080 - R:/10.5.0.2:57288] Last HTTP response frame
2019-07-08 09:27:14.348 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0xd7917980, L:/10.5.0.2:8080 - R:/10.5.0.2:57297] Increasing pending responses, now 1
2019-07-08 09:27:14.348 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.348 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x27c877a7, L:/10.5.0.2:8080 - R:/10.5.0.2:57288] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.348 DEBUG 12856 --- [reactor-http-nio-14] reactor.netty.http.server.HttpServer     : [id: 0xd7917980, L:/10.5.0.2:8080 - R:/10.5.0.2:57297] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.348 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : [3ff3b099] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.348 DEBUG 12856 --- [reactor-http-nio-14] o.s.w.s.adapter.HttpWebHandlerAdapter    : [d7917980] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.348 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.348 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.348 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.348 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.348 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x27c877a7, L:/10.5.0.2:8080 - R:/10.5.0.2:57288] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.348 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.348 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.348 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : [d7917980] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.349 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.349 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x27c877a7, L:/10.5.0.2:8080 - R:/10.5.0.2:57288] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.349 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [b519f98d] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.349 DEBUG 12856 --- [reactor-http-nio-13] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.349 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.349 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xb519f98d, L:/10.5.0.2:8080 - R:/10.5.0.2:57289] Last HTTP response frame
2019-07-08 09:27:14.349 DEBUG 12856 --- [reactor-http-nio-13] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.349 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0xc3145d56, L:/10.5.0.2:8080 - R:/10.5.0.2:57298] New http connection, requesting read
2019-07-08 09:27:14.349 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xb519f98d, L:/10.5.0.2:8080 - R:/10.5.0.2:57289] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.349 DEBUG 12856 --- [reactor-http-nio-13] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.349 DEBUG 12856 --- [reactor-http-nio-15] reactor.netty.channel.BootstrapHandlers  : [id: 0xc3145d56, L:/10.5.0.2:8080 - R:/10.5.0.2:57298] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.349 DEBUG 12856 --- [reactor-http-nio-14] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.349 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.349 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0xb519f98d, L:/10.5.0.2:8080 - R:/10.5.0.2:57289] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.349 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0xc3145d56, L:/10.5.0.2:8080 - R:/10.5.0.2:57298] Increasing pending responses, now 1
2019-07-08 09:27:14.349 DEBUG 12856 --- [reactor-http-nio-14] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.349 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.349 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0xb519f98d, L:/10.5.0.2:8080 - R:/10.5.0.2:57289] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.349 DEBUG 12856 --- [reactor-http-nio-15] reactor.netty.http.server.HttpServer     : [id: 0xc3145d56, L:/10.5.0.2:8080 - R:/10.5.0.2:57298] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.349 DEBUG 12856 --- [reactor-http-nio-14] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.350 DEBUG 12856 --- [reactor-http-nio-15] o.s.w.s.adapter.HttpWebHandlerAdapter    : [c3145d56] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.350 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.350 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.350 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.350 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.350 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x8ca7865a, L:/10.5.0.2:8080 - R:/10.5.0.2:57299] New http connection, requesting read
2019-07-08 09:27:14.350 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 72 bytes, 8 commands in the stack
2019-07-08 09:27:14.350 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : [c3145d56] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.350 DEBUG 12856 --- [reactor-http-nio-16] reactor.netty.channel.BootstrapHandlers  : [id: 0x8ca7865a, L:/10.5.0.2:8080 - R:/10.5.0.2:57299] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.350 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.350 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.350 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x8ca7865a, L:/10.5.0.2:8080 - R:/10.5.0.2:57299] Increasing pending responses, now 1
2019-07-08 09:27:14.350 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.350 DEBUG 12856 --- [reactor-http-nio-16] reactor.netty.http.server.HttpServer     : [id: 0x8ca7865a, L:/10.5.0.2:8080 - R:/10.5.0.2:57299] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.350 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.350 DEBUG 12856 --- [reactor-http-nio-15] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.350 DEBUG 12856 --- [reactor-http-nio-16] o.s.w.s.adapter.HttpWebHandlerAdapter    : [8ca7865a] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.350 DEBUG 12856 --- [reactor-http-nio-15] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.350 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.351 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.351 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [de1b392a] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.351 DEBUG 12856 --- [reactor-http-nio-15] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.351 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xde1b392a, L:/10.5.0.2:8080 - R:/10.5.0.2:57290] Last HTTP response frame
2019-07-08 09:27:14.351 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.351 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xde1b392a, L:/10.5.0.2:8080 - R:/10.5.0.2:57290] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.351 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : [8ca7865a] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.351 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.351 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0xde1b392a, L:/10.5.0.2:8080 - R:/10.5.0.2:57290] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.351 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.351 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.351 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0xde1b392a, L:/10.5.0.2:8080 - R:/10.5.0.2:57290] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.351 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.351 DEBUG 12856 --- [reactor-http-nio-16] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.351 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.351 DEBUG 12856 --- [reactor-http-nio-16] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.352 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [49c8ebb1] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.352 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0xac9643b3, L:/10.5.0.2:8080 - R:/10.5.0.2:57300] New http connection, requesting read
2019-07-08 09:27:14.352 DEBUG 12856 --- [reactor-http-nio-16] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.352 DEBUG 12856 --- [reactor-http-nio-1] reactor.netty.channel.BootstrapHandlers  : [id: 0xac9643b3, L:/10.5.0.2:8080 - R:/10.5.0.2:57300] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.352 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x49c8ebb1, L:/10.5.0.2:8080 - R:/10.5.0.2:57291] Last HTTP response frame
2019-07-08 09:27:14.352 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0xac9643b3, L:/10.5.0.2:8080 - R:/10.5.0.2:57300] Increasing pending responses, now 1
2019-07-08 09:27:14.352 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x49c8ebb1, L:/10.5.0.2:8080 - R:/10.5.0.2:57291] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.352 DEBUG 12856 --- [reactor-http-nio-1] reactor.netty.http.server.HttpServer     : [id: 0xac9643b3, L:/10.5.0.2:8080 - R:/10.5.0.2:57300] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.352 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.352 DEBUG 12856 --- [reactor-http-nio-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [ac9643b3] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.352 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x49c8ebb1, L:/10.5.0.2:8080 - R:/10.5.0.2:57291] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.352 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.352 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.352 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x49c8ebb1, L:/10.5.0.2:8080 - R:/10.5.0.2:57291] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.352 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.352 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.352 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.352 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : [ac9643b3] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.352 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [48e59253] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.352 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.352 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x48e59253, L:/10.5.0.2:8080 - R:/10.5.0.2:57292] Last HTTP response frame
2019-07-08 09:27:14.353 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x48e59253, L:/10.5.0.2:8080 - R:/10.5.0.2:57292] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.353 DEBUG 12856 --- [reactor-http-nio-1] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.353 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x48e59253, L:/10.5.0.2:8080 - R:/10.5.0.2:57292] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.353 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.353 DEBUG 12856 --- [reactor-http-nio-1] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.353 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x48e59253, L:/10.5.0.2:8080 - R:/10.5.0.2:57292] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.353 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.353 DEBUG 12856 --- [reactor-http-nio-1] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.353 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.353 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.353 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x3460a1d6, L:/10.5.0.2:8080 - R:/10.5.0.2:57301] New http connection, requesting read
2019-07-08 09:27:14.353 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x716cd271, L:/10.5.0.2:8080 - R:/10.5.0.2:57302] New http connection, requesting read
2019-07-08 09:27:14.353 DEBUG 12856 --- [reactor-http-nio-2] reactor.netty.channel.BootstrapHandlers  : [id: 0x3460a1d6, L:/10.5.0.2:8080 - R:/10.5.0.2:57301] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.353 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [c5d7e575] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.353 DEBUG 12856 --- [reactor-http-nio-3] reactor.netty.channel.BootstrapHandlers  : [id: 0x716cd271, L:/10.5.0.2:8080 - R:/10.5.0.2:57302] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.353 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x3460a1d6, L:/10.5.0.2:8080 - R:/10.5.0.2:57301] Increasing pending responses, now 1
2019-07-08 09:27:14.353 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xc5d7e575, L:/10.5.0.2:8080 - R:/10.5.0.2:57293] Last HTTP response frame
2019-07-08 09:27:14.353 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x716cd271, L:/10.5.0.2:8080 - R:/10.5.0.2:57302] Increasing pending responses, now 1
2019-07-08 09:27:14.353 DEBUG 12856 --- [reactor-http-nio-2] reactor.netty.http.server.HttpServer     : [id: 0x3460a1d6, L:/10.5.0.2:8080 - R:/10.5.0.2:57301] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.353 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xc5d7e575, L:/10.5.0.2:8080 - R:/10.5.0.2:57293] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.354 DEBUG 12856 --- [reactor-http-nio-3] reactor.netty.http.server.HttpServer     : [id: 0x716cd271, L:/10.5.0.2:8080 - R:/10.5.0.2:57302] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.354 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 4 commands
2019-07-08 09:27:14.354 DEBUG 12856 --- [reactor-http-nio-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [716cd271] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.354 DEBUG 12856 --- [reactor-http-nio-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [3460a1d6] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.354 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0xc5d7e575, L:/10.5.0.2:8080 - R:/10.5.0.2:57293] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.354 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.354 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.354 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.354 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.354 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0xc5d7e575, L:/10.5.0.2:8080 - R:/10.5.0.2:57293] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.354 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.354 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.354 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : [716cd271] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.354 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.354 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.354 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : [3460a1d6] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.354 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0xea6957ae, L:/10.5.0.2:8080 - R:/10.5.0.2:57303] New http connection, requesting read
2019-07-08 09:27:14.355 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.354 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [59145c2c] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.355 DEBUG 12856 --- [reactor-http-nio-4] reactor.netty.channel.BootstrapHandlers  : [id: 0xea6957ae, L:/10.5.0.2:8080 - R:/10.5.0.2:57303] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.355 DEBUG 12856 --- [reactor-http-nio-3] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.355 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0xea6957ae, L:/10.5.0.2:8080 - R:/10.5.0.2:57303] Increasing pending responses, now 1
2019-07-08 09:27:14.355 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x59145c2c, L:/10.5.0.2:8080 - R:/10.5.0.2:57294] Last HTTP response frame
2019-07-08 09:27:14.355 DEBUG 12856 --- [reactor-http-nio-2] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.355 DEBUG 12856 --- [reactor-http-nio-3] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.355 DEBUG 12856 --- [reactor-http-nio-4] reactor.netty.http.server.HttpServer     : [id: 0xea6957ae, L:/10.5.0.2:8080 - R:/10.5.0.2:57303] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.355 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x59145c2c, L:/10.5.0.2:8080 - R:/10.5.0.2:57294] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.355 DEBUG 12856 --- [reactor-http-nio-2] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.355 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 3 commands
2019-07-08 09:27:14.355 DEBUG 12856 --- [reactor-http-nio-2] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.355 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.355 DEBUG 12856 --- [reactor-http-nio-3] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.355 DEBUG 12856 --- [reactor-http-nio-4] o.s.w.s.adapter.HttpWebHandlerAdapter    : [ea6957ae] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.355 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x59145c2c, L:/10.5.0.2:8080 - R:/10.5.0.2:57294] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.355 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.355 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.356 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x59145c2c, L:/10.5.0.2:8080 - R:/10.5.0.2:57294] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.356 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.356 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.356 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [c657a05d] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.356 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : [ea6957ae] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.356 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xc657a05d, L:/10.5.0.2:8080 - R:/10.5.0.2:57295] Last HTTP response frame
2019-07-08 09:27:14.356 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x2201f3b5, L:/10.5.0.2:8080 - R:/10.5.0.2:57304] New http connection, requesting read
2019-07-08 09:27:14.356 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xc657a05d, L:/10.5.0.2:8080 - R:/10.5.0.2:57295] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.356 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.356 DEBUG 12856 --- [reactor-http-nio-5] reactor.netty.channel.BootstrapHandlers  : [id: 0x2201f3b5, L:/10.5.0.2:8080 - R:/10.5.0.2:57304] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.356 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.356 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x2201f3b5, L:/10.5.0.2:8080 - R:/10.5.0.2:57304] Increasing pending responses, now 1
2019-07-08 09:27:14.356 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0xc657a05d, L:/10.5.0.2:8080 - R:/10.5.0.2:57295] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.356 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.356 DEBUG 12856 --- [reactor-http-nio-4] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.356 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.357 DEBUG 12856 --- [reactor-http-nio-4] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.356 DEBUG 12856 --- [reactor-http-nio-5] reactor.netty.http.server.HttpServer     : [id: 0x2201f3b5, L:/10.5.0.2:8080 - R:/10.5.0.2:57304] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.356 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0xc657a05d, L:/10.5.0.2:8080 - R:/10.5.0.2:57295] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.357 DEBUG 12856 --- [reactor-http-nio-5] o.s.w.s.adapter.HttpWebHandlerAdapter    : [2201f3b5] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.357 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.357 DEBUG 12856 --- [reactor-http-nio-4] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.357 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.357 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.357 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.357 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : [2201f3b5] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.357 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.357 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x183061ec, L:/10.5.0.2:8080 - R:/10.5.0.2:57305] New http connection, requesting read
2019-07-08 09:27:14.357 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.357 DEBUG 12856 --- [reactor-http-nio-6] reactor.netty.channel.BootstrapHandlers  : [id: 0x183061ec, L:/10.5.0.2:8080 - R:/10.5.0.2:57305] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.357 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.357 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x183061ec, L:/10.5.0.2:8080 - R:/10.5.0.2:57305] Increasing pending responses, now 1
2019-07-08 09:27:14.357 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.357 DEBUG 12856 --- [reactor-http-nio-5] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.357 DEBUG 12856 --- [reactor-http-nio-6] reactor.netty.http.server.HttpServer     : [id: 0x183061ec, L:/10.5.0.2:8080 - R:/10.5.0.2:57305] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.357 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.357 DEBUG 12856 --- [reactor-http-nio-5] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.358 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.358 DEBUG 12856 --- [reactor-http-nio-6] o.s.w.s.adapter.HttpWebHandlerAdapter    : [183061ec] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.358 DEBUG 12856 --- [reactor-http-nio-5] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.358 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.358 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.358 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.358 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.358 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : [183061ec] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.358 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.358 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.358 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.358 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 36 bytes, 9 commands in the stack
2019-07-08 09:27:14.358 DEBUG 12856 --- [reactor-http-nio-6] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.358 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 9 commands
2019-07-08 09:27:14.358 DEBUG 12856 --- [reactor-http-nio-6] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.358 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.359 DEBUG 12856 --- [reactor-http-nio-6] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.359 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.359 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.359 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [3ff3b099] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.359 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x3ff3b099, L:/10.5.0.2:8080 - R:/10.5.0.2:57296] Last HTTP response frame
2019-07-08 09:27:14.359 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x3ff3b099, L:/10.5.0.2:8080 - R:/10.5.0.2:57296] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.359 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.359 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x3ff3b099, L:/10.5.0.2:8080 - R:/10.5.0.2:57296] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.359 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.359 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x3ff3b099, L:/10.5.0.2:8080 - R:/10.5.0.2:57296] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.359 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.359 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.359 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [d7917980] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.359 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xd7917980, L:/10.5.0.2:8080 - R:/10.5.0.2:57297] Last HTTP response frame
2019-07-08 09:27:14.359 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xd7917980, L:/10.5.0.2:8080 - R:/10.5.0.2:57297] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.359 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x9a68b559, L:/10.5.0.2:8080 - R:/10.5.0.2:57306] New http connection, requesting read
2019-07-08 09:27:14.359 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.359 DEBUG 12856 --- [reactor-http-nio-7] reactor.netty.channel.BootstrapHandlers  : [id: 0x9a68b559, L:/10.5.0.2:8080 - R:/10.5.0.2:57306] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.359 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0xd7917980, L:/10.5.0.2:8080 - R:/10.5.0.2:57297] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.359 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.359 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x9a68b559, L:/10.5.0.2:8080 - R:/10.5.0.2:57306] Increasing pending responses, now 1
2019-07-08 09:27:14.359 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.359 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0xd7917980, L:/10.5.0.2:8080 - R:/10.5.0.2:57297] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.359 DEBUG 12856 --- [reactor-http-nio-7] reactor.netty.http.server.HttpServer     : [id: 0x9a68b559, L:/10.5.0.2:8080 - R:/10.5.0.2:57306] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.360 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.360 DEBUG 12856 --- [reactor-http-nio-7] o.s.w.s.adapter.HttpWebHandlerAdapter    : [9a68b559] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.360 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [c3145d56] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.360 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.360 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xc3145d56, L:/10.5.0.2:8080 - R:/10.5.0.2:57298] Last HTTP response frame
2019-07-08 09:27:14.360 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.360 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xc3145d56, L:/10.5.0.2:8080 - R:/10.5.0.2:57298] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.360 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0xa8d7f8b4, L:/10.5.0.2:8080 - R:/10.5.0.2:57307] New http connection, requesting read
2019-07-08 09:27:14.360 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : [9a68b559] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.360 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.360 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.360 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0xc3145d56, L:/10.5.0.2:8080 - R:/10.5.0.2:57298] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.360 DEBUG 12856 --- [reactor-http-nio-8] reactor.netty.channel.BootstrapHandlers  : [id: 0xa8d7f8b4, L:/10.5.0.2:8080 - R:/10.5.0.2:57307] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.360 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.360 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0xc3145d56, L:/10.5.0.2:8080 - R:/10.5.0.2:57298] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.360 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0xa8d7f8b4, L:/10.5.0.2:8080 - R:/10.5.0.2:57307] Increasing pending responses, now 1
2019-07-08 09:27:14.360 DEBUG 12856 --- [reactor-http-nio-7] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.360 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 72 bytes, 7 commands in the stack
2019-07-08 09:27:14.361 DEBUG 12856 --- [reactor-http-nio-8] reactor.netty.http.server.HttpServer     : [id: 0xa8d7f8b4, L:/10.5.0.2:8080 - R:/10.5.0.2:57307] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.361 DEBUG 12856 --- [reactor-http-nio-7] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.361 DEBUG 12856 --- [reactor-http-nio-8] o.s.w.s.adapter.HttpWebHandlerAdapter    : [a8d7f8b4] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.361 DEBUG 12856 --- [reactor-http-nio-7] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.361 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.361 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x1a5efbe2, L:/10.5.0.2:8080 - R:/10.5.0.2:57308] New http connection, requesting read
2019-07-08 09:27:14.361 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.361 DEBUG 12856 --- [reactor-http-nio-9] reactor.netty.channel.BootstrapHandlers  : [id: 0x1a5efbe2, L:/10.5.0.2:8080 - R:/10.5.0.2:57308] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.361 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.361 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.361 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : [a8d7f8b4] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.361 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x1a5efbe2, L:/10.5.0.2:8080 - R:/10.5.0.2:57308] Increasing pending responses, now 1
2019-07-08 09:27:14.361 DEBUG 12856 --- [reactor-http-nio-9] reactor.netty.http.server.HttpServer     : [id: 0x1a5efbe2, L:/10.5.0.2:8080 - R:/10.5.0.2:57308] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.361 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.361 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.361 DEBUG 12856 --- [reactor-http-nio-9] o.s.w.s.adapter.HttpWebHandlerAdapter    : [1a5efbe2] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.361 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.362 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.362 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [8ca7865a] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.362 DEBUG 12856 --- [reactor-http-nio-8] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.362 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.362 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x8ca7865a, L:/10.5.0.2:8080 - R:/10.5.0.2:57299] Last HTTP response frame
2019-07-08 09:27:14.362 DEBUG 12856 --- [reactor-http-nio-8] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.362 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : [1a5efbe2] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.362 DEBUG 12856 --- [reactor-http-nio-8] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.362 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x8ca7865a, L:/10.5.0.2:8080 - R:/10.5.0.2:57299] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.362 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.362 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.362 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x8ca7865a, L:/10.5.0.2:8080 - R:/10.5.0.2:57299] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.362 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.362 DEBUG 12856 --- [reactor-http-nio-9] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.362 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x8ca7865a, L:/10.5.0.2:8080 - R:/10.5.0.2:57299] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.362 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.362 DEBUG 12856 --- [reactor-http-nio-9] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.362 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.362 DEBUG 12856 --- [reactor-http-nio-9] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.362 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [ac9643b3] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.362 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xac9643b3, L:/10.5.0.2:8080 - R:/10.5.0.2:57300] Last HTTP response frame
2019-07-08 09:27:14.362 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x65f933cd, L:/10.5.0.2:8080 - R:/10.5.0.2:57309] New http connection, requesting read
2019-07-08 09:27:14.362 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xac9643b3, L:/10.5.0.2:8080 - R:/10.5.0.2:57300] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.362 DEBUG 12856 --- [reactor-http-nio-10] reactor.netty.channel.BootstrapHandlers  : [id: 0x65f933cd, L:/10.5.0.2:8080 - R:/10.5.0.2:57309] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.363 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0xac9643b3, L:/10.5.0.2:8080 - R:/10.5.0.2:57300] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.363 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x65f933cd, L:/10.5.0.2:8080 - R:/10.5.0.2:57309] Increasing pending responses, now 1
2019-07-08 09:27:14.363 DEBUG 12856 --- [reactor-http-nio-10] reactor.netty.http.server.HttpServer     : [id: 0x65f933cd, L:/10.5.0.2:8080 - R:/10.5.0.2:57309] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.362 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.363 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0xac9643b3, L:/10.5.0.2:8080 - R:/10.5.0.2:57300] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.363 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.363 DEBUG 12856 --- [reactor-http-nio-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [65f933cd] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.363 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.363 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.363 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.363 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.363 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : [65f933cd] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.363 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [716cd271] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.363 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.363 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x34e6e4e1, L:/10.5.0.2:8080 - R:/10.5.0.2:57310] New http connection, requesting read
2019-07-08 09:27:14.363 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x716cd271, L:/10.5.0.2:8080 - R:/10.5.0.2:57302] Last HTTP response frame
2019-07-08 09:27:14.363 DEBUG 12856 --- [reactor-http-nio-11] reactor.netty.channel.BootstrapHandlers  : [id: 0x34e6e4e1, L:/10.5.0.2:8080 - R:/10.5.0.2:57310] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.363 DEBUG 12856 --- [reactor-http-nio-10] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.363 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x716cd271, L:/10.5.0.2:8080 - R:/10.5.0.2:57302] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.363 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x34e6e4e1, L:/10.5.0.2:8080 - R:/10.5.0.2:57310] Increasing pending responses, now 1
2019-07-08 09:27:14.363 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 4 commands
2019-07-08 09:27:14.363 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x716cd271, L:/10.5.0.2:8080 - R:/10.5.0.2:57302] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.363 DEBUG 12856 --- [reactor-http-nio-10] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.363 DEBUG 12856 --- [reactor-http-nio-11] reactor.netty.http.server.HttpServer     : [id: 0x34e6e4e1, L:/10.5.0.2:8080 - R:/10.5.0.2:57310] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.364 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.364 DEBUG 12856 --- [reactor-http-nio-11] o.s.w.s.adapter.HttpWebHandlerAdapter    : [34e6e4e1] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.364 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x716cd271, L:/10.5.0.2:8080 - R:/10.5.0.2:57302] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.364 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.364 DEBUG 12856 --- [reactor-http-nio-10] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.364 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.364 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.364 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : [34e6e4e1] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.364 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.364 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x83fc0afb, L:/10.5.0.2:8080 - R:/10.5.0.2:57311] New http connection, requesting read
2019-07-08 09:27:14.364 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [3460a1d6] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.364 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.364 DEBUG 12856 --- [reactor-http-nio-12] reactor.netty.channel.BootstrapHandlers  : [id: 0x83fc0afb, L:/10.5.0.2:8080 - R:/10.5.0.2:57311] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.364 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x3460a1d6, L:/10.5.0.2:8080 - R:/10.5.0.2:57301] Last HTTP response frame
2019-07-08 09:27:14.364 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x3460a1d6, L:/10.5.0.2:8080 - R:/10.5.0.2:57301] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.364 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x83fc0afb, L:/10.5.0.2:8080 - R:/10.5.0.2:57311] Increasing pending responses, now 1
2019-07-08 09:27:14.364 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 3 commands
2019-07-08 09:27:14.364 DEBUG 12856 --- [reactor-http-nio-12] reactor.netty.http.server.HttpServer     : [id: 0x83fc0afb, L:/10.5.0.2:8080 - R:/10.5.0.2:57311] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.364 DEBUG 12856 --- [reactor-http-nio-11] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.364 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x3460a1d6, L:/10.5.0.2:8080 - R:/10.5.0.2:57301] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.364 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.364 DEBUG 12856 --- [reactor-http-nio-12] o.s.w.s.adapter.HttpWebHandlerAdapter    : [83fc0afb] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.364 DEBUG 12856 --- [reactor-http-nio-11] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.364 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.364 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x3460a1d6, L:/10.5.0.2:8080 - R:/10.5.0.2:57301] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.365 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.365 DEBUG 12856 --- [reactor-http-nio-11] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.365 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.365 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.365 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [ea6957ae] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.365 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : [83fc0afb] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.365 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xea6957ae, L:/10.5.0.2:8080 - R:/10.5.0.2:57303] Last HTTP response frame
2019-07-08 09:27:14.365 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0xa43aff19, L:/10.5.0.2:8080 - R:/10.5.0.2:57312] New http connection, requesting read
2019-07-08 09:27:14.365 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.365 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xea6957ae, L:/10.5.0.2:8080 - R:/10.5.0.2:57303] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.365 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 2 commands
2019-07-08 09:27:14.365 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.365 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0xea6957ae, L:/10.5.0.2:8080 - R:/10.5.0.2:57303] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.365 DEBUG 12856 --- [reactor-http-nio-13] reactor.netty.channel.BootstrapHandlers  : [id: 0xa43aff19, L:/10.5.0.2:8080 - R:/10.5.0.2:57312] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.365 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0xea6957ae, L:/10.5.0.2:8080 - R:/10.5.0.2:57303] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.365 DEBUG 12856 --- [reactor-http-nio-12] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.365 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.365 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0xa43aff19, L:/10.5.0.2:8080 - R:/10.5.0.2:57312] Increasing pending responses, now 1
2019-07-08 09:27:14.365 DEBUG 12856 --- [reactor-http-nio-12] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.365 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.365 DEBUG 12856 --- [reactor-http-nio-13] reactor.netty.http.server.HttpServer     : [id: 0xa43aff19, L:/10.5.0.2:8080 - R:/10.5.0.2:57312] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.365 DEBUG 12856 --- [reactor-http-nio-12] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.365 DEBUG 12856 --- [reactor-http-nio-13] o.s.w.s.adapter.HttpWebHandlerAdapter    : [a43aff19] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.365 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [2201f3b5] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.365 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x66d8b372, L:/10.5.0.2:8080 - R:/10.5.0.2:57313] New http connection, requesting read
2019-07-08 09:27:14.365 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x2201f3b5, L:/10.5.0.2:8080 - R:/10.5.0.2:57304] Last HTTP response frame
2019-07-08 09:27:14.366 DEBUG 12856 --- [reactor-http-nio-14] reactor.netty.channel.BootstrapHandlers  : [id: 0x66d8b372, L:/10.5.0.2:8080 - R:/10.5.0.2:57313] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.365 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.366 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x66d8b372, L:/10.5.0.2:8080 - R:/10.5.0.2:57313] Increasing pending responses, now 1
2019-07-08 09:27:14.366 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x2201f3b5, L:/10.5.0.2:8080 - R:/10.5.0.2:57304] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.366 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.366 DEBUG 12856 --- [reactor-http-nio-14] reactor.netty.http.server.HttpServer     : [id: 0x66d8b372, L:/10.5.0.2:8080 - R:/10.5.0.2:57313] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.366 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.366 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x2201f3b5, L:/10.5.0.2:8080 - R:/10.5.0.2:57304] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.366 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : [a43aff19] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.366 DEBUG 12856 --- [reactor-http-nio-14] o.s.w.s.adapter.HttpWebHandlerAdapter    : [66d8b372] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.366 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.366 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x2201f3b5, L:/10.5.0.2:8080 - R:/10.5.0.2:57304] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.366 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.366 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.366 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.366 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.366 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0xfaaffc6f, L:/10.5.0.2:8080 - R:/10.5.0.2:57314] New http connection, requesting read
2019-07-08 09:27:14.366 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.366 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.366 DEBUG 12856 --- [reactor-http-nio-15] reactor.netty.channel.BootstrapHandlers  : [id: 0xfaaffc6f, L:/10.5.0.2:8080 - R:/10.5.0.2:57314] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.366 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.366 DEBUG 12856 --- [reactor-http-nio-13] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.366 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : [66d8b372] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.366 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0xfaaffc6f, L:/10.5.0.2:8080 - R:/10.5.0.2:57314] Increasing pending responses, now 1
2019-07-08 09:27:14.366 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.366 DEBUG 12856 --- [reactor-http-nio-13] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.367 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.366 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.367 DEBUG 12856 --- [reactor-http-nio-15] reactor.netty.http.server.HttpServer     : [id: 0xfaaffc6f, L:/10.5.0.2:8080 - R:/10.5.0.2:57314] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.367 DEBUG 12856 --- [reactor-http-nio-13] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.367 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.367 DEBUG 12856 --- [reactor-http-nio-15] o.s.w.s.adapter.HttpWebHandlerAdapter    : [faaffc6f] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.367 DEBUG 12856 --- [reactor-http-nio-14] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.367 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.367 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.367 DEBUG 12856 --- [reactor-http-nio-14] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.367 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.367 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.367 DEBUG 12856 --- [reactor-http-nio-14] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.367 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : [faaffc6f] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.367 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.367 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.367 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.368 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.368 DEBUG 12856 --- [reactor-http-nio-15] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.368 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.368 DEBUG 12856 --- [reactor-http-nio-15] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.368 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.368 DEBUG 12856 --- [reactor-http-nio-15] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.368 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.368 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.368 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 36 bytes, 10 commands in the stack
2019-07-08 09:27:14.368 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 10 commands
2019-07-08 09:27:14.368 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.368 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.368 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.368 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [183061ec] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.368 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x183061ec, L:/10.5.0.2:8080 - R:/10.5.0.2:57305] Last HTTP response frame
2019-07-08 09:27:14.368 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x183061ec, L:/10.5.0.2:8080 - R:/10.5.0.2:57305] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.368 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 9 commands
2019-07-08 09:27:14.368 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x183061ec, L:/10.5.0.2:8080 - R:/10.5.0.2:57305] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.368 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.368 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x183061ec, L:/10.5.0.2:8080 - R:/10.5.0.2:57305] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.368 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.368 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.368 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [9a68b559] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.368 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x9a68b559, L:/10.5.0.2:8080 - R:/10.5.0.2:57306] Last HTTP response frame
2019-07-08 09:27:14.369 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x9a68b559, L:/10.5.0.2:8080 - R:/10.5.0.2:57306] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.369 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0xec888cf0, L:/10.5.0.2:8080 - R:/10.5.0.2:57315] New http connection, requesting read
2019-07-08 09:27:14.369 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x9a68b559, L:/10.5.0.2:8080 - R:/10.5.0.2:57306] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.369 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.369 DEBUG 12856 --- [reactor-http-nio-16] reactor.netty.channel.BootstrapHandlers  : [id: 0xec888cf0, L:/10.5.0.2:8080 - R:/10.5.0.2:57315] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.369 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.369 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x9a68b559, L:/10.5.0.2:8080 - R:/10.5.0.2:57306] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.369 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0xec888cf0, L:/10.5.0.2:8080 - R:/10.5.0.2:57315] Increasing pending responses, now 1
2019-07-08 09:27:14.369 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.369 DEBUG 12856 --- [reactor-http-nio-16] reactor.netty.http.server.HttpServer     : [id: 0xec888cf0, L:/10.5.0.2:8080 - R:/10.5.0.2:57315] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.369 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.369 DEBUG 12856 --- [reactor-http-nio-16] o.s.w.s.adapter.HttpWebHandlerAdapter    : [ec888cf0] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.369 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [a8d7f8b4] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.369 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xa8d7f8b4, L:/10.5.0.2:8080 - R:/10.5.0.2:57307] Last HTTP response frame
2019-07-08 09:27:14.369 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.369 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0xdd4de0ce, L:/10.5.0.2:8080 - R:/10.5.0.2:57316] New http connection, requesting read
2019-07-08 09:27:14.369 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xa8d7f8b4, L:/10.5.0.2:8080 - R:/10.5.0.2:57307] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.369 DEBUG 12856 --- [reactor-http-nio-1] reactor.netty.channel.BootstrapHandlers  : [id: 0xdd4de0ce, L:/10.5.0.2:8080 - R:/10.5.0.2:57316] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.369 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.369 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0xa8d7f8b4, L:/10.5.0.2:8080 - R:/10.5.0.2:57307] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.369 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 60 bytes, 7 commands in the stack
2019-07-08 09:27:14.369 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0xdd4de0ce, L:/10.5.0.2:8080 - R:/10.5.0.2:57316] Increasing pending responses, now 1
2019-07-08 09:27:14.369 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.369 DEBUG 12856 --- [reactor-http-nio-1] reactor.netty.http.server.HttpServer     : [id: 0xdd4de0ce, L:/10.5.0.2:8080 - R:/10.5.0.2:57316] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.369 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : [ec888cf0] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.369 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0xa8d7f8b4, L:/10.5.0.2:8080 - R:/10.5.0.2:57307] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.369 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.369 DEBUG 12856 --- [reactor-http-nio-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [dd4de0ce] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.369 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.369 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.369 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.370 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.370 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.370 DEBUG 12856 --- [reactor-http-nio-16] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.370 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [1a5efbe2] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.370 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : [dd4de0ce] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.370 DEBUG 12856 --- [reactor-http-nio-16] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.370 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x1a5efbe2, L:/10.5.0.2:8080 - R:/10.5.0.2:57308] Last HTTP response frame
2019-07-08 09:27:14.370 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.370 DEBUG 12856 --- [reactor-http-nio-16] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.370 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x1a5efbe2, L:/10.5.0.2:8080 - R:/10.5.0.2:57308] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.370 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.370 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x1a5efbe2, L:/10.5.0.2:8080 - R:/10.5.0.2:57308] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.370 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.370 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x1a5efbe2, L:/10.5.0.2:8080 - R:/10.5.0.2:57308] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.370 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.370 DEBUG 12856 --- [reactor-http-nio-1] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.370 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.370 DEBUG 12856 --- [reactor-http-nio-1] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.370 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [65f933cd] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.370 DEBUG 12856 --- [reactor-http-nio-1] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.370 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x65f933cd, L:/10.5.0.2:8080 - R:/10.5.0.2:57309] Last HTTP response frame
2019-07-08 09:27:14.370 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x65f933cd, L:/10.5.0.2:8080 - R:/10.5.0.2:57309] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.370 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x3da16e31, L:/10.5.0.2:8080 - R:/10.5.0.2:57317] New http connection, requesting read
2019-07-08 09:27:14.370 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x420c5917, L:/10.5.0.2:8080 - R:/10.5.0.2:57318] New http connection, requesting read
2019-07-08 09:27:14.370 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.370 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x65f933cd, L:/10.5.0.2:8080 - R:/10.5.0.2:57309] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.370 DEBUG 12856 --- [reactor-http-nio-2] reactor.netty.channel.BootstrapHandlers  : [id: 0x3da16e31, L:/10.5.0.2:8080 - R:/10.5.0.2:57317] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.370 DEBUG 12856 --- [reactor-http-nio-3] reactor.netty.channel.BootstrapHandlers  : [id: 0x420c5917, L:/10.5.0.2:8080 - R:/10.5.0.2:57318] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.370 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.371 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x65f933cd, L:/10.5.0.2:8080 - R:/10.5.0.2:57309] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.371 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x3da16e31, L:/10.5.0.2:8080 - R:/10.5.0.2:57317] Increasing pending responses, now 1
2019-07-08 09:27:14.371 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x420c5917, L:/10.5.0.2:8080 - R:/10.5.0.2:57318] Increasing pending responses, now 1
2019-07-08 09:27:14.371 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.371 DEBUG 12856 --- [reactor-http-nio-2] reactor.netty.http.server.HttpServer     : [id: 0x3da16e31, L:/10.5.0.2:8080 - R:/10.5.0.2:57317] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.371 DEBUG 12856 --- [reactor-http-nio-3] reactor.netty.http.server.HttpServer     : [id: 0x420c5917, L:/10.5.0.2:8080 - R:/10.5.0.2:57318] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.371 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.371 DEBUG 12856 --- [reactor-http-nio-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [3da16e31] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.371 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0xf42cd297, L:/10.5.0.2:8080 - R:/10.5.0.2:57319] New http connection, requesting read
2019-07-08 09:27:14.371 DEBUG 12856 --- [reactor-http-nio-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [420c5917] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.371 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [34e6e4e1] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.371 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.371 DEBUG 12856 --- [reactor-http-nio-4] reactor.netty.channel.BootstrapHandlers  : [id: 0xf42cd297, L:/10.5.0.2:8080 - R:/10.5.0.2:57319] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.371 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.371 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x34e6e4e1, L:/10.5.0.2:8080 - R:/10.5.0.2:57310] Last HTTP response frame
2019-07-08 09:27:14.371 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.371 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.371 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0xf42cd297, L:/10.5.0.2:8080 - R:/10.5.0.2:57319] Increasing pending responses, now 1
2019-07-08 09:27:14.371 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x34e6e4e1, L:/10.5.0.2:8080 - R:/10.5.0.2:57310] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.371 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : [3da16e31] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.371 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 4 commands
2019-07-08 09:27:14.371 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.371 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : [420c5917] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.371 DEBUG 12856 --- [reactor-http-nio-4] reactor.netty.http.server.HttpServer     : [id: 0xf42cd297, L:/10.5.0.2:8080 - R:/10.5.0.2:57319] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.371 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x34e6e4e1, L:/10.5.0.2:8080 - R:/10.5.0.2:57310] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.371 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.371 DEBUG 12856 --- [reactor-http-nio-2] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.371 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.371 DEBUG 12856 --- [reactor-http-nio-4] o.s.w.s.adapter.HttpWebHandlerAdapter    : [f42cd297] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.371 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x34e6e4e1, L:/10.5.0.2:8080 - R:/10.5.0.2:57310] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.371 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.372 DEBUG 12856 --- [reactor-http-nio-2] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.372 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.372 DEBUG 12856 --- [reactor-http-nio-2] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.372 DEBUG 12856 --- [reactor-http-nio-3] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.372 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.372 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.372 DEBUG 12856 --- [reactor-http-nio-3] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.372 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x72b496f3, L:/10.5.0.2:8080 - R:/10.5.0.2:57320] New http connection, requesting read
2019-07-08 09:27:14.372 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [83fc0afb] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.372 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : [f42cd297] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.372 DEBUG 12856 --- [reactor-http-nio-3] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.372 DEBUG 12856 --- [reactor-http-nio-5] reactor.netty.channel.BootstrapHandlers  : [id: 0x72b496f3, L:/10.5.0.2:8080 - R:/10.5.0.2:57320] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.372 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x83fc0afb, L:/10.5.0.2:8080 - R:/10.5.0.2:57311] Last HTTP response frame
2019-07-08 09:27:14.372 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.372 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x83fc0afb, L:/10.5.0.2:8080 - R:/10.5.0.2:57311] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.372 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x72b496f3, L:/10.5.0.2:8080 - R:/10.5.0.2:57320] Increasing pending responses, now 1
2019-07-08 09:27:14.372 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 3 commands
2019-07-08 09:27:14.372 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x83fc0afb, L:/10.5.0.2:8080 - R:/10.5.0.2:57311] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.372 DEBUG 12856 --- [reactor-http-nio-5] reactor.netty.http.server.HttpServer     : [id: 0x72b496f3, L:/10.5.0.2:8080 - R:/10.5.0.2:57320] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.372 DEBUG 12856 --- [reactor-http-nio-4] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.372 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.372 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x83fc0afb, L:/10.5.0.2:8080 - R:/10.5.0.2:57311] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.372 DEBUG 12856 --- [reactor-http-nio-5] o.s.w.s.adapter.HttpWebHandlerAdapter    : [72b496f3] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.372 DEBUG 12856 --- [reactor-http-nio-4] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.372 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.372 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.372 DEBUG 12856 --- [reactor-http-nio-4] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.373 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.373 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.373 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0xb55e0f58, L:/10.5.0.2:8080 - R:/10.5.0.2:57321] New http connection, requesting read
2019-07-08 09:27:14.373 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [a43aff19] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.373 DEBUG 12856 --- [reactor-http-nio-6] reactor.netty.channel.BootstrapHandlers  : [id: 0xb55e0f58, L:/10.5.0.2:8080 - R:/10.5.0.2:57321] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.373 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : [72b496f3] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.373 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0xb55e0f58, L:/10.5.0.2:8080 - R:/10.5.0.2:57321] Increasing pending responses, now 1
2019-07-08 09:27:14.373 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xa43aff19, L:/10.5.0.2:8080 - R:/10.5.0.2:57312] Last HTTP response frame
2019-07-08 09:27:14.373 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.373 DEBUG 12856 --- [reactor-http-nio-6] reactor.netty.http.server.HttpServer     : [id: 0xb55e0f58, L:/10.5.0.2:8080 - R:/10.5.0.2:57321] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.373 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xa43aff19, L:/10.5.0.2:8080 - R:/10.5.0.2:57312] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.373 DEBUG 12856 --- [reactor-http-nio-6] o.s.w.s.adapter.HttpWebHandlerAdapter    : [b55e0f58] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.373 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.373 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0xa43aff19, L:/10.5.0.2:8080 - R:/10.5.0.2:57312] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.373 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.373 DEBUG 12856 --- [reactor-http-nio-5] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.373 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0xa43aff19, L:/10.5.0.2:8080 - R:/10.5.0.2:57312] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.373 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.373 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.373 DEBUG 12856 --- [reactor-http-nio-5] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.373 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.373 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0xb5f8a886, L:/10.5.0.2:8080 - R:/10.5.0.2:57322] New http connection, requesting read
2019-07-08 09:27:14.373 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : [b55e0f58] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.374 DEBUG 12856 --- [reactor-http-nio-7] reactor.netty.channel.BootstrapHandlers  : [id: 0xb5f8a886, L:/10.5.0.2:8080 - R:/10.5.0.2:57322] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.373 DEBUG 12856 --- [reactor-http-nio-5] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.373 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.374 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.374 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0xb5f8a886, L:/10.5.0.2:8080 - R:/10.5.0.2:57322] Increasing pending responses, now 1
2019-07-08 09:27:14.374 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.374 DEBUG 12856 --- [reactor-http-nio-7] reactor.netty.http.server.HttpServer     : [id: 0xb5f8a886, L:/10.5.0.2:8080 - R:/10.5.0.2:57322] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.374 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.374 DEBUG 12856 --- [reactor-http-nio-7] o.s.w.s.adapter.HttpWebHandlerAdapter    : [b5f8a886] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.374 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.374 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.374 DEBUG 12856 --- [reactor-http-nio-6] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.374 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.374 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.374 DEBUG 12856 --- [reactor-http-nio-6] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.374 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : [b5f8a886] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.374 DEBUG 12856 --- [reactor-http-nio-6] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.374 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.374 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.374 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.375 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.375 DEBUG 12856 --- [reactor-http-nio-7] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.375 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.375 DEBUG 12856 --- [reactor-http-nio-7] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.375 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.375 DEBUG 12856 --- [reactor-http-nio-7] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.375 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.375 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.375 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.375 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 48 bytes, 10 commands in the stack
2019-07-08 09:27:14.375 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 10 commands
2019-07-08 09:27:14.375 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.375 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.375 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.375 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [66d8b372] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.375 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x66d8b372, L:/10.5.0.2:8080 - R:/10.5.0.2:57313] Last HTTP response frame
2019-07-08 09:27:14.375 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x66d8b372, L:/10.5.0.2:8080 - R:/10.5.0.2:57313] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.375 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 9 commands
2019-07-08 09:27:14.375 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x66d8b372, L:/10.5.0.2:8080 - R:/10.5.0.2:57313] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.375 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.376 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x66d8b372, L:/10.5.0.2:8080 - R:/10.5.0.2:57313] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.376 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.376 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.376 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [faaffc6f] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.376 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xfaaffc6f, L:/10.5.0.2:8080 - R:/10.5.0.2:57314] Last HTTP response frame
2019-07-08 09:27:14.376 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xfaaffc6f, L:/10.5.0.2:8080 - R:/10.5.0.2:57314] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.376 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.376 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x85f100da, L:/10.5.0.2:8080 - R:/10.5.0.2:57323] New http connection, requesting read
2019-07-08 09:27:14.376 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0xfaaffc6f, L:/10.5.0.2:8080 - R:/10.5.0.2:57314] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.376 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.376 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0xfaaffc6f, L:/10.5.0.2:8080 - R:/10.5.0.2:57314] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.376 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.376 DEBUG 12856 --- [reactor-http-nio-8] reactor.netty.channel.BootstrapHandlers  : [id: 0x85f100da, L:/10.5.0.2:8080 - R:/10.5.0.2:57323] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.376 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.376 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x85f100da, L:/10.5.0.2:8080 - R:/10.5.0.2:57323] Increasing pending responses, now 1
2019-07-08 09:27:14.376 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [ec888cf0] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.376 DEBUG 12856 --- [reactor-http-nio-8] reactor.netty.http.server.HttpServer     : [id: 0x85f100da, L:/10.5.0.2:8080 - R:/10.5.0.2:57323] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.376 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0xb1a55efb, L:/10.5.0.2:8080 - R:/10.5.0.2:57324] New http connection, requesting read
2019-07-08 09:27:14.376 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xec888cf0, L:/10.5.0.2:8080 - R:/10.5.0.2:57315] Last HTTP response frame
2019-07-08 09:27:14.376 DEBUG 12856 --- [reactor-http-nio-8] o.s.w.s.adapter.HttpWebHandlerAdapter    : [85f100da] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.376 DEBUG 12856 --- [reactor-http-nio-9] reactor.netty.channel.BootstrapHandlers  : [id: 0xb1a55efb, L:/10.5.0.2:8080 - R:/10.5.0.2:57324] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.376 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xec888cf0, L:/10.5.0.2:8080 - R:/10.5.0.2:57315] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.376 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.376 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.376 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0xb1a55efb, L:/10.5.0.2:8080 - R:/10.5.0.2:57324] Increasing pending responses, now 1
2019-07-08 09:27:14.376 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0xec888cf0, L:/10.5.0.2:8080 - R:/10.5.0.2:57315] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.376 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.376 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.376 DEBUG 12856 --- [reactor-http-nio-9] reactor.netty.http.server.HttpServer     : [id: 0xb1a55efb, L:/10.5.0.2:8080 - R:/10.5.0.2:57324] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.377 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.376 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0xec888cf0, L:/10.5.0.2:8080 - R:/10.5.0.2:57315] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.376 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : [85f100da] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.377 DEBUG 12856 --- [reactor-http-nio-9] o.s.w.s.adapter.HttpWebHandlerAdapter    : [b1a55efb] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.377 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.377 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.377 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.377 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [dd4de0ce] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.377 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.377 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x1e585a07, L:/10.5.0.2:8080 - R:/10.5.0.2:57325] New http connection, requesting read
2019-07-08 09:27:14.377 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xdd4de0ce, L:/10.5.0.2:8080 - R:/10.5.0.2:57316] Last HTTP response frame
2019-07-08 09:27:14.377 DEBUG 12856 --- [reactor-http-nio-10] reactor.netty.channel.BootstrapHandlers  : [id: 0x1e585a07, L:/10.5.0.2:8080 - R:/10.5.0.2:57325] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.377 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : [b1a55efb] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.377 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xdd4de0ce, L:/10.5.0.2:8080 - R:/10.5.0.2:57316] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.377 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.377 DEBUG 12856 --- [reactor-http-nio-8] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.377 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x1e585a07, L:/10.5.0.2:8080 - R:/10.5.0.2:57325] Increasing pending responses, now 1
2019-07-08 09:27:14.377 DEBUG 12856 --- [reactor-http-nio-8] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.377 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0xdd4de0ce, L:/10.5.0.2:8080 - R:/10.5.0.2:57316] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.377 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 72 bytes, 6 commands in the stack
2019-07-08 09:27:14.377 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0xdd4de0ce, L:/10.5.0.2:8080 - R:/10.5.0.2:57316] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.377 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.377 DEBUG 12856 --- [reactor-http-nio-10] reactor.netty.http.server.HttpServer     : [id: 0x1e585a07, L:/10.5.0.2:8080 - R:/10.5.0.2:57325] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.377 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.377 DEBUG 12856 --- [reactor-http-nio-9] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.377 DEBUG 12856 --- [reactor-http-nio-8] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.377 DEBUG 12856 --- [reactor-http-nio-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [1e585a07] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.377 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.378 DEBUG 12856 --- [reactor-http-nio-9] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.378 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.378 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x9c345f38, L:/10.5.0.2:8080 - R:/10.5.0.2:57326] New http connection, requesting read
2019-07-08 09:27:14.378 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.378 DEBUG 12856 --- [reactor-http-nio-11] reactor.netty.channel.BootstrapHandlers  : [id: 0x9c345f38, L:/10.5.0.2:8080 - R:/10.5.0.2:57326] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.378 DEBUG 12856 --- [reactor-http-nio-9] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.378 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [3da16e31] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.378 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.378 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x9c345f38, L:/10.5.0.2:8080 - R:/10.5.0.2:57326] Increasing pending responses, now 1
2019-07-08 09:27:14.378 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x3da16e31, L:/10.5.0.2:8080 - R:/10.5.0.2:57317] Last HTTP response frame
2019-07-08 09:27:14.378 DEBUG 12856 --- [reactor-http-nio-11] reactor.netty.http.server.HttpServer     : [id: 0x9c345f38, L:/10.5.0.2:8080 - R:/10.5.0.2:57326] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.378 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x3da16e31, L:/10.5.0.2:8080 - R:/10.5.0.2:57317] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.378 DEBUG 12856 --- [reactor-http-nio-11] o.s.w.s.adapter.HttpWebHandlerAdapter    : [9c345f38] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.378 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.378 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : [1e585a07] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.378 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x3da16e31, L:/10.5.0.2:8080 - R:/10.5.0.2:57317] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.378 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.378 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.378 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.378 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x3da16e31, L:/10.5.0.2:8080 - R:/10.5.0.2:57317] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.378 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.378 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.378 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : [9c345f38] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.378 DEBUG 12856 --- [reactor-http-nio-10] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.378 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.378 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.378 DEBUG 12856 --- [reactor-http-nio-10] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.378 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0xabc220a4, L:/10.5.0.2:8080 - R:/10.5.0.2:57327] New http connection, requesting read
2019-07-08 09:27:14.379 DEBUG 12856 --- [reactor-http-nio-10] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.379 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [420c5917] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.379 DEBUG 12856 --- [reactor-http-nio-11] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.379 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x420c5917, L:/10.5.0.2:8080 - R:/10.5.0.2:57318] Last HTTP response frame
2019-07-08 09:27:14.379 DEBUG 12856 --- [reactor-http-nio-11] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.379 DEBUG 12856 --- [reactor-http-nio-12] reactor.netty.channel.BootstrapHandlers  : [id: 0xabc220a4, L:/10.5.0.2:8080 - R:/10.5.0.2:57327] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.379 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x420c5917, L:/10.5.0.2:8080 - R:/10.5.0.2:57318] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.379 DEBUG 12856 --- [reactor-http-nio-11] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.379 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 4 commands
2019-07-08 09:27:14.379 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0xabc220a4, L:/10.5.0.2:8080 - R:/10.5.0.2:57327] Increasing pending responses, now 1
2019-07-08 09:27:14.379 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x420c5917, L:/10.5.0.2:8080 - R:/10.5.0.2:57318] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.379 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.379 DEBUG 12856 --- [reactor-http-nio-12] reactor.netty.http.server.HttpServer     : [id: 0xabc220a4, L:/10.5.0.2:8080 - R:/10.5.0.2:57327] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.379 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x420c5917, L:/10.5.0.2:8080 - R:/10.5.0.2:57318] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.379 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.379 DEBUG 12856 --- [reactor-http-nio-12] o.s.w.s.adapter.HttpWebHandlerAdapter    : [abc220a4] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.379 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.379 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.379 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [f42cd297] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.379 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.379 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xf42cd297, L:/10.5.0.2:8080 - R:/10.5.0.2:57319] Last HTTP response frame
2019-07-08 09:27:14.379 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x5dc1f9a5, L:/10.5.0.2:8080 - R:/10.5.0.2:57328] New http connection, requesting read
2019-07-08 09:27:14.379 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : [abc220a4] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.379 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xf42cd297, L:/10.5.0.2:8080 - R:/10.5.0.2:57319] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.379 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.379 DEBUG 12856 --- [reactor-http-nio-13] reactor.netty.channel.BootstrapHandlers  : [id: 0x5dc1f9a5, L:/10.5.0.2:8080 - R:/10.5.0.2:57328] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.379 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 3 commands
2019-07-08 09:27:14.379 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0xf42cd297, L:/10.5.0.2:8080 - R:/10.5.0.2:57319] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.380 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.380 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x5dc1f9a5, L:/10.5.0.2:8080 - R:/10.5.0.2:57328] Increasing pending responses, now 1
2019-07-08 09:27:14.380 DEBUG 12856 --- [reactor-http-nio-12] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.380 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0xf42cd297, L:/10.5.0.2:8080 - R:/10.5.0.2:57319] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.380 DEBUG 12856 --- [reactor-http-nio-12] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.380 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.380 DEBUG 12856 --- [reactor-http-nio-13] reactor.netty.http.server.HttpServer     : [id: 0x5dc1f9a5, L:/10.5.0.2:8080 - R:/10.5.0.2:57328] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.380 DEBUG 12856 --- [reactor-http-nio-12] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.380 DEBUG 12856 --- [reactor-http-nio-13] o.s.w.s.adapter.HttpWebHandlerAdapter    : [5dc1f9a5] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.380 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0xda8cc289, L:/10.5.0.2:8080 - R:/10.5.0.2:57329] New http connection, requesting read
2019-07-08 09:27:14.380 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.380 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.380 DEBUG 12856 --- [reactor-http-nio-14] reactor.netty.channel.BootstrapHandlers  : [id: 0xda8cc289, L:/10.5.0.2:8080 - R:/10.5.0.2:57329] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.380 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [72b496f3] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.380 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.380 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0xda8cc289, L:/10.5.0.2:8080 - R:/10.5.0.2:57329] Increasing pending responses, now 1
2019-07-08 09:27:14.380 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x72b496f3, L:/10.5.0.2:8080 - R:/10.5.0.2:57320] Last HTTP response frame
2019-07-08 09:27:14.380 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : [5dc1f9a5] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.380 DEBUG 12856 --- [reactor-http-nio-14] reactor.netty.http.server.HttpServer     : [id: 0xda8cc289, L:/10.5.0.2:8080 - R:/10.5.0.2:57329] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.380 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.380 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x72b496f3, L:/10.5.0.2:8080 - R:/10.5.0.2:57320] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.380 DEBUG 12856 --- [reactor-http-nio-14] o.s.w.s.adapter.HttpWebHandlerAdapter    : [da8cc289] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.380 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 2 commands
2019-07-08 09:27:14.380 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x72b496f3, L:/10.5.0.2:8080 - R:/10.5.0.2:57320] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.380 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.380 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.380 DEBUG 12856 --- [reactor-http-nio-13] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.380 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x72b496f3, L:/10.5.0.2:8080 - R:/10.5.0.2:57320] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.380 DEBUG 12856 --- [reactor-http-nio-13] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.380 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.380 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.380 DEBUG 12856 --- [reactor-http-nio-13] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.380 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.381 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x0e46ce03, L:/10.5.0.2:8080 - R:/10.5.0.2:57330] New http connection, requesting read
2019-07-08 09:27:14.381 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : [da8cc289] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.381 DEBUG 12856 --- [reactor-http-nio-15] reactor.netty.channel.BootstrapHandlers  : [id: 0x0e46ce03, L:/10.5.0.2:8080 - R:/10.5.0.2:57330] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.381 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [b55e0f58] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.381 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.381 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xb55e0f58, L:/10.5.0.2:8080 - R:/10.5.0.2:57321] Last HTTP response frame
2019-07-08 09:27:14.381 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x0e46ce03, L:/10.5.0.2:8080 - R:/10.5.0.2:57330] Increasing pending responses, now 1
2019-07-08 09:27:14.381 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xb55e0f58, L:/10.5.0.2:8080 - R:/10.5.0.2:57321] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.381 DEBUG 12856 --- [reactor-http-nio-15] reactor.netty.http.server.HttpServer     : [id: 0x0e46ce03, L:/10.5.0.2:8080 - R:/10.5.0.2:57330] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.381 DEBUG 12856 --- [reactor-http-nio-14] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.381 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 1 commands
2019-07-08 09:27:14.381 DEBUG 12856 --- [reactor-http-nio-14] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.381 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0xb55e0f58, L:/10.5.0.2:8080 - R:/10.5.0.2:57321] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.381 DEBUG 12856 --- [reactor-http-nio-15] o.s.w.s.adapter.HttpWebHandlerAdapter    : [0e46ce03] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.381 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.381 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0xb55e0f58, L:/10.5.0.2:8080 - R:/10.5.0.2:57321] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.381 DEBUG 12856 --- [reactor-http-nio-14] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.381 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.381 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.381 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.381 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.381 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : [0e46ce03] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.381 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [b5f8a886] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.381 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0xae63a62c, L:/10.5.0.2:8080 - R:/10.5.0.2:57331] New http connection, requesting read
2019-07-08 09:27:14.381 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xb5f8a886, L:/10.5.0.2:8080 - R:/10.5.0.2:57322] Last HTTP response frame
2019-07-08 09:27:14.381 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.381 DEBUG 12856 --- [reactor-http-nio-16] reactor.netty.channel.BootstrapHandlers  : [id: 0xae63a62c, L:/10.5.0.2:8080 - R:/10.5.0.2:57331] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.381 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xb5f8a886, L:/10.5.0.2:8080 - R:/10.5.0.2:57322] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.382 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0xae63a62c, L:/10.5.0.2:8080 - R:/10.5.0.2:57331] Increasing pending responses, now 1
2019-07-08 09:27:14.382 DEBUG 12856 --- [reactor-http-nio-15] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.382 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.382 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0xb5f8a886, L:/10.5.0.2:8080 - R:/10.5.0.2:57322] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.382 DEBUG 12856 --- [reactor-http-nio-16] reactor.netty.http.server.HttpServer     : [id: 0xae63a62c, L:/10.5.0.2:8080 - R:/10.5.0.2:57331] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.382 DEBUG 12856 --- [reactor-http-nio-15] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.382 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.382 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0xb5f8a886, L:/10.5.0.2:8080 - R:/10.5.0.2:57322] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.382 DEBUG 12856 --- [reactor-http-nio-16] o.s.w.s.adapter.HttpWebHandlerAdapter    : [ae63a62c] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.382 DEBUG 12856 --- [reactor-http-nio-15] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.382 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.382 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.382 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.382 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.382 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0xfa14009f, L:/10.5.0.2:8080 - R:/10.5.0.2:57332] New http connection, requesting read
2019-07-08 09:27:14.382 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.382 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : [ae63a62c] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.382 DEBUG 12856 --- [reactor-http-nio-1] reactor.netty.channel.BootstrapHandlers  : [id: 0xfa14009f, L:/10.5.0.2:8080 - R:/10.5.0.2:57332] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.382 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.382 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.382 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0xfa14009f, L:/10.5.0.2:8080 - R:/10.5.0.2:57332] Increasing pending responses, now 1
2019-07-08 09:27:14.382 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.382 DEBUG 12856 --- [reactor-http-nio-1] reactor.netty.http.server.HttpServer     : [id: 0xfa14009f, L:/10.5.0.2:8080 - R:/10.5.0.2:57332] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.382 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.382 DEBUG 12856 --- [reactor-http-nio-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [fa14009f] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.382 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.382 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.382 DEBUG 12856 --- [reactor-http-nio-16] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.383 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.383 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.383 DEBUG 12856 --- [reactor-http-nio-16] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.383 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.383 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : [fa14009f] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.383 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.383 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.383 DEBUG 12856 --- [reactor-http-nio-16] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.383 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.383 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.383 DEBUG 12856 --- [reactor-http-nio-1] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.383 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.383 DEBUG 12856 --- [reactor-http-nio-1] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.383 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.383 DEBUG 12856 --- [reactor-http-nio-1] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.383 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.383 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.383 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.383 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.383 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 12 bytes, 10 commands in the stack
2019-07-08 09:27:14.383 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 10 commands
2019-07-08 09:27:14.384 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.384 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.384 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.384 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [85f100da] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.384 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x85f100da, L:/10.5.0.2:8080 - R:/10.5.0.2:57323] Last HTTP response frame
2019-07-08 09:27:14.384 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x85f100da, L:/10.5.0.2:8080 - R:/10.5.0.2:57323] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.384 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 12 bytes, 9 commands in the stack
2019-07-08 09:27:14.384 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x85f100da, L:/10.5.0.2:8080 - R:/10.5.0.2:57323] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.384 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 9 commands
2019-07-08 09:27:14.384 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.384 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x85f100da, L:/10.5.0.2:8080 - R:/10.5.0.2:57323] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.384 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.384 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.384 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [b1a55efb] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.384 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xb1a55efb, L:/10.5.0.2:8080 - R:/10.5.0.2:57324] Last HTTP response frame
2019-07-08 09:27:14.384 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xb1a55efb, L:/10.5.0.2:8080 - R:/10.5.0.2:57324] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.384 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0xb1a55efb, L:/10.5.0.2:8080 - R:/10.5.0.2:57324] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.384 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 36 bytes, 8 commands in the stack
2019-07-08 09:27:14.384 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0xf1443f44, L:/10.5.0.2:8080 - R:/10.5.0.2:57333] New http connection, requesting read
2019-07-08 09:27:14.384 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0xb1a55efb, L:/10.5.0.2:8080 - R:/10.5.0.2:57324] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.384 DEBUG 12856 --- [reactor-http-nio-2] reactor.netty.channel.BootstrapHandlers  : [id: 0xf1443f44, L:/10.5.0.2:8080 - R:/10.5.0.2:57333] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.384 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.384 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.384 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0xf1443f44, L:/10.5.0.2:8080 - R:/10.5.0.2:57333] Increasing pending responses, now 1
2019-07-08 09:27:14.384 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.384 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0xb6f11fa6, L:/10.5.0.2:8080 - R:/10.5.0.2:57334] New http connection, requesting read
2019-07-08 09:27:14.384 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.384 DEBUG 12856 --- [reactor-http-nio-2] reactor.netty.http.server.HttpServer     : [id: 0xf1443f44, L:/10.5.0.2:8080 - R:/10.5.0.2:57333] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.384 DEBUG 12856 --- [reactor-http-nio-3] reactor.netty.channel.BootstrapHandlers  : [id: 0xb6f11fa6, L:/10.5.0.2:8080 - R:/10.5.0.2:57334] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.384 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [1e585a07] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.385 DEBUG 12856 --- [reactor-http-nio-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [f1443f44] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.385 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x1e585a07, L:/10.5.0.2:8080 - R:/10.5.0.2:57325] Last HTTP response frame
2019-07-08 09:27:14.385 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.385 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x1e585a07, L:/10.5.0.2:8080 - R:/10.5.0.2:57325] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.385 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.385 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0xb6f11fa6, L:/10.5.0.2:8080 - R:/10.5.0.2:57334] Increasing pending responses, now 1
2019-07-08 09:27:14.385 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.385 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x1e585a07, L:/10.5.0.2:8080 - R:/10.5.0.2:57325] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.385 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.385 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : [f1443f44] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.385 DEBUG 12856 --- [reactor-http-nio-3] reactor.netty.http.server.HttpServer     : [id: 0xb6f11fa6, L:/10.5.0.2:8080 - R:/10.5.0.2:57334] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.385 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x1e585a07, L:/10.5.0.2:8080 - R:/10.5.0.2:57325] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.385 DEBUG 12856 --- [reactor-http-nio-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [b6f11fa6] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.385 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.385 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.385 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.385 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.385 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.385 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x2ee6bd43, L:/10.5.0.2:8080 - R:/10.5.0.2:57335] New http connection, requesting read
2019-07-08 09:27:14.385 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [9c345f38] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.385 DEBUG 12856 --- [reactor-http-nio-2] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.385 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : [b6f11fa6] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.385 DEBUG 12856 --- [reactor-http-nio-4] reactor.netty.channel.BootstrapHandlers  : [id: 0x2ee6bd43, L:/10.5.0.2:8080 - R:/10.5.0.2:57335] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.385 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x9c345f38, L:/10.5.0.2:8080 - R:/10.5.0.2:57326] Last HTTP response frame
2019-07-08 09:27:14.385 DEBUG 12856 --- [reactor-http-nio-2] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.385 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.385 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x2ee6bd43, L:/10.5.0.2:8080 - R:/10.5.0.2:57335] Increasing pending responses, now 1
2019-07-08 09:27:14.385 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x9c345f38, L:/10.5.0.2:8080 - R:/10.5.0.2:57326] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.385 DEBUG 12856 --- [reactor-http-nio-2] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.386 DEBUG 12856 --- [reactor-http-nio-4] reactor.netty.http.server.HttpServer     : [id: 0x2ee6bd43, L:/10.5.0.2:8080 - R:/10.5.0.2:57335] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.386 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.386 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x9c345f38, L:/10.5.0.2:8080 - R:/10.5.0.2:57326] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.386 DEBUG 12856 --- [reactor-http-nio-3] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.386 DEBUG 12856 --- [reactor-http-nio-4] o.s.w.s.adapter.HttpWebHandlerAdapter    : [2ee6bd43] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.386 DEBUG 12856 --- [reactor-http-nio-3] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.386 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.386 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.386 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x9c345f38, L:/10.5.0.2:8080 - R:/10.5.0.2:57326] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.386 DEBUG 12856 --- [reactor-http-nio-3] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.386 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.386 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.386 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : [2ee6bd43] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.386 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.386 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0xd0492596, L:/10.5.0.2:8080 - R:/10.5.0.2:57336] New http connection, requesting read
2019-07-08 09:27:14.386 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.386 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [abc220a4] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.386 DEBUG 12856 --- [reactor-http-nio-5] reactor.netty.channel.BootstrapHandlers  : [id: 0xd0492596, L:/10.5.0.2:8080 - R:/10.5.0.2:57336] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.386 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xabc220a4, L:/10.5.0.2:8080 - R:/10.5.0.2:57327] Last HTTP response frame
2019-07-08 09:27:14.386 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xabc220a4, L:/10.5.0.2:8080 - R:/10.5.0.2:57327] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.386 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0xd0492596, L:/10.5.0.2:8080 - R:/10.5.0.2:57336] Increasing pending responses, now 1
2019-07-08 09:27:14.386 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.386 DEBUG 12856 --- [reactor-http-nio-5] reactor.netty.http.server.HttpServer     : [id: 0xd0492596, L:/10.5.0.2:8080 - R:/10.5.0.2:57336] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.386 DEBUG 12856 --- [reactor-http-nio-4] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.386 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0xabc220a4, L:/10.5.0.2:8080 - R:/10.5.0.2:57327] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.386 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.386 DEBUG 12856 --- [reactor-http-nio-5] o.s.w.s.adapter.HttpWebHandlerAdapter    : [d0492596] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.386 DEBUG 12856 --- [reactor-http-nio-4] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.386 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.386 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0xabc220a4, L:/10.5.0.2:8080 - R:/10.5.0.2:57327] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.386 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.386 DEBUG 12856 --- [reactor-http-nio-4] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.387 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.387 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.387 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : [d0492596] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.387 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x49780dbd, L:/10.5.0.2:8080 - R:/10.5.0.2:57337] New http connection, requesting read
2019-07-08 09:27:14.387 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.387 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.387 DEBUG 12856 --- [reactor-http-nio-6] reactor.netty.channel.BootstrapHandlers  : [id: 0x49780dbd, L:/10.5.0.2:8080 - R:/10.5.0.2:57337] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.387 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.387 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x49780dbd, L:/10.5.0.2:8080 - R:/10.5.0.2:57337] Increasing pending responses, now 1
2019-07-08 09:27:14.387 DEBUG 12856 --- [reactor-http-nio-5] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.387 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 60 bytes, 8 commands in the stack
2019-07-08 09:27:14.387 DEBUG 12856 --- [reactor-http-nio-5] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.387 DEBUG 12856 --- [reactor-http-nio-6] reactor.netty.http.server.HttpServer     : [id: 0x49780dbd, L:/10.5.0.2:8080 - R:/10.5.0.2:57337] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.387 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.387 DEBUG 12856 --- [reactor-http-nio-6] o.s.w.s.adapter.HttpWebHandlerAdapter    : [49780dbd] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.387 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.387 DEBUG 12856 --- [reactor-http-nio-5] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.387 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.387 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.388 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.388 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.388 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [5dc1f9a5] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.388 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : [49780dbd] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.388 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x5dc1f9a5, L:/10.5.0.2:8080 - R:/10.5.0.2:57328] Last HTTP response frame
2019-07-08 09:27:14.388 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.388 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x5dc1f9a5, L:/10.5.0.2:8080 - R:/10.5.0.2:57328] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.388 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.388 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x5dc1f9a5, L:/10.5.0.2:8080 - R:/10.5.0.2:57328] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.388 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.388 DEBUG 12856 --- [reactor-http-nio-6] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.388 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x5dc1f9a5, L:/10.5.0.2:8080 - R:/10.5.0.2:57328] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.388 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.388 DEBUG 12856 --- [reactor-http-nio-6] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.388 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.388 DEBUG 12856 --- [reactor-http-nio-6] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.388 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [da8cc289] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.388 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x87ad596e, L:/10.5.0.2:8080 - R:/10.5.0.2:57338] New http connection, requesting read
2019-07-08 09:27:14.388 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xda8cc289, L:/10.5.0.2:8080 - R:/10.5.0.2:57329] Last HTTP response frame
2019-07-08 09:27:14.388 DEBUG 12856 --- [reactor-http-nio-7] reactor.netty.channel.BootstrapHandlers  : [id: 0x87ad596e, L:/10.5.0.2:8080 - R:/10.5.0.2:57338] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.388 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xda8cc289, L:/10.5.0.2:8080 - R:/10.5.0.2:57329] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.388 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x87ad596e, L:/10.5.0.2:8080 - R:/10.5.0.2:57338] Increasing pending responses, now 1
2019-07-08 09:27:14.388 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.388 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0xda8cc289, L:/10.5.0.2:8080 - R:/10.5.0.2:57329] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.388 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.388 DEBUG 12856 --- [reactor-http-nio-7] reactor.netty.http.server.HttpServer     : [id: 0x87ad596e, L:/10.5.0.2:8080 - R:/10.5.0.2:57338] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.388 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0xda8cc289, L:/10.5.0.2:8080 - R:/10.5.0.2:57329] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.388 DEBUG 12856 --- [reactor-http-nio-7] o.s.w.s.adapter.HttpWebHandlerAdapter    : [87ad596e] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.388 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.389 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.389 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.389 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.389 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x74cc9ba0, L:/10.5.0.2:8080 - R:/10.5.0.2:57339] New http connection, requesting read
2019-07-08 09:27:14.389 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [0e46ce03] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.389 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : [87ad596e] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.389 DEBUG 12856 --- [reactor-http-nio-8] reactor.netty.channel.BootstrapHandlers  : [id: 0x74cc9ba0, L:/10.5.0.2:8080 - R:/10.5.0.2:57339] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.389 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x0e46ce03, L:/10.5.0.2:8080 - R:/10.5.0.2:57330] Last HTTP response frame
2019-07-08 09:27:14.389 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.389 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x74cc9ba0, L:/10.5.0.2:8080 - R:/10.5.0.2:57339] Increasing pending responses, now 1
2019-07-08 09:27:14.389 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x0e46ce03, L:/10.5.0.2:8080 - R:/10.5.0.2:57330] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.389 DEBUG 12856 --- [reactor-http-nio-8] reactor.netty.http.server.HttpServer     : [id: 0x74cc9ba0, L:/10.5.0.2:8080 - R:/10.5.0.2:57339] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.389 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.389 DEBUG 12856 --- [reactor-http-nio-8] o.s.w.s.adapter.HttpWebHandlerAdapter    : [74cc9ba0] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.389 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.389 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x0e46ce03, L:/10.5.0.2:8080 - R:/10.5.0.2:57330] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.389 DEBUG 12856 --- [reactor-http-nio-7] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.389 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.389 DEBUG 12856 --- [reactor-http-nio-7] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.389 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.389 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x0e46ce03, L:/10.5.0.2:8080 - R:/10.5.0.2:57330] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.389 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.389 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.389 DEBUG 12856 --- [reactor-http-nio-7] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.389 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [ae63a62c] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.389 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : [74cc9ba0] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.389 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0xddb96006, L:/10.5.0.2:8080 - R:/10.5.0.2:57340] New http connection, requesting read
2019-07-08 09:27:14.389 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.389 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xae63a62c, L:/10.5.0.2:8080 - R:/10.5.0.2:57331] Last HTTP response frame
2019-07-08 09:27:14.389 DEBUG 12856 --- [reactor-http-nio-9] reactor.netty.channel.BootstrapHandlers  : [id: 0xddb96006, L:/10.5.0.2:8080 - R:/10.5.0.2:57340] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.390 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xae63a62c, L:/10.5.0.2:8080 - R:/10.5.0.2:57331] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.390 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0xddb96006, L:/10.5.0.2:8080 - R:/10.5.0.2:57340] Increasing pending responses, now 1
2019-07-08 09:27:14.390 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0xae63a62c, L:/10.5.0.2:8080 - R:/10.5.0.2:57331] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.390 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 4 commands
2019-07-08 09:27:14.390 DEBUG 12856 --- [reactor-http-nio-8] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.390 DEBUG 12856 --- [reactor-http-nio-9] reactor.netty.http.server.HttpServer     : [id: 0xddb96006, L:/10.5.0.2:8080 - R:/10.5.0.2:57340] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.390 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0xae63a62c, L:/10.5.0.2:8080 - R:/10.5.0.2:57331] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.390 DEBUG 12856 --- [reactor-http-nio-9] o.s.w.s.adapter.HttpWebHandlerAdapter    : [ddb96006] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.390 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.390 DEBUG 12856 --- [reactor-http-nio-8] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.390 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.390 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.390 DEBUG 12856 --- [reactor-http-nio-8] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.390 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.390 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x28c1a2dc, L:/10.5.0.2:8080 - R:/10.5.0.2:57341] New http connection, requesting read
2019-07-08 09:27:14.390 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.390 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : [ddb96006] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.390 DEBUG 12856 --- [reactor-http-nio-10] reactor.netty.channel.BootstrapHandlers  : [id: 0x28c1a2dc, L:/10.5.0.2:8080 - R:/10.5.0.2:57341] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.390 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [fa14009f] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.390 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.390 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x28c1a2dc, L:/10.5.0.2:8080 - R:/10.5.0.2:57341] Increasing pending responses, now 1
2019-07-08 09:27:14.390 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xfa14009f, L:/10.5.0.2:8080 - R:/10.5.0.2:57332] Last HTTP response frame
2019-07-08 09:27:14.390 DEBUG 12856 --- [reactor-http-nio-10] reactor.netty.http.server.HttpServer     : [id: 0x28c1a2dc, L:/10.5.0.2:8080 - R:/10.5.0.2:57341] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.390 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xfa14009f, L:/10.5.0.2:8080 - R:/10.5.0.2:57332] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.390 DEBUG 12856 --- [reactor-http-nio-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [28c1a2dc] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.390 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.390 DEBUG 12856 --- [reactor-http-nio-9] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.390 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0xfa14009f, L:/10.5.0.2:8080 - R:/10.5.0.2:57332] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.390 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.390 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.390 DEBUG 12856 --- [reactor-http-nio-9] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.390 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0xfa14009f, L:/10.5.0.2:8080 - R:/10.5.0.2:57332] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.390 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.391 DEBUG 12856 --- [reactor-http-nio-9] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.391 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.391 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : [28c1a2dc] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.391 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x8c0a6264, L:/10.5.0.2:8080 - R:/10.5.0.2:57342] New http connection, requesting read
2019-07-08 09:27:14.391 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.391 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.391 DEBUG 12856 --- [reactor-http-nio-11] reactor.netty.channel.BootstrapHandlers  : [id: 0x8c0a6264, L:/10.5.0.2:8080 - R:/10.5.0.2:57342] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.391 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.391 DEBUG 12856 --- [reactor-http-nio-10] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.391 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.391 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x8c0a6264, L:/10.5.0.2:8080 - R:/10.5.0.2:57342] Increasing pending responses, now 1
2019-07-08 09:27:14.391 DEBUG 12856 --- [reactor-http-nio-10] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.391 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.391 DEBUG 12856 --- [reactor-http-nio-11] reactor.netty.http.server.HttpServer     : [id: 0x8c0a6264, L:/10.5.0.2:8080 - R:/10.5.0.2:57342] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.391 DEBUG 12856 --- [reactor-http-nio-10] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.391 DEBUG 12856 --- [reactor-http-nio-11] o.s.w.s.adapter.HttpWebHandlerAdapter    : [8c0a6264] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.391 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.391 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.391 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.391 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.391 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.392 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : [8c0a6264] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.392 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.392 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.392 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.392 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 36 bytes, 9 commands in the stack
2019-07-08 09:27:14.392 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 9 commands
2019-07-08 09:27:14.392 DEBUG 12856 --- [reactor-http-nio-11] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.392 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.392 DEBUG 12856 --- [reactor-http-nio-11] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.392 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.392 DEBUG 12856 --- [reactor-http-nio-11] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.392 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.392 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [f1443f44] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.392 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xf1443f44, L:/10.5.0.2:8080 - R:/10.5.0.2:57333] Last HTTP response frame
2019-07-08 09:27:14.392 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xf1443f44, L:/10.5.0.2:8080 - R:/10.5.0.2:57333] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.392 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.392 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0xf1443f44, L:/10.5.0.2:8080 - R:/10.5.0.2:57333] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.392 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.392 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0xf1443f44, L:/10.5.0.2:8080 - R:/10.5.0.2:57333] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.392 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.392 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.392 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [b6f11fa6] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.392 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xb6f11fa6, L:/10.5.0.2:8080 - R:/10.5.0.2:57334] Last HTTP response frame
2019-07-08 09:27:14.392 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xb6f11fa6, L:/10.5.0.2:8080 - R:/10.5.0.2:57334] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.393 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.393 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0xb6f11fa6, L:/10.5.0.2:8080 - R:/10.5.0.2:57334] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.393 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0xb5893b42, L:/10.5.0.2:8080 - R:/10.5.0.2:57343] New http connection, requesting read
2019-07-08 09:27:14.393 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.393 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0xb6f11fa6, L:/10.5.0.2:8080 - R:/10.5.0.2:57334] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.393 DEBUG 12856 --- [reactor-http-nio-12] reactor.netty.channel.BootstrapHandlers  : [id: 0xb5893b42, L:/10.5.0.2:8080 - R:/10.5.0.2:57343] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.393 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.393 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0xb5893b42, L:/10.5.0.2:8080 - R:/10.5.0.2:57343] Increasing pending responses, now 1
2019-07-08 09:27:14.393 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.393 DEBUG 12856 --- [reactor-http-nio-12] reactor.netty.http.server.HttpServer     : [id: 0xb5893b42, L:/10.5.0.2:8080 - R:/10.5.0.2:57343] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.393 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [2ee6bd43] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.393 DEBUG 12856 --- [reactor-http-nio-12] o.s.w.s.adapter.HttpWebHandlerAdapter    : [b5893b42] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.393 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x6466057e, L:/10.5.0.2:8080 - R:/10.5.0.2:57344] New http connection, requesting read
2019-07-08 09:27:14.393 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x2ee6bd43, L:/10.5.0.2:8080 - R:/10.5.0.2:57335] Last HTTP response frame
2019-07-08 09:27:14.393 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.393 DEBUG 12856 --- [reactor-http-nio-13] reactor.netty.channel.BootstrapHandlers  : [id: 0x6466057e, L:/10.5.0.2:8080 - R:/10.5.0.2:57344] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.393 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x2ee6bd43, L:/10.5.0.2:8080 - R:/10.5.0.2:57335] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.393 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.393 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x6466057e, L:/10.5.0.2:8080 - R:/10.5.0.2:57344] Increasing pending responses, now 1
2019-07-08 09:27:14.393 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.393 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x2ee6bd43, L:/10.5.0.2:8080 - R:/10.5.0.2:57335] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.393 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.393 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : [b5893b42] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.393 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 60 bytes, 7 commands in the stack
2019-07-08 09:27:14.393 DEBUG 12856 --- [reactor-http-nio-13] reactor.netty.http.server.HttpServer     : [id: 0x6466057e, L:/10.5.0.2:8080 - R:/10.5.0.2:57344] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.393 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x2ee6bd43, L:/10.5.0.2:8080 - R:/10.5.0.2:57335] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.393 DEBUG 12856 --- [reactor-http-nio-13] o.s.w.s.adapter.HttpWebHandlerAdapter    : [6466057e] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.393 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.393 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.393 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.394 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.394 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x2c87da4a, L:/10.5.0.2:8080 - R:/10.5.0.2:57345] New http connection, requesting read
2019-07-08 09:27:14.394 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.394 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.394 DEBUG 12856 --- [reactor-http-nio-14] reactor.netty.channel.BootstrapHandlers  : [id: 0x2c87da4a, L:/10.5.0.2:8080 - R:/10.5.0.2:57345] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.394 DEBUG 12856 --- [reactor-http-nio-12] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.394 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : [6466057e] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.394 DEBUG 12856 --- [reactor-http-nio-12] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.394 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.394 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x2c87da4a, L:/10.5.0.2:8080 - R:/10.5.0.2:57345] Increasing pending responses, now 1
2019-07-08 09:27:14.394 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [d0492596] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.394 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.394 DEBUG 12856 --- [reactor-http-nio-12] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.394 DEBUG 12856 --- [reactor-http-nio-14] reactor.netty.http.server.HttpServer     : [id: 0x2c87da4a, L:/10.5.0.2:8080 - R:/10.5.0.2:57345] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.394 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xd0492596, L:/10.5.0.2:8080 - R:/10.5.0.2:57336] Last HTTP response frame
2019-07-08 09:27:14.394 DEBUG 12856 --- [reactor-http-nio-14] o.s.w.s.adapter.HttpWebHandlerAdapter    : [2c87da4a] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.394 DEBUG 12856 --- [reactor-http-nio-13] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.394 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.394 DEBUG 12856 --- [reactor-http-nio-13] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.394 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xd0492596, L:/10.5.0.2:8080 - R:/10.5.0.2:57336] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.394 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.394 DEBUG 12856 --- [reactor-http-nio-13] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.394 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.394 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0xd0492596, L:/10.5.0.2:8080 - R:/10.5.0.2:57336] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.395 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.395 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : [2c87da4a] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.395 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0xd0492596, L:/10.5.0.2:8080 - R:/10.5.0.2:57336] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.395 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.395 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.395 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.395 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x09b3cc1c, L:/10.5.0.2:8080 - R:/10.5.0.2:57346] New http connection, requesting read
2019-07-08 09:27:14.395 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [49780dbd] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.395 DEBUG 12856 --- [reactor-http-nio-15] reactor.netty.channel.BootstrapHandlers  : [id: 0x09b3cc1c, L:/10.5.0.2:8080 - R:/10.5.0.2:57346] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.395 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x49780dbd, L:/10.5.0.2:8080 - R:/10.5.0.2:57337] Last HTTP response frame
2019-07-08 09:27:14.395 DEBUG 12856 --- [reactor-http-nio-14] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.395 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x09b3cc1c, L:/10.5.0.2:8080 - R:/10.5.0.2:57346] Increasing pending responses, now 1
2019-07-08 09:27:14.395 DEBUG 12856 --- [reactor-http-nio-14] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.395 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x49780dbd, L:/10.5.0.2:8080 - R:/10.5.0.2:57337] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.395 DEBUG 12856 --- [reactor-http-nio-15] reactor.netty.http.server.HttpServer     : [id: 0x09b3cc1c, L:/10.5.0.2:8080 - R:/10.5.0.2:57346] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.395 DEBUG 12856 --- [reactor-http-nio-14] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.395 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.395 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x49780dbd, L:/10.5.0.2:8080 - R:/10.5.0.2:57337] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.395 DEBUG 12856 --- [reactor-http-nio-15] o.s.w.s.adapter.HttpWebHandlerAdapter    : [09b3cc1c] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.395 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.395 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x49780dbd, L:/10.5.0.2:8080 - R:/10.5.0.2:57337] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.395 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.395 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.395 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.395 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.395 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : [09b3cc1c] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.395 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [87ad596e] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.395 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x82876fcb, L:/10.5.0.2:8080 - R:/10.5.0.2:57347] New http connection, requesting read
2019-07-08 09:27:14.395 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x87ad596e, L:/10.5.0.2:8080 - R:/10.5.0.2:57338] Last HTTP response frame
2019-07-08 09:27:14.396 DEBUG 12856 --- [reactor-http-nio-16] reactor.netty.channel.BootstrapHandlers  : [id: 0x82876fcb, L:/10.5.0.2:8080 - R:/10.5.0.2:57347] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.395 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.396 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x87ad596e, L:/10.5.0.2:8080 - R:/10.5.0.2:57338] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.396 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x82876fcb, L:/10.5.0.2:8080 - R:/10.5.0.2:57347] Increasing pending responses, now 1
2019-07-08 09:27:14.396 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 4 commands
2019-07-08 09:27:14.396 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x87ad596e, L:/10.5.0.2:8080 - R:/10.5.0.2:57338] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.396 DEBUG 12856 --- [reactor-http-nio-16] reactor.netty.http.server.HttpServer     : [id: 0x82876fcb, L:/10.5.0.2:8080 - R:/10.5.0.2:57347] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.396 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.396 DEBUG 12856 --- [reactor-http-nio-15] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.396 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x87ad596e, L:/10.5.0.2:8080 - R:/10.5.0.2:57338] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.396 DEBUG 12856 --- [reactor-http-nio-16] o.s.w.s.adapter.HttpWebHandlerAdapter    : [82876fcb] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.396 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.396 DEBUG 12856 --- [reactor-http-nio-15] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.396 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.396 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.396 DEBUG 12856 --- [reactor-http-nio-15] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.396 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.396 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x9eec8e04, L:/10.5.0.2:8080 - R:/10.5.0.2:57348] New http connection, requesting read
2019-07-08 09:27:14.396 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : [82876fcb] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.396 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [74cc9ba0] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.396 DEBUG 12856 --- [reactor-http-nio-1] reactor.netty.channel.BootstrapHandlers  : [id: 0x9eec8e04, L:/10.5.0.2:8080 - R:/10.5.0.2:57348] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.396 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.396 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x74cc9ba0, L:/10.5.0.2:8080 - R:/10.5.0.2:57339] Last HTTP response frame
2019-07-08 09:27:14.396 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x9eec8e04, L:/10.5.0.2:8080 - R:/10.5.0.2:57348] Increasing pending responses, now 1
2019-07-08 09:27:14.396 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x74cc9ba0, L:/10.5.0.2:8080 - R:/10.5.0.2:57339] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.396 DEBUG 12856 --- [reactor-http-nio-1] reactor.netty.http.server.HttpServer     : [id: 0x9eec8e04, L:/10.5.0.2:8080 - R:/10.5.0.2:57348] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.396 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x74cc9ba0, L:/10.5.0.2:8080 - R:/10.5.0.2:57339] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.396 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 3 commands
2019-07-08 09:27:14.396 DEBUG 12856 --- [reactor-http-nio-16] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.397 DEBUG 12856 --- [reactor-http-nio-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [9eec8e04] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.397 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x74cc9ba0, L:/10.5.0.2:8080 - R:/10.5.0.2:57339] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.397 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.397 DEBUG 12856 --- [reactor-http-nio-16] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.397 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.397 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.397 DEBUG 12856 --- [reactor-http-nio-16] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.397 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.397 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.397 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [ddb96006] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.397 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : [9eec8e04] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.397 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xddb96006, L:/10.5.0.2:8080 - R:/10.5.0.2:57340] Last HTTP response frame
2019-07-08 09:27:14.397 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.397 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xddb96006, L:/10.5.0.2:8080 - R:/10.5.0.2:57340] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.397 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.397 DEBUG 12856 --- [reactor-http-nio-1] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.397 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.397 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0xddb96006, L:/10.5.0.2:8080 - R:/10.5.0.2:57340] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.397 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.397 DEBUG 12856 --- [reactor-http-nio-1] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.397 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.397 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0xddb96006, L:/10.5.0.2:8080 - R:/10.5.0.2:57340] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.397 DEBUG 12856 --- [reactor-http-nio-1] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.397 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.397 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.397 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0xfa1c89bd, L:/10.5.0.2:8080 - R:/10.5.0.2:57349] New http connection, requesting read
2019-07-08 09:27:14.397 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.397 DEBUG 12856 --- [reactor-http-nio-2] reactor.netty.channel.BootstrapHandlers  : [id: 0xfa1c89bd, L:/10.5.0.2:8080 - R:/10.5.0.2:57349] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.398 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x2983430a, L:/10.5.0.2:8080 - R:/10.5.0.2:57350] New http connection, requesting read
2019-07-08 09:27:14.398 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0xfa1c89bd, L:/10.5.0.2:8080 - R:/10.5.0.2:57349] Increasing pending responses, now 1
2019-07-08 09:27:14.398 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.398 DEBUG 12856 --- [reactor-http-nio-3] reactor.netty.channel.BootstrapHandlers  : [id: 0x2983430a, L:/10.5.0.2:8080 - R:/10.5.0.2:57350] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.398 DEBUG 12856 --- [reactor-http-nio-2] reactor.netty.http.server.HttpServer     : [id: 0xfa1c89bd, L:/10.5.0.2:8080 - R:/10.5.0.2:57349] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.398 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.398 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x2983430a, L:/10.5.0.2:8080 - R:/10.5.0.2:57350] Increasing pending responses, now 1
2019-07-08 09:27:14.398 DEBUG 12856 --- [reactor-http-nio-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [fa1c89bd] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.398 DEBUG 12856 --- [reactor-http-nio-3] reactor.netty.http.server.HttpServer     : [id: 0x2983430a, L:/10.5.0.2:8080 - R:/10.5.0.2:57350] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.398 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.398 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.398 DEBUG 12856 --- [reactor-http-nio-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [2983430a] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.398 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.398 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.398 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.398 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : [fa1c89bd] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.398 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.398 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.398 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.398 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : [2983430a] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.398 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 24 bytes, 8 commands in the stack
2019-07-08 09:27:14.399 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.399 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.399 DEBUG 12856 --- [reactor-http-nio-2] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.399 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.399 DEBUG 12856 --- [reactor-http-nio-2] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.399 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.399 DEBUG 12856 --- [reactor-http-nio-2] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.399 DEBUG 12856 --- [reactor-http-nio-3] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.399 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.399 DEBUG 12856 --- [reactor-http-nio-3] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.399 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [28c1a2dc] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.416 DEBUG 12856 --- [reactor-http-nio-3] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.416 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x28c1a2dc, L:/10.5.0.2:8080 - R:/10.5.0.2:57341] Last HTTP response frame
2019-07-08 09:27:14.416 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x28c1a2dc, L:/10.5.0.2:8080 - R:/10.5.0.2:57341] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.416 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.416 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.416 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x28c1a2dc, L:/10.5.0.2:8080 - R:/10.5.0.2:57341] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.416 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.416 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x28c1a2dc, L:/10.5.0.2:8080 - R:/10.5.0.2:57341] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.416 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.416 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [8c0a6264] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.416 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x8c0a6264, L:/10.5.0.2:8080 - R:/10.5.0.2:57342] Last HTTP response frame
2019-07-08 09:27:14.417 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x8c0a6264, L:/10.5.0.2:8080 - R:/10.5.0.2:57342] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.417 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.417 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x8c0a6264, L:/10.5.0.2:8080 - R:/10.5.0.2:57342] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.417 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.417 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0xabc550a8, L:/10.5.0.2:8080 - R:/10.5.0.2:57351] New http connection, requesting read
2019-07-08 09:27:14.417 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x8c0a6264, L:/10.5.0.2:8080 - R:/10.5.0.2:57342] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.417 DEBUG 12856 --- [reactor-http-nio-4] reactor.netty.channel.BootstrapHandlers  : [id: 0xabc550a8, L:/10.5.0.2:8080 - R:/10.5.0.2:57351] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.417 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.417 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0xabc550a8, L:/10.5.0.2:8080 - R:/10.5.0.2:57351] Increasing pending responses, now 1
2019-07-08 09:27:14.417 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.417 DEBUG 12856 --- [reactor-http-nio-4] reactor.netty.http.server.HttpServer     : [id: 0xabc550a8, L:/10.5.0.2:8080 - R:/10.5.0.2:57351] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.417 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0xaabb8e07, L:/10.5.0.2:8080 - R:/10.5.0.2:57352] New http connection, requesting read
2019-07-08 09:27:14.417 DEBUG 12856 --- [reactor-http-nio-4] o.s.w.s.adapter.HttpWebHandlerAdapter    : [abc550a8] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.417 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 64 bytes, 8 commands in the stack
2019-07-08 09:27:14.417 DEBUG 12856 --- [reactor-http-nio-5] reactor.netty.channel.BootstrapHandlers  : [id: 0xaabb8e07, L:/10.5.0.2:8080 - R:/10.5.0.2:57352] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.417 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.417 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0xaabb8e07, L:/10.5.0.2:8080 - R:/10.5.0.2:57352] Increasing pending responses, now 1
2019-07-08 09:27:14.417 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.417 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.417 DEBUG 12856 --- [reactor-http-nio-5] reactor.netty.http.server.HttpServer     : [id: 0xaabb8e07, L:/10.5.0.2:8080 - R:/10.5.0.2:57352] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.417 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.417 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.417 DEBUG 12856 --- [reactor-http-nio-5] o.s.w.s.adapter.HttpWebHandlerAdapter    : [aabb8e07] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.417 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : [abc550a8] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.417 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.417 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.417 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.417 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.418 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [b5893b42] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.418 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : [aabb8e07] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.418 DEBUG 12856 --- [reactor-http-nio-4] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.418 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.418 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xb5893b42, L:/10.5.0.2:8080 - R:/10.5.0.2:57343] Last HTTP response frame
2019-07-08 09:27:14.418 DEBUG 12856 --- [reactor-http-nio-4] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.418 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xb5893b42, L:/10.5.0.2:8080 - R:/10.5.0.2:57343] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.418 DEBUG 12856 --- [reactor-http-nio-4] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.418 DEBUG 12856 --- [reactor-http-nio-5] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.418 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.418 DEBUG 12856 --- [reactor-http-nio-5] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.418 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0xb5893b42, L:/10.5.0.2:8080 - R:/10.5.0.2:57343] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.418 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.418 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.418 DEBUG 12856 --- [reactor-http-nio-5] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.418 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0xb5893b42, L:/10.5.0.2:8080 - R:/10.5.0.2:57343] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.418 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.419 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [6466057e] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.419 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x6466057e, L:/10.5.0.2:8080 - R:/10.5.0.2:57344] Last HTTP response frame
2019-07-08 09:27:14.419 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x6466057e, L:/10.5.0.2:8080 - R:/10.5.0.2:57344] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.419 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.419 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x6466057e, L:/10.5.0.2:8080 - R:/10.5.0.2:57344] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.419 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x0090baec, L:/10.5.0.2:8080 - R:/10.5.0.2:57353] New http connection, requesting read
2019-07-08 09:27:14.419 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x6466057e, L:/10.5.0.2:8080 - R:/10.5.0.2:57344] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.419 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.419 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.419 DEBUG 12856 --- [reactor-http-nio-6] reactor.netty.channel.BootstrapHandlers  : [id: 0x0090baec, L:/10.5.0.2:8080 - R:/10.5.0.2:57353] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.419 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.419 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x0090baec, L:/10.5.0.2:8080 - R:/10.5.0.2:57353] Increasing pending responses, now 1
2019-07-08 09:27:14.419 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0xc9e653ab, L:/10.5.0.2:8080 - R:/10.5.0.2:57354] New http connection, requesting read
2019-07-08 09:27:14.419 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [2c87da4a] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.419 DEBUG 12856 --- [reactor-http-nio-6] reactor.netty.http.server.HttpServer     : [id: 0x0090baec, L:/10.5.0.2:8080 - R:/10.5.0.2:57353] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.419 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x2c87da4a, L:/10.5.0.2:8080 - R:/10.5.0.2:57345] Last HTTP response frame
2019-07-08 09:27:14.419 DEBUG 12856 --- [reactor-http-nio-6] o.s.w.s.adapter.HttpWebHandlerAdapter    : [0090baec] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.419 DEBUG 12856 --- [reactor-http-nio-7] reactor.netty.channel.BootstrapHandlers  : [id: 0xc9e653ab, L:/10.5.0.2:8080 - R:/10.5.0.2:57354] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.419 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x2c87da4a, L:/10.5.0.2:8080 - R:/10.5.0.2:57345] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.419 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.419 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0xc9e653ab, L:/10.5.0.2:8080 - R:/10.5.0.2:57354] Increasing pending responses, now 1
2019-07-08 09:27:14.419 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.419 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.419 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x2c87da4a, L:/10.5.0.2:8080 - R:/10.5.0.2:57345] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.419 DEBUG 12856 --- [reactor-http-nio-7] reactor.netty.http.server.HttpServer     : [id: 0xc9e653ab, L:/10.5.0.2:8080 - R:/10.5.0.2:57354] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.419 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x2c87da4a, L:/10.5.0.2:8080 - R:/10.5.0.2:57345] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.419 DEBUG 12856 --- [reactor-http-nio-7] o.s.w.s.adapter.HttpWebHandlerAdapter    : [c9e653ab] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.419 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : [0090baec] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.419 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.419 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.419 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.419 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.419 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.419 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.419 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x7d638ba0, L:/10.5.0.2:8080 - R:/10.5.0.2:57355] New http connection, requesting read
2019-07-08 09:27:14.420 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : [c9e653ab] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.420 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [09b3cc1c] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.420 DEBUG 12856 --- [reactor-http-nio-6] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.420 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x09b3cc1c, L:/10.5.0.2:8080 - R:/10.5.0.2:57346] Last HTTP response frame
2019-07-08 09:27:14.420 DEBUG 12856 --- [reactor-http-nio-6] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.420 DEBUG 12856 --- [reactor-http-nio-8] reactor.netty.channel.BootstrapHandlers  : [id: 0x7d638ba0, L:/10.5.0.2:8080 - R:/10.5.0.2:57355] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.420 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.420 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x09b3cc1c, L:/10.5.0.2:8080 - R:/10.5.0.2:57346] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.420 DEBUG 12856 --- [reactor-http-nio-6] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.420 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x7d638ba0, L:/10.5.0.2:8080 - R:/10.5.0.2:57355] Increasing pending responses, now 1
2019-07-08 09:27:14.420 DEBUG 12856 --- [reactor-http-nio-8] reactor.netty.http.server.HttpServer     : [id: 0x7d638ba0, L:/10.5.0.2:8080 - R:/10.5.0.2:57355] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.420 DEBUG 12856 --- [reactor-http-nio-8] o.s.w.s.adapter.HttpWebHandlerAdapter    : [7d638ba0] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.420 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.420 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 4 commands
2019-07-08 09:27:14.420 DEBUG 12856 --- [reactor-http-nio-7] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.420 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.420 DEBUG 12856 --- [reactor-http-nio-7] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.420 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x09b3cc1c, L:/10.5.0.2:8080 - R:/10.5.0.2:57346] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.420 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.420 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : [7d638ba0] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.420 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.420 DEBUG 12856 --- [reactor-http-nio-7] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.420 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x09b3cc1c, L:/10.5.0.2:8080 - R:/10.5.0.2:57346] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.421 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.421 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.421 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0xf84a6dd9, L:/10.5.0.2:8080 - R:/10.5.0.2:57356] New http connection, requesting read
2019-07-08 09:27:14.421 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [82876fcb] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.421 DEBUG 12856 --- [reactor-http-nio-9] reactor.netty.channel.BootstrapHandlers  : [id: 0xf84a6dd9, L:/10.5.0.2:8080 - R:/10.5.0.2:57356] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.421 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x82876fcb, L:/10.5.0.2:8080 - R:/10.5.0.2:57347] Last HTTP response frame
2019-07-08 09:27:14.421 DEBUG 12856 --- [reactor-http-nio-8] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.421 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x82876fcb, L:/10.5.0.2:8080 - R:/10.5.0.2:57347] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.421 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0xf84a6dd9, L:/10.5.0.2:8080 - R:/10.5.0.2:57356] Increasing pending responses, now 1
2019-07-08 09:27:14.421 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 3 commands
2019-07-08 09:27:14.421 DEBUG 12856 --- [reactor-http-nio-8] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.421 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x82876fcb, L:/10.5.0.2:8080 - R:/10.5.0.2:57347] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.421 DEBUG 12856 --- [reactor-http-nio-9] reactor.netty.http.server.HttpServer     : [id: 0xf84a6dd9, L:/10.5.0.2:8080 - R:/10.5.0.2:57356] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.421 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.421 DEBUG 12856 --- [reactor-http-nio-8] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.421 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x82876fcb, L:/10.5.0.2:8080 - R:/10.5.0.2:57347] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.421 DEBUG 12856 --- [reactor-http-nio-9] o.s.w.s.adapter.HttpWebHandlerAdapter    : [f84a6dd9] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.421 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: false
2019-07-08 09:27:14.421 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.421 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 32 bytes, 3 commands in the stack
2019-07-08 09:27:14.421 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.421 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 3 commands
2019-07-08 09:27:14.421 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0xb8619090, L:/10.5.0.2:8080 - R:/10.5.0.2:57357] New http connection, requesting read
2019-07-08 09:27:14.421 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : [f84a6dd9] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.421 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.421 DEBUG 12856 --- [reactor-http-nio-10] reactor.netty.channel.BootstrapHandlers  : [id: 0xb8619090, L:/10.5.0.2:8080 - R:/10.5.0.2:57357] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.421 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.421 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.422 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0xb8619090, L:/10.5.0.2:8080 - R:/10.5.0.2:57357] Increasing pending responses, now 1
2019-07-08 09:27:14.422 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.422 DEBUG 12856 --- [reactor-http-nio-10] reactor.netty.http.server.HttpServer     : [id: 0xb8619090, L:/10.5.0.2:8080 - R:/10.5.0.2:57357] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.422 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [9eec8e04] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.422 DEBUG 12856 --- [reactor-http-nio-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [b8619090] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.422 DEBUG 12856 --- [reactor-http-nio-9] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.422 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x9eec8e04, L:/10.5.0.2:8080 - R:/10.5.0.2:57348] Last HTTP response frame
2019-07-08 09:27:14.422 DEBUG 12856 --- [reactor-http-nio-9] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.422 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.422 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x9eec8e04, L:/10.5.0.2:8080 - R:/10.5.0.2:57348] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.422 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.422 DEBUG 12856 --- [reactor-http-nio-9] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.422 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 2 commands
2019-07-08 09:27:14.422 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x9eec8e04, L:/10.5.0.2:8080 - R:/10.5.0.2:57348] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.422 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : [b8619090] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.422 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.422 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x9eec8e04, L:/10.5.0.2:8080 - R:/10.5.0.2:57348] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.422 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.422 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.422 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0xa55c734b, L:/10.5.0.2:8080 - R:/10.5.0.2:57358] New http connection, requesting read
2019-07-08 09:27:14.422 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.422 DEBUG 12856 --- [reactor-http-nio-11] reactor.netty.channel.BootstrapHandlers  : [id: 0xa55c734b, L:/10.5.0.2:8080 - R:/10.5.0.2:57358] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.422 DEBUG 12856 --- [reactor-http-nio-10] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.422 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0xa55c734b, L:/10.5.0.2:8080 - R:/10.5.0.2:57358] Increasing pending responses, now 1
2019-07-08 09:27:14.422 DEBUG 12856 --- [reactor-http-nio-10] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.422 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [fa1c89bd] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.422 DEBUG 12856 --- [reactor-http-nio-11] reactor.netty.http.server.HttpServer     : [id: 0xa55c734b, L:/10.5.0.2:8080 - R:/10.5.0.2:57358] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.422 DEBUG 12856 --- [reactor-http-nio-10] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.422 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xfa1c89bd, L:/10.5.0.2:8080 - R:/10.5.0.2:57349] Last HTTP response frame
2019-07-08 09:27:14.422 DEBUG 12856 --- [reactor-http-nio-11] o.s.w.s.adapter.HttpWebHandlerAdapter    : [a55c734b] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.423 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xfa1c89bd, L:/10.5.0.2:8080 - R:/10.5.0.2:57349] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.423 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.423 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 1 commands
2019-07-08 09:27:14.423 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0xfa1c89bd, L:/10.5.0.2:8080 - R:/10.5.0.2:57349] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.423 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.423 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.423 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0xfa1c89bd, L:/10.5.0.2:8080 - R:/10.5.0.2:57349] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.423 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : [a55c734b] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.423 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.423 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.423 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.423 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x7f4ac411, L:/10.5.0.2:8080 - R:/10.5.0.2:57359] New http connection, requesting read
2019-07-08 09:27:14.423 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [2983430a] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.423 DEBUG 12856 --- [reactor-http-nio-12] reactor.netty.channel.BootstrapHandlers  : [id: 0x7f4ac411, L:/10.5.0.2:8080 - R:/10.5.0.2:57359] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.423 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x2983430a, L:/10.5.0.2:8080 - R:/10.5.0.2:57350] Last HTTP response frame
2019-07-08 09:27:14.423 DEBUG 12856 --- [reactor-http-nio-11] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.423 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x2983430a, L:/10.5.0.2:8080 - R:/10.5.0.2:57350] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.423 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x7f4ac411, L:/10.5.0.2:8080 - R:/10.5.0.2:57359] Increasing pending responses, now 1
2019-07-08 09:27:14.423 DEBUG 12856 --- [reactor-http-nio-11] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.423 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.423 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x2983430a, L:/10.5.0.2:8080 - R:/10.5.0.2:57350] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.423 DEBUG 12856 --- [reactor-http-nio-12] reactor.netty.http.server.HttpServer     : [id: 0x7f4ac411, L:/10.5.0.2:8080 - R:/10.5.0.2:57359] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.423 DEBUG 12856 --- [reactor-http-nio-11] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.423 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.423 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x2983430a, L:/10.5.0.2:8080 - R:/10.5.0.2:57350] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.423 DEBUG 12856 --- [reactor-http-nio-12] o.s.w.s.adapter.HttpWebHandlerAdapter    : [7f4ac411] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.423 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.423 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.423 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.423 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.424 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.424 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x280a883c, L:/10.5.0.2:8080 - R:/10.5.0.2:57360] New http connection, requesting read
2019-07-08 09:27:14.424 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : [7f4ac411] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.424 DEBUG 12856 --- [reactor-http-nio-13] reactor.netty.channel.BootstrapHandlers  : [id: 0x280a883c, L:/10.5.0.2:8080 - R:/10.5.0.2:57360] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.424 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.424 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x280a883c, L:/10.5.0.2:8080 - R:/10.5.0.2:57360] Increasing pending responses, now 1
2019-07-08 09:27:14.424 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.424 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.424 DEBUG 12856 --- [reactor-http-nio-13] reactor.netty.http.server.HttpServer     : [id: 0x280a883c, L:/10.5.0.2:8080 - R:/10.5.0.2:57360] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.424 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.424 DEBUG 12856 --- [reactor-http-nio-12] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.424 DEBUG 12856 --- [reactor-http-nio-13] o.s.w.s.adapter.HttpWebHandlerAdapter    : [280a883c] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.424 DEBUG 12856 --- [reactor-http-nio-12] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.424 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.424 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.424 DEBUG 12856 --- [reactor-http-nio-12] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.424 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.424 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.424 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.424 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : [280a883c] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.424 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.424 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.424 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.425 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.425 DEBUG 12856 --- [reactor-http-nio-13] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.425 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.425 DEBUG 12856 --- [reactor-http-nio-13] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.425 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.425 DEBUG 12856 --- [reactor-http-nio-13] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.425 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.425 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.425 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.425 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.425 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 36 bytes, 10 commands in the stack
2019-07-08 09:27:14.425 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 10 commands
2019-07-08 09:27:14.425 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.425 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.425 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.425 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [abc550a8] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.425 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xabc550a8, L:/10.5.0.2:8080 - R:/10.5.0.2:57351] Last HTTP response frame
2019-07-08 09:27:14.425 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xabc550a8, L:/10.5.0.2:8080 - R:/10.5.0.2:57351] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.425 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 9 commands
2019-07-08 09:27:14.425 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0xabc550a8, L:/10.5.0.2:8080 - R:/10.5.0.2:57351] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.425 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.425 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0xabc550a8, L:/10.5.0.2:8080 - R:/10.5.0.2:57351] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.425 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.426 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.426 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [aabb8e07] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.426 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xaabb8e07, L:/10.5.0.2:8080 - R:/10.5.0.2:57352] Last HTTP response frame
2019-07-08 09:27:14.426 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x10bfcde5, L:/10.5.0.2:8080 - R:/10.5.0.2:57361] New http connection, requesting read
2019-07-08 09:27:14.426 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xaabb8e07, L:/10.5.0.2:8080 - R:/10.5.0.2:57352] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.426 DEBUG 12856 --- [reactor-http-nio-14] reactor.netty.channel.BootstrapHandlers  : [id: 0x10bfcde5, L:/10.5.0.2:8080 - R:/10.5.0.2:57361] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.426 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.426 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0xaabb8e07, L:/10.5.0.2:8080 - R:/10.5.0.2:57352] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.426 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x10bfcde5, L:/10.5.0.2:8080 - R:/10.5.0.2:57361] Increasing pending responses, now 1
2019-07-08 09:27:14.426 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0xaabb8e07, L:/10.5.0.2:8080 - R:/10.5.0.2:57352] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.426 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.426 DEBUG 12856 --- [reactor-http-nio-14] reactor.netty.http.server.HttpServer     : [id: 0x10bfcde5, L:/10.5.0.2:8080 - R:/10.5.0.2:57361] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.426 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.426 DEBUG 12856 --- [reactor-http-nio-14] o.s.w.s.adapter.HttpWebHandlerAdapter    : [10bfcde5] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.426 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.426 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.426 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [0090baec] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.426 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0xa603d821, L:/10.5.0.2:8080 - R:/10.5.0.2:57362] New http connection, requesting read
2019-07-08 09:27:14.426 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.426 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x0090baec, L:/10.5.0.2:8080 - R:/10.5.0.2:57353] Last HTTP response frame
2019-07-08 09:27:14.426 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : [10bfcde5] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.426 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x0090baec, L:/10.5.0.2:8080 - R:/10.5.0.2:57353] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.426 DEBUG 12856 --- [reactor-http-nio-15] reactor.netty.channel.BootstrapHandlers  : [id: 0xa603d821, L:/10.5.0.2:8080 - R:/10.5.0.2:57362] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.426 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.426 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x0090baec, L:/10.5.0.2:8080 - R:/10.5.0.2:57353] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.426 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 36 bytes, 7 commands in the stack
2019-07-08 09:27:14.426 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0xa603d821, L:/10.5.0.2:8080 - R:/10.5.0.2:57362] Increasing pending responses, now 1
2019-07-08 09:27:14.426 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x0090baec, L:/10.5.0.2:8080 - R:/10.5.0.2:57353] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.427 DEBUG 12856 --- [reactor-http-nio-15] reactor.netty.http.server.HttpServer     : [id: 0xa603d821, L:/10.5.0.2:8080 - R:/10.5.0.2:57362] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.426 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.426 DEBUG 12856 --- [reactor-http-nio-14] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.427 DEBUG 12856 --- [reactor-http-nio-15] o.s.w.s.adapter.HttpWebHandlerAdapter    : [a603d821] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.427 DEBUG 12856 --- [reactor-http-nio-14] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.427 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.427 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.427 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.427 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.427 DEBUG 12856 --- [reactor-http-nio-14] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.427 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x1498efd1, L:/10.5.0.2:8080 - R:/10.5.0.2:57363] New http connection, requesting read
2019-07-08 09:27:14.427 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.427 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : [a603d821] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.427 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [c9e653ab] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.427 DEBUG 12856 --- [reactor-http-nio-16] reactor.netty.channel.BootstrapHandlers  : [id: 0x1498efd1, L:/10.5.0.2:8080 - R:/10.5.0.2:57363] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.427 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xc9e653ab, L:/10.5.0.2:8080 - R:/10.5.0.2:57354] Last HTTP response frame
2019-07-08 09:27:14.427 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.427 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x1498efd1, L:/10.5.0.2:8080 - R:/10.5.0.2:57363] Increasing pending responses, now 1
2019-07-08 09:27:14.427 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xc9e653ab, L:/10.5.0.2:8080 - R:/10.5.0.2:57354] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.427 DEBUG 12856 --- [reactor-http-nio-16] reactor.netty.http.server.HttpServer     : [id: 0x1498efd1, L:/10.5.0.2:8080 - R:/10.5.0.2:57363] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.427 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.427 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0xc9e653ab, L:/10.5.0.2:8080 - R:/10.5.0.2:57354] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.427 DEBUG 12856 --- [reactor-http-nio-16] o.s.w.s.adapter.HttpWebHandlerAdapter    : [1498efd1] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.427 DEBUG 12856 --- [reactor-http-nio-15] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.427 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.427 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.427 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.427 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0xc9e653ab, L:/10.5.0.2:8080 - R:/10.5.0.2:57354] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.427 DEBUG 12856 --- [reactor-http-nio-15] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.427 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.428 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : [1498efd1] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.428 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.428 DEBUG 12856 --- [reactor-http-nio-15] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.428 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.428 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [7d638ba0] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.428 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x1fa88c50, L:/10.5.0.2:8080 - R:/10.5.0.2:57364] New http connection, requesting read
2019-07-08 09:27:14.428 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x7d638ba0, L:/10.5.0.2:8080 - R:/10.5.0.2:57355] Last HTTP response frame
2019-07-08 09:27:14.428 DEBUG 12856 --- [reactor-http-nio-1] reactor.netty.channel.BootstrapHandlers  : [id: 0x1fa88c50, L:/10.5.0.2:8080 - R:/10.5.0.2:57364] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.428 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x7d638ba0, L:/10.5.0.2:8080 - R:/10.5.0.2:57355] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.428 DEBUG 12856 --- [reactor-http-nio-16] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.428 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.428 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x1fa88c50, L:/10.5.0.2:8080 - R:/10.5.0.2:57364] Increasing pending responses, now 1
2019-07-08 09:27:14.428 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x7d638ba0, L:/10.5.0.2:8080 - R:/10.5.0.2:57355] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.428 DEBUG 12856 --- [reactor-http-nio-16] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.428 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x7d638ba0, L:/10.5.0.2:8080 - R:/10.5.0.2:57355] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.428 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.428 DEBUG 12856 --- [reactor-http-nio-1] reactor.netty.http.server.HttpServer     : [id: 0x1fa88c50, L:/10.5.0.2:8080 - R:/10.5.0.2:57364] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.428 DEBUG 12856 --- [reactor-http-nio-16] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.428 DEBUG 12856 --- [reactor-http-nio-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [1fa88c50] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.428 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.428 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.428 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.428 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.428 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [f84a6dd9] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.428 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : [1fa88c50] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.428 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xf84a6dd9, L:/10.5.0.2:8080 - R:/10.5.0.2:57356] Last HTTP response frame
2019-07-08 09:27:14.428 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.428 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xf84a6dd9, L:/10.5.0.2:8080 - R:/10.5.0.2:57356] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.429 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.429 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0xf84a6dd9, L:/10.5.0.2:8080 - R:/10.5.0.2:57356] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.429 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.429 DEBUG 12856 --- [reactor-http-nio-1] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.429 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.429 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0xf84a6dd9, L:/10.5.0.2:8080 - R:/10.5.0.2:57356] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.429 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.429 DEBUG 12856 --- [reactor-http-nio-1] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.429 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.429 DEBUG 12856 --- [reactor-http-nio-1] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.429 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.429 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.429 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x5a612fc5, L:/10.5.0.2:8080 - R:/10.5.0.2:57365] New http connection, requesting read
2019-07-08 09:27:14.429 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x2a7b4b08, L:/10.5.0.2:8080 - R:/10.5.0.2:57366] New http connection, requesting read
2019-07-08 09:27:14.429 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.429 DEBUG 12856 --- [reactor-http-nio-3] reactor.netty.channel.BootstrapHandlers  : [id: 0x2a7b4b08, L:/10.5.0.2:8080 - R:/10.5.0.2:57366] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.429 DEBUG 12856 --- [reactor-http-nio-2] reactor.netty.channel.BootstrapHandlers  : [id: 0x5a612fc5, L:/10.5.0.2:8080 - R:/10.5.0.2:57365] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.429 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 48 bytes, 8 commands in the stack
2019-07-08 09:27:14.429 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x2a7b4b08, L:/10.5.0.2:8080 - R:/10.5.0.2:57366] Increasing pending responses, now 1
2019-07-08 09:27:14.429 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x5a612fc5, L:/10.5.0.2:8080 - R:/10.5.0.2:57365] Increasing pending responses, now 1
2019-07-08 09:27:14.429 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.429 DEBUG 12856 --- [reactor-http-nio-2] reactor.netty.http.server.HttpServer     : [id: 0x5a612fc5, L:/10.5.0.2:8080 - R:/10.5.0.2:57365] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.429 DEBUG 12856 --- [reactor-http-nio-3] reactor.netty.http.server.HttpServer     : [id: 0x2a7b4b08, L:/10.5.0.2:8080 - R:/10.5.0.2:57366] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.429 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.429 DEBUG 12856 --- [reactor-http-nio-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [2a7b4b08] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.429 DEBUG 12856 --- [reactor-http-nio-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [5a612fc5] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.429 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.429 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.429 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.429 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.429 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.429 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [b8619090] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.430 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.430 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : [2a7b4b08] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.430 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xb8619090, L:/10.5.0.2:8080 - R:/10.5.0.2:57357] Last HTTP response frame
2019-07-08 09:27:14.430 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.430 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : [5a612fc5] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.430 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xb8619090, L:/10.5.0.2:8080 - R:/10.5.0.2:57357] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.430 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.430 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.430 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0xb8619090, L:/10.5.0.2:8080 - R:/10.5.0.2:57357] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.430 DEBUG 12856 --- [reactor-http-nio-3] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.430 DEBUG 12856 --- [reactor-http-nio-2] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.430 DEBUG 12856 --- [reactor-http-nio-3] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.430 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.430 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0xb8619090, L:/10.5.0.2:8080 - R:/10.5.0.2:57357] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.430 DEBUG 12856 --- [reactor-http-nio-2] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.430 DEBUG 12856 --- [reactor-http-nio-3] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.430 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.430 DEBUG 12856 --- [reactor-http-nio-2] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.430 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.430 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [a55c734b] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.431 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x6219638d, L:/10.5.0.2:8080 - R:/10.5.0.2:57367] New http connection, requesting read
2019-07-08 09:27:14.431 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xa55c734b, L:/10.5.0.2:8080 - R:/10.5.0.2:57358] Last HTTP response frame
2019-07-08 09:27:14.431 DEBUG 12856 --- [reactor-http-nio-4] reactor.netty.channel.BootstrapHandlers  : [id: 0x6219638d, L:/10.5.0.2:8080 - R:/10.5.0.2:57367] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.431 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xa55c734b, L:/10.5.0.2:8080 - R:/10.5.0.2:57358] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.431 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x6219638d, L:/10.5.0.2:8080 - R:/10.5.0.2:57367] Increasing pending responses, now 1
2019-07-08 09:27:14.431 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.431 DEBUG 12856 --- [reactor-http-nio-4] reactor.netty.http.server.HttpServer     : [id: 0x6219638d, L:/10.5.0.2:8080 - R:/10.5.0.2:57367] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.431 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.431 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0xa55c734b, L:/10.5.0.2:8080 - R:/10.5.0.2:57358] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.431 DEBUG 12856 --- [reactor-http-nio-4] o.s.w.s.adapter.HttpWebHandlerAdapter    : [6219638d] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.431 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.431 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0xa55c734b, L:/10.5.0.2:8080 - R:/10.5.0.2:57358] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.431 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.431 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.431 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.431 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [7f4ac411] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.431 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : [6219638d] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.431 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x7f4ac411, L:/10.5.0.2:8080 - R:/10.5.0.2:57359] Last HTTP response frame
2019-07-08 09:27:14.431 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0xe0e6049d, L:/10.5.0.2:8080 - R:/10.5.0.2:57368] New http connection, requesting read
2019-07-08 09:27:14.431 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.431 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x7f4ac411, L:/10.5.0.2:8080 - R:/10.5.0.2:57359] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.431 DEBUG 12856 --- [reactor-http-nio-5] reactor.netty.channel.BootstrapHandlers  : [id: 0xe0e6049d, L:/10.5.0.2:8080 - R:/10.5.0.2:57368] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.431 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.431 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x7f4ac411, L:/10.5.0.2:8080 - R:/10.5.0.2:57359] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.431 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0xe0e6049d, L:/10.5.0.2:8080 - R:/10.5.0.2:57368] Increasing pending responses, now 1
2019-07-08 09:27:14.431 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.431 DEBUG 12856 --- [reactor-http-nio-4] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.431 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x7f4ac411, L:/10.5.0.2:8080 - R:/10.5.0.2:57359] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.431 DEBUG 12856 --- [reactor-http-nio-4] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.431 DEBUG 12856 --- [reactor-http-nio-5] reactor.netty.http.server.HttpServer     : [id: 0xe0e6049d, L:/10.5.0.2:8080 - R:/10.5.0.2:57368] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.431 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.431 DEBUG 12856 --- [reactor-http-nio-4] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.431 DEBUG 12856 --- [reactor-http-nio-5] o.s.w.s.adapter.HttpWebHandlerAdapter    : [e0e6049d] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.432 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.432 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x4465308f, L:/10.5.0.2:8080 - R:/10.5.0.2:57369] New http connection, requesting read
2019-07-08 09:27:14.432 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [280a883c] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.432 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.432 DEBUG 12856 --- [reactor-http-nio-6] reactor.netty.channel.BootstrapHandlers  : [id: 0x4465308f, L:/10.5.0.2:8080 - R:/10.5.0.2:57369] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.432 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x280a883c, L:/10.5.0.2:8080 - R:/10.5.0.2:57360] Last HTTP response frame
2019-07-08 09:27:14.432 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.432 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x4465308f, L:/10.5.0.2:8080 - R:/10.5.0.2:57369] Increasing pending responses, now 1
2019-07-08 09:27:14.432 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x280a883c, L:/10.5.0.2:8080 - R:/10.5.0.2:57360] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.432 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : [e0e6049d] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.432 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.432 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.432 DEBUG 12856 --- [reactor-http-nio-6] reactor.netty.http.server.HttpServer     : [id: 0x4465308f, L:/10.5.0.2:8080 - R:/10.5.0.2:57369] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.432 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x280a883c, L:/10.5.0.2:8080 - R:/10.5.0.2:57360] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.432 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.432 DEBUG 12856 --- [reactor-http-nio-6] o.s.w.s.adapter.HttpWebHandlerAdapter    : [4465308f] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.432 DEBUG 12856 --- [reactor-http-nio-5] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.432 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.432 DEBUG 12856 --- [reactor-http-nio-5] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.432 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.432 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x280a883c, L:/10.5.0.2:8080 - R:/10.5.0.2:57360] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.432 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.432 DEBUG 12856 --- [reactor-http-nio-5] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.432 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.432 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : [4465308f] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.432 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0xc4008c35, L:/10.5.0.2:8080 - R:/10.5.0.2:57370] New http connection, requesting read
2019-07-08 09:27:14.433 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.433 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.433 DEBUG 12856 --- [reactor-http-nio-7] reactor.netty.channel.BootstrapHandlers  : [id: 0xc4008c35, L:/10.5.0.2:8080 - R:/10.5.0.2:57370] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.433 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.433 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0xc4008c35, L:/10.5.0.2:8080 - R:/10.5.0.2:57370] Increasing pending responses, now 1
2019-07-08 09:27:14.433 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.433 DEBUG 12856 --- [reactor-http-nio-6] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.433 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.433 DEBUG 12856 --- [reactor-http-nio-6] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.433 DEBUG 12856 --- [reactor-http-nio-7] reactor.netty.http.server.HttpServer     : [id: 0xc4008c35, L:/10.5.0.2:8080 - R:/10.5.0.2:57370] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.433 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 48 bytes, 8 commands in the stack
2019-07-08 09:27:14.433 DEBUG 12856 --- [reactor-http-nio-7] o.s.w.s.adapter.HttpWebHandlerAdapter    : [c4008c35] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.433 DEBUG 12856 --- [reactor-http-nio-6] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.433 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.433 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.433 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.433 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.433 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : [c4008c35] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.433 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.433 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.433 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.434 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [10bfcde5] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.434 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x10bfcde5, L:/10.5.0.2:8080 - R:/10.5.0.2:57361] Last HTTP response frame
2019-07-08 09:27:14.434 DEBUG 12856 --- [reactor-http-nio-7] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.434 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x10bfcde5, L:/10.5.0.2:8080 - R:/10.5.0.2:57361] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.434 DEBUG 12856 --- [reactor-http-nio-7] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.434 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.434 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x10bfcde5, L:/10.5.0.2:8080 - R:/10.5.0.2:57361] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.434 DEBUG 12856 --- [reactor-http-nio-7] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.434 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.434 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x10bfcde5, L:/10.5.0.2:8080 - R:/10.5.0.2:57361] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.434 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.434 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.434 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [a603d821] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.434 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x10bdd519, L:/10.5.0.2:8080 - R:/10.5.0.2:57371] New http connection, requesting read
2019-07-08 09:27:14.434 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xa603d821, L:/10.5.0.2:8080 - R:/10.5.0.2:57362] Last HTTP response frame
2019-07-08 09:27:14.434 DEBUG 12856 --- [reactor-http-nio-8] reactor.netty.channel.BootstrapHandlers  : [id: 0x10bdd519, L:/10.5.0.2:8080 - R:/10.5.0.2:57371] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.434 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xa603d821, L:/10.5.0.2:8080 - R:/10.5.0.2:57362] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.434 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x10bdd519, L:/10.5.0.2:8080 - R:/10.5.0.2:57371] Increasing pending responses, now 1
2019-07-08 09:27:14.434 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.434 DEBUG 12856 --- [reactor-http-nio-8] reactor.netty.http.server.HttpServer     : [id: 0x10bdd519, L:/10.5.0.2:8080 - R:/10.5.0.2:57371] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.434 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0xa603d821, L:/10.5.0.2:8080 - R:/10.5.0.2:57362] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.434 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.434 DEBUG 12856 --- [reactor-http-nio-8] o.s.w.s.adapter.HttpWebHandlerAdapter    : [10bdd519] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.434 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0xa603d821, L:/10.5.0.2:8080 - R:/10.5.0.2:57362] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.434 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.434 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.434 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.434 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.434 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [1498efd1] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.434 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x8756e50d, L:/10.5.0.2:8080 - R:/10.5.0.2:57372] New http connection, requesting read
2019-07-08 09:27:14.434 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : [10bdd519] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.434 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x1498efd1, L:/10.5.0.2:8080 - R:/10.5.0.2:57363] Last HTTP response frame
2019-07-08 09:27:14.434 DEBUG 12856 --- [reactor-http-nio-9] reactor.netty.channel.BootstrapHandlers  : [id: 0x8756e50d, L:/10.5.0.2:8080 - R:/10.5.0.2:57372] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.435 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x1498efd1, L:/10.5.0.2:8080 - R:/10.5.0.2:57363] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.435 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.435 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x8756e50d, L:/10.5.0.2:8080 - R:/10.5.0.2:57372] Increasing pending responses, now 1
2019-07-08 09:27:14.435 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.435 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x1498efd1, L:/10.5.0.2:8080 - R:/10.5.0.2:57363] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.435 DEBUG 12856 --- [reactor-http-nio-9] reactor.netty.http.server.HttpServer     : [id: 0x8756e50d, L:/10.5.0.2:8080 - R:/10.5.0.2:57372] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.435 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x1498efd1, L:/10.5.0.2:8080 - R:/10.5.0.2:57363] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.435 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.435 DEBUG 12856 --- [reactor-http-nio-8] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.435 DEBUG 12856 --- [reactor-http-nio-9] o.s.w.s.adapter.HttpWebHandlerAdapter    : [8756e50d] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.435 DEBUG 12856 --- [reactor-http-nio-8] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.435 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.435 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.435 DEBUG 12856 --- [reactor-http-nio-8] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.435 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x80cc4427, L:/10.5.0.2:8080 - R:/10.5.0.2:57373] New http connection, requesting read
2019-07-08 09:27:14.435 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.435 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.435 DEBUG 12856 --- [reactor-http-nio-10] reactor.netty.channel.BootstrapHandlers  : [id: 0x80cc4427, L:/10.5.0.2:8080 - R:/10.5.0.2:57373] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.435 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [1fa88c50] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.435 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : [8756e50d] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.435 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x1fa88c50, L:/10.5.0.2:8080 - R:/10.5.0.2:57364] Last HTTP response frame
2019-07-08 09:27:14.435 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x80cc4427, L:/10.5.0.2:8080 - R:/10.5.0.2:57373] Increasing pending responses, now 1
2019-07-08 09:27:14.435 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.435 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x1fa88c50, L:/10.5.0.2:8080 - R:/10.5.0.2:57364] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.435 DEBUG 12856 --- [reactor-http-nio-10] reactor.netty.http.server.HttpServer     : [id: 0x80cc4427, L:/10.5.0.2:8080 - R:/10.5.0.2:57373] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.436 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.436 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x1fa88c50, L:/10.5.0.2:8080 - R:/10.5.0.2:57364] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.436 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.436 DEBUG 12856 --- [reactor-http-nio-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [80cc4427] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.436 DEBUG 12856 --- [reactor-http-nio-9] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.436 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x1fa88c50, L:/10.5.0.2:8080 - R:/10.5.0.2:57364] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.436 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.436 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.436 DEBUG 12856 --- [reactor-http-nio-9] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.436 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.436 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.436 DEBUG 12856 --- [reactor-http-nio-9] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.436 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0xefab8096, L:/10.5.0.2:8080 - R:/10.5.0.2:57374] New http connection, requesting read
2019-07-08 09:27:14.436 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.436 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : [80cc4427] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.436 DEBUG 12856 --- [reactor-http-nio-11] reactor.netty.channel.BootstrapHandlers  : [id: 0xefab8096, L:/10.5.0.2:8080 - R:/10.5.0.2:57374] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.436 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.436 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.436 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0xefab8096, L:/10.5.0.2:8080 - R:/10.5.0.2:57374] Increasing pending responses, now 1
2019-07-08 09:27:14.436 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.436 DEBUG 12856 --- [reactor-http-nio-11] reactor.netty.http.server.HttpServer     : [id: 0xefab8096, L:/10.5.0.2:8080 - R:/10.5.0.2:57374] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.436 DEBUG 12856 --- [reactor-http-nio-10] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.436 DEBUG 12856 --- [reactor-http-nio-11] o.s.w.s.adapter.HttpWebHandlerAdapter    : [efab8096] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.436 DEBUG 12856 --- [reactor-http-nio-10] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.436 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.436 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.436 DEBUG 12856 --- [reactor-http-nio-10] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.437 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.437 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.437 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : [efab8096] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.437 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.437 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.437 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 48 bytes, 9 commands in the stack
2019-07-08 09:27:14.437 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 9 commands
2019-07-08 09:27:14.437 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.437 DEBUG 12856 --- [reactor-http-nio-11] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.437 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.437 DEBUG 12856 --- [reactor-http-nio-11] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.437 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.437 DEBUG 12856 --- [reactor-http-nio-11] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.437 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [2a7b4b08] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.437 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x2a7b4b08, L:/10.5.0.2:8080 - R:/10.5.0.2:57366] Last HTTP response frame
2019-07-08 09:27:14.437 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x2a7b4b08, L:/10.5.0.2:8080 - R:/10.5.0.2:57366] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.437 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.437 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x2a7b4b08, L:/10.5.0.2:8080 - R:/10.5.0.2:57366] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.437 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.437 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x2a7b4b08, L:/10.5.0.2:8080 - R:/10.5.0.2:57366] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.437 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.437 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.437 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [5a612fc5] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.437 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x5a612fc5, L:/10.5.0.2:8080 - R:/10.5.0.2:57365] Last HTTP response frame
2019-07-08 09:27:14.437 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x5a612fc5, L:/10.5.0.2:8080 - R:/10.5.0.2:57365] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.438 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x65acf95a, L:/10.5.0.2:8080 - R:/10.5.0.2:57375] New http connection, requesting read
2019-07-08 09:27:14.438 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.438 DEBUG 12856 --- [reactor-http-nio-12] reactor.netty.channel.BootstrapHandlers  : [id: 0x65acf95a, L:/10.5.0.2:8080 - R:/10.5.0.2:57375] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.438 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x5a612fc5, L:/10.5.0.2:8080 - R:/10.5.0.2:57365] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.438 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.438 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x5a612fc5, L:/10.5.0.2:8080 - R:/10.5.0.2:57365] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.438 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x65acf95a, L:/10.5.0.2:8080 - R:/10.5.0.2:57375] Increasing pending responses, now 1
2019-07-08 09:27:14.438 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.438 DEBUG 12856 --- [reactor-http-nio-12] reactor.netty.http.server.HttpServer     : [id: 0x65acf95a, L:/10.5.0.2:8080 - R:/10.5.0.2:57375] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.438 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.438 DEBUG 12856 --- [reactor-http-nio-12] o.s.w.s.adapter.HttpWebHandlerAdapter    : [65acf95a] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.438 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [6219638d] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.438 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x6219638d, L:/10.5.0.2:8080 - R:/10.5.0.2:57367] Last HTTP response frame
2019-07-08 09:27:14.438 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.438 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x7f69f965, L:/10.5.0.2:8080 - R:/10.5.0.2:57376] New http connection, requesting read
2019-07-08 09:27:14.438 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.438 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x6219638d, L:/10.5.0.2:8080 - R:/10.5.0.2:57367] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.438 DEBUG 12856 --- [reactor-http-nio-13] reactor.netty.channel.BootstrapHandlers  : [id: 0x7f69f965, L:/10.5.0.2:8080 - R:/10.5.0.2:57376] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.438 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : [65acf95a] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.438 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.438 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x6219638d, L:/10.5.0.2:8080 - R:/10.5.0.2:57367] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.438 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.438 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x7f69f965, L:/10.5.0.2:8080 - R:/10.5.0.2:57376] Increasing pending responses, now 1
2019-07-08 09:27:14.438 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.438 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x6219638d, L:/10.5.0.2:8080 - R:/10.5.0.2:57367] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.438 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.438 DEBUG 12856 --- [reactor-http-nio-13] reactor.netty.http.server.HttpServer     : [id: 0x7f69f965, L:/10.5.0.2:8080 - R:/10.5.0.2:57376] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.439 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.439 DEBUG 12856 --- [reactor-http-nio-13] o.s.w.s.adapter.HttpWebHandlerAdapter    : [7f69f965] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.439 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [e0e6049d] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.439 DEBUG 12856 --- [reactor-http-nio-12] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.439 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.439 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xe0e6049d, L:/10.5.0.2:8080 - R:/10.5.0.2:57368] Last HTTP response frame
2019-07-08 09:27:14.439 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x137c85ba, L:/10.5.0.2:8080 - R:/10.5.0.2:57377] New http connection, requesting read
2019-07-08 09:27:14.439 DEBUG 12856 --- [reactor-http-nio-12] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.439 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.439 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xe0e6049d, L:/10.5.0.2:8080 - R:/10.5.0.2:57368] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.439 DEBUG 12856 --- [reactor-http-nio-14] reactor.netty.channel.BootstrapHandlers  : [id: 0x137c85ba, L:/10.5.0.2:8080 - R:/10.5.0.2:57377] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.439 DEBUG 12856 --- [reactor-http-nio-12] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.439 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : [7f69f965] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.439 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0xe0e6049d, L:/10.5.0.2:8080 - R:/10.5.0.2:57368] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.439 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.439 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.439 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x137c85ba, L:/10.5.0.2:8080 - R:/10.5.0.2:57377] Increasing pending responses, now 1
2019-07-08 09:27:14.439 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0xe0e6049d, L:/10.5.0.2:8080 - R:/10.5.0.2:57368] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.439 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.439 DEBUG 12856 --- [reactor-http-nio-13] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.439 DEBUG 12856 --- [reactor-http-nio-14] reactor.netty.http.server.HttpServer     : [id: 0x137c85ba, L:/10.5.0.2:8080 - R:/10.5.0.2:57377] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.439 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.439 DEBUG 12856 --- [reactor-http-nio-13] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.439 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x7f27f37f, L:/10.5.0.2:8080 - R:/10.5.0.2:57378] New http connection, requesting read
2019-07-08 09:27:14.439 DEBUG 12856 --- [reactor-http-nio-14] o.s.w.s.adapter.HttpWebHandlerAdapter    : [137c85ba] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.439 DEBUG 12856 --- [reactor-http-nio-15] reactor.netty.channel.BootstrapHandlers  : [id: 0x7f27f37f, L:/10.5.0.2:8080 - R:/10.5.0.2:57378] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.439 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.440 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x7f27f37f, L:/10.5.0.2:8080 - R:/10.5.0.2:57378] Increasing pending responses, now 1
2019-07-08 09:27:14.439 DEBUG 12856 --- [reactor-http-nio-13] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.439 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.440 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.440 DEBUG 12856 --- [reactor-http-nio-15] reactor.netty.http.server.HttpServer     : [id: 0x7f27f37f, L:/10.5.0.2:8080 - R:/10.5.0.2:57378] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.440 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.440 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.440 DEBUG 12856 --- [reactor-http-nio-15] o.s.w.s.adapter.HttpWebHandlerAdapter    : [7f27f37f] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.440 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : [137c85ba] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.440 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 60 bytes, 8 commands in the stack
2019-07-08 09:27:14.440 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.440 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.440 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.440 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.440 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.440 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : [7f27f37f] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.440 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.440 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.440 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.440 DEBUG 12856 --- [reactor-http-nio-14] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.441 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [4465308f] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.441 DEBUG 12856 --- [reactor-http-nio-14] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.441 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x4465308f, L:/10.5.0.2:8080 - R:/10.5.0.2:57369] Last HTTP response frame
2019-07-08 09:27:14.441 DEBUG 12856 --- [reactor-http-nio-15] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.441 DEBUG 12856 --- [reactor-http-nio-14] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.441 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x4465308f, L:/10.5.0.2:8080 - R:/10.5.0.2:57369] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.441 DEBUG 12856 --- [reactor-http-nio-15] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.441 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.441 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x4465308f, L:/10.5.0.2:8080 - R:/10.5.0.2:57369] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.441 DEBUG 12856 --- [reactor-http-nio-15] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.441 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.441 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x4465308f, L:/10.5.0.2:8080 - R:/10.5.0.2:57369] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.441 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.441 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.441 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [c4008c35] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.441 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xc4008c35, L:/10.5.0.2:8080 - R:/10.5.0.2:57370] Last HTTP response frame
2019-07-08 09:27:14.441 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xc4008c35, L:/10.5.0.2:8080 - R:/10.5.0.2:57370] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.441 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.441 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0xc4008c35, L:/10.5.0.2:8080 - R:/10.5.0.2:57370] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.441 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.441 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x8bc26fa1, L:/10.5.0.2:8080 - R:/10.5.0.2:57379] New http connection, requesting read
2019-07-08 09:27:14.441 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.441 DEBUG 12856 --- [reactor-http-nio-16] reactor.netty.channel.BootstrapHandlers  : [id: 0x8bc26fa1, L:/10.5.0.2:8080 - R:/10.5.0.2:57379] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.441 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0xc4008c35, L:/10.5.0.2:8080 - R:/10.5.0.2:57370] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.441 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.441 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x8bc26fa1, L:/10.5.0.2:8080 - R:/10.5.0.2:57379] Increasing pending responses, now 1
2019-07-08 09:27:14.441 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [10bdd519] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.441 DEBUG 12856 --- [reactor-http-nio-16] reactor.netty.http.server.HttpServer     : [id: 0x8bc26fa1, L:/10.5.0.2:8080 - R:/10.5.0.2:57379] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.441 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x10bdd519, L:/10.5.0.2:8080 - R:/10.5.0.2:57371] Last HTTP response frame
2019-07-08 09:27:14.441 DEBUG 12856 --- [reactor-http-nio-16] o.s.w.s.adapter.HttpWebHandlerAdapter    : [8bc26fa1] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.441 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x10bdd519, L:/10.5.0.2:8080 - R:/10.5.0.2:57371] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.441 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0xfa2f8a8c, L:/10.5.0.2:8080 - R:/10.5.0.2:57380] New http connection, requesting read
2019-07-08 09:27:14.441 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.441 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.442 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.442 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.441 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x10bdd519, L:/10.5.0.2:8080 - R:/10.5.0.2:57371] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.442 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : [8bc26fa1] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.441 DEBUG 12856 --- [reactor-http-nio-1] reactor.netty.channel.BootstrapHandlers  : [id: 0xfa2f8a8c, L:/10.5.0.2:8080 - R:/10.5.0.2:57380] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.442 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.442 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x10bdd519, L:/10.5.0.2:8080 - R:/10.5.0.2:57371] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.442 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.442 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0xfa2f8a8c, L:/10.5.0.2:8080 - R:/10.5.0.2:57380] Increasing pending responses, now 1
2019-07-08 09:27:14.442 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.442 DEBUG 12856 --- [reactor-http-nio-1] reactor.netty.http.server.HttpServer     : [id: 0xfa2f8a8c, L:/10.5.0.2:8080 - R:/10.5.0.2:57380] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.442 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [8756e50d] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.442 DEBUG 12856 --- [reactor-http-nio-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [fa2f8a8c] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.442 DEBUG 12856 --- [reactor-http-nio-16] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.442 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x8756e50d, L:/10.5.0.2:8080 - R:/10.5.0.2:57372] Last HTTP response frame
2019-07-08 09:27:14.442 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.442 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x8756e50d, L:/10.5.0.2:8080 - R:/10.5.0.2:57372] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.442 DEBUG 12856 --- [reactor-http-nio-16] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.442 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.442 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 4 commands
2019-07-08 09:27:14.442 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x8756e50d, L:/10.5.0.2:8080 - R:/10.5.0.2:57372] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.442 DEBUG 12856 --- [reactor-http-nio-16] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.442 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : [fa2f8a8c] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.442 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.442 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.442 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x8756e50d, L:/10.5.0.2:8080 - R:/10.5.0.2:57372] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.442 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.443 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.443 DEBUG 12856 --- [reactor-http-nio-1] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.443 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [80cc4427] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.443 DEBUG 12856 --- [reactor-http-nio-1] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.443 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x80cc4427, L:/10.5.0.2:8080 - R:/10.5.0.2:57373] Last HTTP response frame
2019-07-08 09:27:14.443 DEBUG 12856 --- [reactor-http-nio-1] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.443 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x80cc4427, L:/10.5.0.2:8080 - R:/10.5.0.2:57373] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.443 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.443 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x80cc4427, L:/10.5.0.2:8080 - R:/10.5.0.2:57373] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.443 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x0bd1ff72, L:/10.5.0.2:8080 - R:/10.5.0.2:57382] New http connection, requesting read
2019-07-08 09:27:14.443 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x460bd781, L:/10.5.0.2:8080 - R:/10.5.0.2:57381] New http connection, requesting read
2019-07-08 09:27:14.443 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.443 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x80cc4427, L:/10.5.0.2:8080 - R:/10.5.0.2:57373] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.443 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.443 DEBUG 12856 --- [reactor-http-nio-3] reactor.netty.channel.BootstrapHandlers  : [id: 0x0bd1ff72, L:/10.5.0.2:8080 - R:/10.5.0.2:57382] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.443 DEBUG 12856 --- [reactor-http-nio-2] reactor.netty.channel.BootstrapHandlers  : [id: 0x460bd781, L:/10.5.0.2:8080 - R:/10.5.0.2:57381] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.443 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.443 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x0bd1ff72, L:/10.5.0.2:8080 - R:/10.5.0.2:57382] Increasing pending responses, now 1
2019-07-08 09:27:14.443 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0xb854afd1, L:/10.5.0.2:8080 - R:/10.5.0.2:57383] New http connection, requesting read
2019-07-08 09:27:14.443 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x460bd781, L:/10.5.0.2:8080 - R:/10.5.0.2:57381] Increasing pending responses, now 1
2019-07-08 09:27:14.443 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.443 DEBUG 12856 --- [reactor-http-nio-3] reactor.netty.http.server.HttpServer     : [id: 0x0bd1ff72, L:/10.5.0.2:8080 - R:/10.5.0.2:57382] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.443 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.443 DEBUG 12856 --- [reactor-http-nio-4] reactor.netty.channel.BootstrapHandlers  : [id: 0xb854afd1, L:/10.5.0.2:8080 - R:/10.5.0.2:57383] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.443 DEBUG 12856 --- [reactor-http-nio-2] reactor.netty.http.server.HttpServer     : [id: 0x460bd781, L:/10.5.0.2:8080 - R:/10.5.0.2:57381] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.443 DEBUG 12856 --- [reactor-http-nio-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [0bd1ff72] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.443 DEBUG 12856 --- [reactor-http-nio-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [460bd781] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.443 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.443 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0xb854afd1, L:/10.5.0.2:8080 - R:/10.5.0.2:57383] Increasing pending responses, now 1
2019-07-08 09:27:14.444 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.444 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.444 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.444 DEBUG 12856 --- [reactor-http-nio-4] reactor.netty.http.server.HttpServer     : [id: 0xb854afd1, L:/10.5.0.2:8080 - R:/10.5.0.2:57383] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.444 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.444 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.444 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 36 bytes, 7 commands in the stack
2019-07-08 09:27:14.444 DEBUG 12856 --- [reactor-http-nio-4] o.s.w.s.adapter.HttpWebHandlerAdapter    : [b854afd1] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.444 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : [460bd781] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.444 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : [0bd1ff72] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.444 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.444 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.444 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.444 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.444 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.444 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.444 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.444 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : [b854afd1] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.444 DEBUG 12856 --- [reactor-http-nio-2] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.445 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.445 DEBUG 12856 --- [reactor-http-nio-2] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.445 DEBUG 12856 --- [reactor-http-nio-3] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.445 DEBUG 12856 --- [reactor-http-nio-2] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.445 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.445 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [efab8096] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.445 DEBUG 12856 --- [reactor-http-nio-3] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.445 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xefab8096, L:/10.5.0.2:8080 - R:/10.5.0.2:57374] Last HTTP response frame
2019-07-08 09:27:14.445 DEBUG 12856 --- [reactor-http-nio-3] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.445 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xefab8096, L:/10.5.0.2:8080 - R:/10.5.0.2:57374] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.445 DEBUG 12856 --- [reactor-http-nio-4] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.445 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.445 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0xefab8096, L:/10.5.0.2:8080 - R:/10.5.0.2:57374] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.445 DEBUG 12856 --- [reactor-http-nio-4] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.445 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.445 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0xefab8096, L:/10.5.0.2:8080 - R:/10.5.0.2:57374] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.445 DEBUG 12856 --- [reactor-http-nio-4] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.445 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.445 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.445 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [65acf95a] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.445 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x65acf95a, L:/10.5.0.2:8080 - R:/10.5.0.2:57375] Last HTTP response frame
2019-07-08 09:27:14.445 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x65acf95a, L:/10.5.0.2:8080 - R:/10.5.0.2:57375] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.445 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.445 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x55c1a257, L:/10.5.0.2:8080 - R:/10.5.0.2:57384] New http connection, requesting read
2019-07-08 09:27:14.445 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x65acf95a, L:/10.5.0.2:8080 - R:/10.5.0.2:57375] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.445 DEBUG 12856 --- [reactor-http-nio-5] reactor.netty.channel.BootstrapHandlers  : [id: 0x55c1a257, L:/10.5.0.2:8080 - R:/10.5.0.2:57384] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.445 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.445 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x65acf95a, L:/10.5.0.2:8080 - R:/10.5.0.2:57375] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.445 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x55c1a257, L:/10.5.0.2:8080 - R:/10.5.0.2:57384] Increasing pending responses, now 1
2019-07-08 09:27:14.445 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.446 DEBUG 12856 --- [reactor-http-nio-5] reactor.netty.http.server.HttpServer     : [id: 0x55c1a257, L:/10.5.0.2:8080 - R:/10.5.0.2:57384] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.446 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.446 DEBUG 12856 --- [reactor-http-nio-5] o.s.w.s.adapter.HttpWebHandlerAdapter    : [55c1a257] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.446 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [7f69f965] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.446 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.446 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x1819a00c, L:/10.5.0.2:8080 - R:/10.5.0.2:57385] New http connection, requesting read
2019-07-08 09:27:14.446 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x7f69f965, L:/10.5.0.2:8080 - R:/10.5.0.2:57376] Last HTTP response frame
2019-07-08 09:27:14.446 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.446 DEBUG 12856 --- [reactor-http-nio-6] reactor.netty.channel.BootstrapHandlers  : [id: 0x1819a00c, L:/10.5.0.2:8080 - R:/10.5.0.2:57385] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.446 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x7f69f965, L:/10.5.0.2:8080 - R:/10.5.0.2:57376] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.446 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : [55c1a257] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.446 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.446 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x1819a00c, L:/10.5.0.2:8080 - R:/10.5.0.2:57385] Increasing pending responses, now 1
2019-07-08 09:27:14.446 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.446 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x7f69f965, L:/10.5.0.2:8080 - R:/10.5.0.2:57376] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.446 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.446 DEBUG 12856 --- [reactor-http-nio-6] reactor.netty.http.server.HttpServer     : [id: 0x1819a00c, L:/10.5.0.2:8080 - R:/10.5.0.2:57385] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.446 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.446 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x7f69f965, L:/10.5.0.2:8080 - R:/10.5.0.2:57376] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.446 DEBUG 12856 --- [reactor-http-nio-6] o.s.w.s.adapter.HttpWebHandlerAdapter    : [1819a00c] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.446 DEBUG 12856 --- [reactor-http-nio-5] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.446 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.446 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.446 DEBUG 12856 --- [reactor-http-nio-5] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.446 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.446 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x82e78707, L:/10.5.0.2:8080 - R:/10.5.0.2:57386] New http connection, requesting read
2019-07-08 09:27:14.446 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.446 DEBUG 12856 --- [reactor-http-nio-5] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.446 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.446 DEBUG 12856 --- [reactor-http-nio-7] reactor.netty.channel.BootstrapHandlers  : [id: 0x82e78707, L:/10.5.0.2:8080 - R:/10.5.0.2:57386] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.447 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : [1819a00c] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.447 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.447 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x82e78707, L:/10.5.0.2:8080 - R:/10.5.0.2:57386] Increasing pending responses, now 1
2019-07-08 09:27:14.447 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.447 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.447 DEBUG 12856 --- [reactor-http-nio-7] reactor.netty.http.server.HttpServer     : [id: 0x82e78707, L:/10.5.0.2:8080 - R:/10.5.0.2:57386] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.447 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 48 bytes, 8 commands in the stack
2019-07-08 09:27:14.447 DEBUG 12856 --- [reactor-http-nio-7] o.s.w.s.adapter.HttpWebHandlerAdapter    : [82e78707] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.447 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.447 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.447 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.447 DEBUG 12856 --- [reactor-http-nio-6] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.447 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.447 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.447 DEBUG 12856 --- [reactor-http-nio-6] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.447 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : [82e78707] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.447 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.447 DEBUG 12856 --- [reactor-http-nio-6] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.447 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.447 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [137c85ba] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.448 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x137c85ba, L:/10.5.0.2:8080 - R:/10.5.0.2:57377] Last HTTP response frame
2019-07-08 09:27:14.448 DEBUG 12856 --- [reactor-http-nio-7] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.448 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x137c85ba, L:/10.5.0.2:8080 - R:/10.5.0.2:57377] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.448 DEBUG 12856 --- [reactor-http-nio-7] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.448 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.448 DEBUG 12856 --- [reactor-http-nio-7] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.448 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x137c85ba, L:/10.5.0.2:8080 - R:/10.5.0.2:57377] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.448 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.448 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x137c85ba, L:/10.5.0.2:8080 - R:/10.5.0.2:57377] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.448 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.448 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.448 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [7f27f37f] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.448 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x7f27f37f, L:/10.5.0.2:8080 - R:/10.5.0.2:57378] Last HTTP response frame
2019-07-08 09:27:14.448 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x7f27f37f, L:/10.5.0.2:8080 - R:/10.5.0.2:57378] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.448 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.448 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x7f27f37f, L:/10.5.0.2:8080 - R:/10.5.0.2:57378] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.448 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.448 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x8b5c576a, L:/10.5.0.2:8080 - R:/10.5.0.2:57387] New http connection, requesting read
2019-07-08 09:27:14.448 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x7f27f37f, L:/10.5.0.2:8080 - R:/10.5.0.2:57378] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.448 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.448 DEBUG 12856 --- [reactor-http-nio-8] reactor.netty.channel.BootstrapHandlers  : [id: 0x8b5c576a, L:/10.5.0.2:8080 - R:/10.5.0.2:57387] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.448 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.448 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x8b5c576a, L:/10.5.0.2:8080 - R:/10.5.0.2:57387] Increasing pending responses, now 1
2019-07-08 09:27:14.448 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [8bc26fa1] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.448 DEBUG 12856 --- [reactor-http-nio-8] reactor.netty.http.server.HttpServer     : [id: 0x8b5c576a, L:/10.5.0.2:8080 - R:/10.5.0.2:57387] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.449 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x8bc26fa1, L:/10.5.0.2:8080 - R:/10.5.0.2:57379] Last HTTP response frame
2019-07-08 09:27:14.449 DEBUG 12856 --- [reactor-http-nio-8] o.s.w.s.adapter.HttpWebHandlerAdapter    : [8b5c576a] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.448 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x5762fa11, L:/10.5.0.2:8080 - R:/10.5.0.2:57388] New http connection, requesting read
2019-07-08 09:27:14.449 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.449 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x8bc26fa1, L:/10.5.0.2:8080 - R:/10.5.0.2:57379] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.449 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.449 DEBUG 12856 --- [reactor-http-nio-9] reactor.netty.channel.BootstrapHandlers  : [id: 0x5762fa11, L:/10.5.0.2:8080 - R:/10.5.0.2:57388] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.449 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.449 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x5762fa11, L:/10.5.0.2:8080 - R:/10.5.0.2:57388] Increasing pending responses, now 1
2019-07-08 09:27:14.449 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x8bc26fa1, L:/10.5.0.2:8080 - R:/10.5.0.2:57379] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.449 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : [8b5c576a] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.449 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.449 DEBUG 12856 --- [reactor-http-nio-9] reactor.netty.http.server.HttpServer     : [id: 0x5762fa11, L:/10.5.0.2:8080 - R:/10.5.0.2:57388] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.449 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x8bc26fa1, L:/10.5.0.2:8080 - R:/10.5.0.2:57379] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.449 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.449 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.449 DEBUG 12856 --- [reactor-http-nio-9] o.s.w.s.adapter.HttpWebHandlerAdapter    : [5762fa11] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.449 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.449 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x2b87bed0, L:/10.5.0.2:8080 - R:/10.5.0.2:57389] New http connection, requesting read
2019-07-08 09:27:14.449 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.449 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [fa2f8a8c] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.449 DEBUG 12856 --- [reactor-http-nio-10] reactor.netty.channel.BootstrapHandlers  : [id: 0x2b87bed0, L:/10.5.0.2:8080 - R:/10.5.0.2:57389] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.449 DEBUG 12856 --- [reactor-http-nio-8] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.450 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.450 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xfa2f8a8c, L:/10.5.0.2:8080 - R:/10.5.0.2:57380] Last HTTP response frame
2019-07-08 09:27:14.450 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x2b87bed0, L:/10.5.0.2:8080 - R:/10.5.0.2:57389] Increasing pending responses, now 1
2019-07-08 09:27:14.450 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xfa2f8a8c, L:/10.5.0.2:8080 - R:/10.5.0.2:57380] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.450 DEBUG 12856 --- [reactor-http-nio-10] reactor.netty.http.server.HttpServer     : [id: 0x2b87bed0, L:/10.5.0.2:8080 - R:/10.5.0.2:57389] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.450 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0xfa2f8a8c, L:/10.5.0.2:8080 - R:/10.5.0.2:57380] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.450 DEBUG 12856 --- [reactor-http-nio-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [2b87bed0] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.450 DEBUG 12856 --- [reactor-http-nio-8] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.450 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : [5762fa11] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.450 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.450 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.450 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0xfa2f8a8c, L:/10.5.0.2:8080 - R:/10.5.0.2:57380] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.450 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.450 DEBUG 12856 --- [reactor-http-nio-8] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.450 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.451 DEBUG 12856 --- [reactor-http-nio-9] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.450 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.451 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.451 DEBUG 12856 --- [reactor-http-nio-9] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.451 DEBUG 12856 --- [reactor-http-nio-9] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.451 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x5b3a2cb2, L:/10.5.0.2:8080 - R:/10.5.0.2:57390] New http connection, requesting read
2019-07-08 09:27:14.451 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : [2b87bed0] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.451 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.451 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.451 DEBUG 12856 --- [reactor-http-nio-11] reactor.netty.channel.BootstrapHandlers  : [id: 0x5b3a2cb2, L:/10.5.0.2:8080 - R:/10.5.0.2:57390] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.451 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.451 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x5b3a2cb2, L:/10.5.0.2:8080 - R:/10.5.0.2:57390] Increasing pending responses, now 1
2019-07-08 09:27:14.451 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.451 DEBUG 12856 --- [reactor-http-nio-11] reactor.netty.http.server.HttpServer     : [id: 0x5b3a2cb2, L:/10.5.0.2:8080 - R:/10.5.0.2:57390] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.451 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.451 DEBUG 12856 --- [reactor-http-nio-10] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.451 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.451 DEBUG 12856 --- [reactor-http-nio-10] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.451 DEBUG 12856 --- [reactor-http-nio-11] o.s.w.s.adapter.HttpWebHandlerAdapter    : [5b3a2cb2] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.452 DEBUG 12856 --- [reactor-http-nio-10] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.451 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 48 bytes, 8 commands in the stack
2019-07-08 09:27:14.452 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.452 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.452 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.452 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.452 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : [5b3a2cb2] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.452 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.452 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.452 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.452 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [460bd781] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.452 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x460bd781, L:/10.5.0.2:8080 - R:/10.5.0.2:57381] Last HTTP response frame
2019-07-08 09:27:14.452 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x460bd781, L:/10.5.0.2:8080 - R:/10.5.0.2:57381] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.452 DEBUG 12856 --- [reactor-http-nio-11] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.452 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.452 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x460bd781, L:/10.5.0.2:8080 - R:/10.5.0.2:57381] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.452 DEBUG 12856 --- [reactor-http-nio-11] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.452 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.452 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x460bd781, L:/10.5.0.2:8080 - R:/10.5.0.2:57381] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.452 DEBUG 12856 --- [reactor-http-nio-11] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.452 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.453 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.453 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [0bd1ff72] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.453 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x0bd1ff72, L:/10.5.0.2:8080 - R:/10.5.0.2:57382] Last HTTP response frame
2019-07-08 09:27:14.453 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x2c20fb08, L:/10.5.0.2:8080 - R:/10.5.0.2:57391] New http connection, requesting read
2019-07-08 09:27:14.453 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x0bd1ff72, L:/10.5.0.2:8080 - R:/10.5.0.2:57382] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.453 DEBUG 12856 --- [reactor-http-nio-12] reactor.netty.channel.BootstrapHandlers  : [id: 0x2c20fb08, L:/10.5.0.2:8080 - R:/10.5.0.2:57391] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.453 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.453 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x0bd1ff72, L:/10.5.0.2:8080 - R:/10.5.0.2:57382] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.453 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x2c20fb08, L:/10.5.0.2:8080 - R:/10.5.0.2:57391] Increasing pending responses, now 1
2019-07-08 09:27:14.453 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.453 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x0bd1ff72, L:/10.5.0.2:8080 - R:/10.5.0.2:57382] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.453 DEBUG 12856 --- [reactor-http-nio-12] reactor.netty.http.server.HttpServer     : [id: 0x2c20fb08, L:/10.5.0.2:8080 - R:/10.5.0.2:57391] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.453 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.453 DEBUG 12856 --- [reactor-http-nio-12] o.s.w.s.adapter.HttpWebHandlerAdapter    : [2c20fb08] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.453 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.453 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.453 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [b854afd1] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.453 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0xfc91fc03, L:/10.5.0.2:8080 - R:/10.5.0.2:57392] New http connection, requesting read
2019-07-08 09:27:14.453 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.453 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xb854afd1, L:/10.5.0.2:8080 - R:/10.5.0.2:57383] Last HTTP response frame
2019-07-08 09:27:14.453 DEBUG 12856 --- [reactor-http-nio-13] reactor.netty.channel.BootstrapHandlers  : [id: 0xfc91fc03, L:/10.5.0.2:8080 - R:/10.5.0.2:57392] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.454 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : [2c20fb08] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.454 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xb854afd1, L:/10.5.0.2:8080 - R:/10.5.0.2:57383] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.454 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0xfc91fc03, L:/10.5.0.2:8080 - R:/10.5.0.2:57392] Increasing pending responses, now 1
2019-07-08 09:27:14.454 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0xb854afd1, L:/10.5.0.2:8080 - R:/10.5.0.2:57383] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.454 DEBUG 12856 --- [reactor-http-nio-13] reactor.netty.http.server.HttpServer     : [id: 0xfc91fc03, L:/10.5.0.2:8080 - R:/10.5.0.2:57392] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.454 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.454 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.454 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0xb854afd1, L:/10.5.0.2:8080 - R:/10.5.0.2:57383] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.454 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.454 DEBUG 12856 --- [reactor-http-nio-13] o.s.w.s.adapter.HttpWebHandlerAdapter    : [fc91fc03] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.454 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.454 DEBUG 12856 --- [reactor-http-nio-12] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.454 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.454 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0xdd5e8e03, L:/10.5.0.2:8080 - R:/10.5.0.2:57393] New http connection, requesting read
2019-07-08 09:27:14.454 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.454 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.455 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : [fc91fc03] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.454 DEBUG 12856 --- [reactor-http-nio-12] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.454 DEBUG 12856 --- [reactor-http-nio-14] reactor.netty.channel.BootstrapHandlers  : [id: 0xdd5e8e03, L:/10.5.0.2:8080 - R:/10.5.0.2:57393] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.455 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [55c1a257] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.455 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.455 DEBUG 12856 --- [reactor-http-nio-12] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.455 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x55c1a257, L:/10.5.0.2:8080 - R:/10.5.0.2:57384] Last HTTP response frame
2019-07-08 09:27:14.455 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0xdd5e8e03, L:/10.5.0.2:8080 - R:/10.5.0.2:57393] Increasing pending responses, now 1
2019-07-08 09:27:14.455 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x55c1a257, L:/10.5.0.2:8080 - R:/10.5.0.2:57384] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.455 DEBUG 12856 --- [reactor-http-nio-14] reactor.netty.http.server.HttpServer     : [id: 0xdd5e8e03, L:/10.5.0.2:8080 - R:/10.5.0.2:57393] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.455 DEBUG 12856 --- [reactor-http-nio-13] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.455 DEBUG 12856 --- [reactor-http-nio-14] o.s.w.s.adapter.HttpWebHandlerAdapter    : [dd5e8e03] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.455 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.455 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.455 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x55c1a257, L:/10.5.0.2:8080 - R:/10.5.0.2:57384] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.455 DEBUG 12856 --- [reactor-http-nio-13] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.455 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.455 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.456 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x55c1a257, L:/10.5.0.2:8080 - R:/10.5.0.2:57384] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.456 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : [dd5e8e03] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.456 DEBUG 12856 --- [reactor-http-nio-13] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.456 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.456 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.456 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.456 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0xa9b8af34, L:/10.5.0.2:8080 - R:/10.5.0.2:57394] New http connection, requesting read
2019-07-08 09:27:14.456 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.456 DEBUG 12856 --- [reactor-http-nio-15] reactor.netty.channel.BootstrapHandlers  : [id: 0xa9b8af34, L:/10.5.0.2:8080 - R:/10.5.0.2:57394] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.456 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.456 DEBUG 12856 --- [reactor-http-nio-14] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.456 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0xa9b8af34, L:/10.5.0.2:8080 - R:/10.5.0.2:57394] Increasing pending responses, now 1
2019-07-08 09:27:14.456 DEBUG 12856 --- [reactor-http-nio-14] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.456 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.456 DEBUG 12856 --- [reactor-http-nio-15] reactor.netty.http.server.HttpServer     : [id: 0xa9b8af34, L:/10.5.0.2:8080 - R:/10.5.0.2:57394] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.456 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.456 DEBUG 12856 --- [reactor-http-nio-14] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.456 DEBUG 12856 --- [reactor-http-nio-15] o.s.w.s.adapter.HttpWebHandlerAdapter    : [a9b8af34] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.456 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.457 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.457 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.457 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.457 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 48 bytes, 9 commands in the stack
2019-07-08 09:27:14.457 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : [a9b8af34] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.457 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 9 commands
2019-07-08 09:27:14.457 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.457 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.457 DEBUG 12856 --- [reactor-http-nio-15] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.457 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.457 DEBUG 12856 --- [reactor-http-nio-15] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.457 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.457 DEBUG 12856 --- [reactor-http-nio-15] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.458 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [1819a00c] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.458 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x1819a00c, L:/10.5.0.2:8080 - R:/10.5.0.2:57385] Last HTTP response frame
2019-07-08 09:27:14.458 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x1819a00c, L:/10.5.0.2:8080 - R:/10.5.0.2:57385] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.458 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.458 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x1819a00c, L:/10.5.0.2:8080 - R:/10.5.0.2:57385] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.458 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.458 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x1819a00c, L:/10.5.0.2:8080 - R:/10.5.0.2:57385] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.458 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.458 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.458 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [82e78707] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.458 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x82e78707, L:/10.5.0.2:8080 - R:/10.5.0.2:57386] Last HTTP response frame
2019-07-08 09:27:14.458 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x82e78707, L:/10.5.0.2:8080 - R:/10.5.0.2:57386] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.458 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x0cce7474, L:/10.5.0.2:8080 - R:/10.5.0.2:57395] New http connection, requesting read
2019-07-08 09:27:14.458 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.458 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x82e78707, L:/10.5.0.2:8080 - R:/10.5.0.2:57386] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.458 DEBUG 12856 --- [reactor-http-nio-16] reactor.netty.channel.BootstrapHandlers  : [id: 0x0cce7474, L:/10.5.0.2:8080 - R:/10.5.0.2:57395] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.458 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.458 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x82e78707, L:/10.5.0.2:8080 - R:/10.5.0.2:57386] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.458 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x0cce7474, L:/10.5.0.2:8080 - R:/10.5.0.2:57395] Increasing pending responses, now 1
2019-07-08 09:27:14.458 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.458 DEBUG 12856 --- [reactor-http-nio-16] reactor.netty.http.server.HttpServer     : [id: 0x0cce7474, L:/10.5.0.2:8080 - R:/10.5.0.2:57395] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.459 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.459 DEBUG 12856 --- [reactor-http-nio-16] o.s.w.s.adapter.HttpWebHandlerAdapter    : [0cce7474] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.459 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x1230ba3a, L:/10.5.0.2:8080 - R:/10.5.0.2:57396] New http connection, requesting read
2019-07-08 09:27:14.459 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [8b5c576a] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.459 DEBUG 12856 --- [reactor-http-nio-1] reactor.netty.channel.BootstrapHandlers  : [id: 0x1230ba3a, L:/10.5.0.2:8080 - R:/10.5.0.2:57396] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.459 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.459 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x8b5c576a, L:/10.5.0.2:8080 - R:/10.5.0.2:57387] Last HTTP response frame
2019-07-08 09:27:14.459 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x1230ba3a, L:/10.5.0.2:8080 - R:/10.5.0.2:57396] Increasing pending responses, now 1
2019-07-08 09:27:14.459 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.459 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x8b5c576a, L:/10.5.0.2:8080 - R:/10.5.0.2:57387] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.459 DEBUG 12856 --- [reactor-http-nio-1] reactor.netty.http.server.HttpServer     : [id: 0x1230ba3a, L:/10.5.0.2:8080 - R:/10.5.0.2:57396] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.459 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.459 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : [0cce7474] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.459 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x8b5c576a, L:/10.5.0.2:8080 - R:/10.5.0.2:57387] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.459 DEBUG 12856 --- [reactor-http-nio-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [1230ba3a] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.459 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.459 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.459 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.459 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x8b5c576a, L:/10.5.0.2:8080 - R:/10.5.0.2:57387] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.459 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.459 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.460 DEBUG 12856 --- [reactor-http-nio-16] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.460 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.460 DEBUG 12856 --- [reactor-http-nio-16] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.460 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [5762fa11] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.460 DEBUG 12856 --- [reactor-http-nio-16] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.460 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : [1230ba3a] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.460 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x5762fa11, L:/10.5.0.2:8080 - R:/10.5.0.2:57388] Last HTTP response frame
2019-07-08 09:27:14.460 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x5762fa11, L:/10.5.0.2:8080 - R:/10.5.0.2:57388] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.460 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.460 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.460 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x5762fa11, L:/10.5.0.2:8080 - R:/10.5.0.2:57388] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.461 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.461 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x5762fa11, L:/10.5.0.2:8080 - R:/10.5.0.2:57388] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.461 DEBUG 12856 --- [reactor-http-nio-1] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.461 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.461 DEBUG 12856 --- [reactor-http-nio-1] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.461 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.461 DEBUG 12856 --- [reactor-http-nio-1] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.461 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.461 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.461 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0xdf79ed19, L:/10.5.0.2:8080 - R:/10.5.0.2:57397] New http connection, requesting read
2019-07-08 09:27:14.461 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x95f587a9, L:/10.5.0.2:8080 - R:/10.5.0.2:57398] New http connection, requesting read
2019-07-08 09:27:14.461 DEBUG 12856 --- [reactor-http-nio-2] reactor.netty.channel.BootstrapHandlers  : [id: 0xdf79ed19, L:/10.5.0.2:8080 - R:/10.5.0.2:57397] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.461 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 60 bytes, 8 commands in the stack
2019-07-08 09:27:14.461 DEBUG 12856 --- [reactor-http-nio-3] reactor.netty.channel.BootstrapHandlers  : [id: 0x95f587a9, L:/10.5.0.2:8080 - R:/10.5.0.2:57398] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.461 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0xdf79ed19, L:/10.5.0.2:8080 - R:/10.5.0.2:57397] Increasing pending responses, now 1
2019-07-08 09:27:14.461 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.462 DEBUG 12856 --- [reactor-http-nio-2] reactor.netty.http.server.HttpServer     : [id: 0xdf79ed19, L:/10.5.0.2:8080 - R:/10.5.0.2:57397] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.462 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.462 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x95f587a9, L:/10.5.0.2:8080 - R:/10.5.0.2:57398] Increasing pending responses, now 1
2019-07-08 09:27:14.462 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.462 DEBUG 12856 --- [reactor-http-nio-3] reactor.netty.http.server.HttpServer     : [id: 0x95f587a9, L:/10.5.0.2:8080 - R:/10.5.0.2:57398] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.462 DEBUG 12856 --- [reactor-http-nio-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [95f587a9] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.462 DEBUG 12856 --- [reactor-http-nio-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [df79ed19] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.462 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.462 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.462 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.462 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.462 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [2b87bed0] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.462 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : [95f587a9] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.462 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x2b87bed0, L:/10.5.0.2:8080 - R:/10.5.0.2:57389] Last HTTP response frame
2019-07-08 09:27:14.462 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.462 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.462 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x2b87bed0, L:/10.5.0.2:8080 - R:/10.5.0.2:57389] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.463 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : [df79ed19] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.463 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.463 DEBUG 12856 --- [reactor-http-nio-3] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.463 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x2b87bed0, L:/10.5.0.2:8080 - R:/10.5.0.2:57389] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.463 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.463 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.463 DEBUG 12856 --- [reactor-http-nio-3] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.464 DEBUG 12856 --- [reactor-http-nio-3] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.464 DEBUG 12856 --- [reactor-http-nio-2] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.463 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x2b87bed0, L:/10.5.0.2:8080 - R:/10.5.0.2:57389] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.464 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.464 DEBUG 12856 --- [reactor-http-nio-2] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.464 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.464 DEBUG 12856 --- [reactor-http-nio-2] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.464 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [5b3a2cb2] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.464 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x5b3a2cb2, L:/10.5.0.2:8080 - R:/10.5.0.2:57390] Last HTTP response frame
2019-07-08 09:27:14.464 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x5b3a2cb2, L:/10.5.0.2:8080 - R:/10.5.0.2:57390] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.464 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x49892b09, L:/10.5.0.2:8080 - R:/10.5.0.2:57399] New http connection, requesting read
2019-07-08 09:27:14.464 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x5b3a2cb2, L:/10.5.0.2:8080 - R:/10.5.0.2:57390] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.464 DEBUG 12856 --- [reactor-http-nio-4] reactor.netty.channel.BootstrapHandlers  : [id: 0x49892b09, L:/10.5.0.2:8080 - R:/10.5.0.2:57399] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.464 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.464 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x5b3a2cb2, L:/10.5.0.2:8080 - R:/10.5.0.2:57390] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.464 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x49892b09, L:/10.5.0.2:8080 - R:/10.5.0.2:57399] Increasing pending responses, now 1
2019-07-08 09:27:14.464 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.464 DEBUG 12856 --- [reactor-http-nio-4] reactor.netty.http.server.HttpServer     : [id: 0x49892b09, L:/10.5.0.2:8080 - R:/10.5.0.2:57399] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.464 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.464 DEBUG 12856 --- [reactor-http-nio-4] o.s.w.s.adapter.HttpWebHandlerAdapter    : [49892b09] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.464 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.464 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x77a0f0b6, L:/10.5.0.2:8080 - R:/10.5.0.2:57400] New http connection, requesting read
2019-07-08 09:27:14.465 DEBUG 12856 --- [reactor-http-nio-5] reactor.netty.channel.BootstrapHandlers  : [id: 0x77a0f0b6, L:/10.5.0.2:8080 - R:/10.5.0.2:57400] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.464 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.465 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x77a0f0b6, L:/10.5.0.2:8080 - R:/10.5.0.2:57400] Increasing pending responses, now 1
2019-07-08 09:27:14.465 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.465 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : [49892b09] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.465 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.464 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [2c20fb08] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.465 DEBUG 12856 --- [reactor-http-nio-5] reactor.netty.http.server.HttpServer     : [id: 0x77a0f0b6, L:/10.5.0.2:8080 - R:/10.5.0.2:57400] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.465 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x2c20fb08, L:/10.5.0.2:8080 - R:/10.5.0.2:57391] Last HTTP response frame
2019-07-08 09:27:14.465 DEBUG 12856 --- [reactor-http-nio-5] o.s.w.s.adapter.HttpWebHandlerAdapter    : [77a0f0b6] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.465 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x2c20fb08, L:/10.5.0.2:8080 - R:/10.5.0.2:57391] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.465 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.465 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.465 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x2c20fb08, L:/10.5.0.2:8080 - R:/10.5.0.2:57391] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.465 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x2c20fb08, L:/10.5.0.2:8080 - R:/10.5.0.2:57391] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.465 DEBUG 12856 --- [reactor-http-nio-4] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.465 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.465 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : [77a0f0b6] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.465 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.465 DEBUG 12856 --- [reactor-http-nio-4] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.465 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.465 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.465 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x74706ba1, L:/10.5.0.2:8080 - R:/10.5.0.2:57401] New http connection, requesting read
2019-07-08 09:27:14.466 DEBUG 12856 --- [reactor-http-nio-5] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.465 DEBUG 12856 --- [reactor-http-nio-4] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.466 DEBUG 12856 --- [reactor-http-nio-5] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.466 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.466 DEBUG 12856 --- [reactor-http-nio-6] reactor.netty.channel.BootstrapHandlers  : [id: 0x74706ba1, L:/10.5.0.2:8080 - R:/10.5.0.2:57401] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.466 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x74706ba1, L:/10.5.0.2:8080 - R:/10.5.0.2:57401] Increasing pending responses, now 1
2019-07-08 09:27:14.466 DEBUG 12856 --- [reactor-http-nio-6] reactor.netty.http.server.HttpServer     : [id: 0x74706ba1, L:/10.5.0.2:8080 - R:/10.5.0.2:57401] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.466 DEBUG 12856 --- [reactor-http-nio-6] o.s.w.s.adapter.HttpWebHandlerAdapter    : [74706ba1] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.466 DEBUG 12856 --- [reactor-http-nio-5] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.466 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.466 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [fc91fc03] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.466 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.466 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : [74706ba1] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.466 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.466 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xfc91fc03, L:/10.5.0.2:8080 - R:/10.5.0.2:57392] Last HTTP response frame
2019-07-08 09:27:14.466 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xfc91fc03, L:/10.5.0.2:8080 - R:/10.5.0.2:57392] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.466 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 4 commands
2019-07-08 09:27:14.466 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0xfc91fc03, L:/10.5.0.2:8080 - R:/10.5.0.2:57392] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.466 DEBUG 12856 --- [reactor-http-nio-6] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.478 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0xfc91fc03, L:/10.5.0.2:8080 - R:/10.5.0.2:57392] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.478 DEBUG 12856 --- [reactor-http-nio-6] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.466 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.478 DEBUG 12856 --- [reactor-http-nio-6] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.478 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.478 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.478 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [dd5e8e03] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.478 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xdd5e8e03, L:/10.5.0.2:8080 - R:/10.5.0.2:57393] Last HTTP response frame
2019-07-08 09:27:14.478 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xdd5e8e03, L:/10.5.0.2:8080 - R:/10.5.0.2:57393] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.478 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x40680298, L:/10.5.0.2:8080 - R:/10.5.0.2:57402] New http connection, requesting read
2019-07-08 09:27:14.478 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0xdd5e8e03, L:/10.5.0.2:8080 - R:/10.5.0.2:57393] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.478 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0xdd5e8e03, L:/10.5.0.2:8080 - R:/10.5.0.2:57393] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.478 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.478 DEBUG 12856 --- [reactor-http-nio-7] reactor.netty.channel.BootstrapHandlers  : [id: 0x40680298, L:/10.5.0.2:8080 - R:/10.5.0.2:57402] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.478 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.479 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x40680298, L:/10.5.0.2:8080 - R:/10.5.0.2:57402] Increasing pending responses, now 1
2019-07-08 09:27:14.479 DEBUG 12856 --- [reactor-http-nio-7] reactor.netty.http.server.HttpServer     : [id: 0x40680298, L:/10.5.0.2:8080 - R:/10.5.0.2:57402] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.479 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.479 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x54a23b73, L:/10.5.0.2:8080 - R:/10.5.0.2:57403] New http connection, requesting read
2019-07-08 09:27:14.479 DEBUG 12856 --- [reactor-http-nio-8] reactor.netty.channel.BootstrapHandlers  : [id: 0x54a23b73, L:/10.5.0.2:8080 - R:/10.5.0.2:57403] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.479 DEBUG 12856 --- [reactor-http-nio-7] o.s.w.s.adapter.HttpWebHandlerAdapter    : [40680298] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.479 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x54a23b73, L:/10.5.0.2:8080 - R:/10.5.0.2:57403] Increasing pending responses, now 1
2019-07-08 09:27:14.479 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.479 DEBUG 12856 --- [reactor-http-nio-8] reactor.netty.http.server.HttpServer     : [id: 0x54a23b73, L:/10.5.0.2:8080 - R:/10.5.0.2:57403] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.479 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.479 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.479 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : [40680298] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.479 DEBUG 12856 --- [reactor-http-nio-8] o.s.w.s.adapter.HttpWebHandlerAdapter    : [54a23b73] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.479 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.479 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.479 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.479 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.479 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.479 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.479 DEBUG 12856 --- [reactor-http-nio-7] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.479 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : [54a23b73] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.480 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.480 DEBUG 12856 --- [reactor-http-nio-7] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.480 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.480 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.480 DEBUG 12856 --- [reactor-http-nio-7] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.480 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.480 DEBUG 12856 --- [reactor-http-nio-8] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.480 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.480 DEBUG 12856 --- [reactor-http-nio-8] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.480 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.480 DEBUG 12856 --- [reactor-http-nio-8] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.480 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.480 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.480 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 36 bytes, 10 commands in the stack
2019-07-08 09:27:14.480 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 10 commands
2019-07-08 09:27:14.480 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.480 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.480 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.480 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [a9b8af34] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.480 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xa9b8af34, L:/10.5.0.2:8080 - R:/10.5.0.2:57394] Last HTTP response frame
2019-07-08 09:27:14.480 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xa9b8af34, L:/10.5.0.2:8080 - R:/10.5.0.2:57394] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.481 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 9 commands
2019-07-08 09:27:14.481 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0xa9b8af34, L:/10.5.0.2:8080 - R:/10.5.0.2:57394] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.481 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.481 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0xa9b8af34, L:/10.5.0.2:8080 - R:/10.5.0.2:57394] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.481 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.481 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.481 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [0cce7474] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.481 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x0cce7474, L:/10.5.0.2:8080 - R:/10.5.0.2:57395] Last HTTP response frame
2019-07-08 09:27:14.481 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x0cce7474, L:/10.5.0.2:8080 - R:/10.5.0.2:57395] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.481 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.481 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x0cce7474, L:/10.5.0.2:8080 - R:/10.5.0.2:57395] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.481 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.481 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0xcac9527b, L:/10.5.0.2:8080 - R:/10.5.0.2:57404] New http connection, requesting read
2019-07-08 09:27:14.481 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.481 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x0cce7474, L:/10.5.0.2:8080 - R:/10.5.0.2:57395] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.481 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.481 DEBUG 12856 --- [reactor-http-nio-9] reactor.netty.channel.BootstrapHandlers  : [id: 0xcac9527b, L:/10.5.0.2:8080 - R:/10.5.0.2:57404] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.481 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [1230ba3a] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.481 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0xcac9527b, L:/10.5.0.2:8080 - R:/10.5.0.2:57404] Increasing pending responses, now 1
2019-07-08 09:27:14.481 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x63111f51, L:/10.5.0.2:8080 - R:/10.5.0.2:57405] New http connection, requesting read
2019-07-08 09:27:14.481 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x1230ba3a, L:/10.5.0.2:8080 - R:/10.5.0.2:57396] Last HTTP response frame
2019-07-08 09:27:14.481 DEBUG 12856 --- [reactor-http-nio-9] reactor.netty.http.server.HttpServer     : [id: 0xcac9527b, L:/10.5.0.2:8080 - R:/10.5.0.2:57404] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.481 DEBUG 12856 --- [reactor-http-nio-10] reactor.netty.channel.BootstrapHandlers  : [id: 0x63111f51, L:/10.5.0.2:8080 - R:/10.5.0.2:57405] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.481 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x1230ba3a, L:/10.5.0.2:8080 - R:/10.5.0.2:57396] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.481 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x63111f51, L:/10.5.0.2:8080 - R:/10.5.0.2:57405] Increasing pending responses, now 1
2019-07-08 09:27:14.481 DEBUG 12856 --- [reactor-http-nio-9] o.s.w.s.adapter.HttpWebHandlerAdapter    : [cac9527b] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.482 DEBUG 12856 --- [reactor-http-nio-10] reactor.netty.http.server.HttpServer     : [id: 0x63111f51, L:/10.5.0.2:8080 - R:/10.5.0.2:57405] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.482 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x1230ba3a, L:/10.5.0.2:8080 - R:/10.5.0.2:57396] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.482 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 36 bytes, 7 commands in the stack
2019-07-08 09:27:14.482 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x1230ba3a, L:/10.5.0.2:8080 - R:/10.5.0.2:57396] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.482 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.482 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.482 DEBUG 12856 --- [reactor-http-nio-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [63111f51] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.482 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.482 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.482 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : [cac9527b] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.482 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.482 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.482 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.482 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.482 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x305f12ac, L:/10.5.0.2:8080 - R:/10.5.0.2:57406] New http connection, requesting read
2019-07-08 09:27:14.482 DEBUG 12856 --- [reactor-http-nio-9] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.482 DEBUG 12856 --- [reactor-http-nio-11] reactor.netty.channel.BootstrapHandlers  : [id: 0x305f12ac, L:/10.5.0.2:8080 - R:/10.5.0.2:57406] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.482 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.482 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : [63111f51] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.482 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [95f587a9] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.482 DEBUG 12856 --- [reactor-http-nio-9] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.482 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x305f12ac, L:/10.5.0.2:8080 - R:/10.5.0.2:57406] Increasing pending responses, now 1
2019-07-08 09:27:14.482 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.482 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x95f587a9, L:/10.5.0.2:8080 - R:/10.5.0.2:57398] Last HTTP response frame
2019-07-08 09:27:14.482 DEBUG 12856 --- [reactor-http-nio-9] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.483 DEBUG 12856 --- [reactor-http-nio-11] reactor.netty.http.server.HttpServer     : [id: 0x305f12ac, L:/10.5.0.2:8080 - R:/10.5.0.2:57406] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.483 DEBUG 12856 --- [reactor-http-nio-10] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.483 DEBUG 12856 --- [reactor-http-nio-11] o.s.w.s.adapter.HttpWebHandlerAdapter    : [305f12ac] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.483 DEBUG 12856 --- [reactor-http-nio-10] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.483 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.483 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x95f587a9, L:/10.5.0.2:8080 - R:/10.5.0.2:57398] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.483 DEBUG 12856 --- [reactor-http-nio-10] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.483 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x95f587a9, L:/10.5.0.2:8080 - R:/10.5.0.2:57398] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.483 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.483 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : [305f12ac] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.483 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.483 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.483 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x95f587a9, L:/10.5.0.2:8080 - R:/10.5.0.2:57398] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.483 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.483 DEBUG 12856 --- [reactor-http-nio-11] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.483 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.483 DEBUG 12856 --- [reactor-http-nio-11] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.483 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.483 DEBUG 12856 --- [reactor-http-nio-11] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.483 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x1b1d1118, L:/10.5.0.2:8080 - R:/10.5.0.2:57407] New http connection, requesting read
2019-07-08 09:27:14.483 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [df79ed19] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.483 DEBUG 12856 --- [reactor-http-nio-12] reactor.netty.channel.BootstrapHandlers  : [id: 0x1b1d1118, L:/10.5.0.2:8080 - R:/10.5.0.2:57407] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.483 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xdf79ed19, L:/10.5.0.2:8080 - R:/10.5.0.2:57397] Last HTTP response frame
2019-07-08 09:27:14.484 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x1b1d1118, L:/10.5.0.2:8080 - R:/10.5.0.2:57407] Increasing pending responses, now 1
2019-07-08 09:27:14.484 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xdf79ed19, L:/10.5.0.2:8080 - R:/10.5.0.2:57397] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.484 DEBUG 12856 --- [reactor-http-nio-12] reactor.netty.http.server.HttpServer     : [id: 0x1b1d1118, L:/10.5.0.2:8080 - R:/10.5.0.2:57407] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.484 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0xdf79ed19, L:/10.5.0.2:8080 - R:/10.5.0.2:57397] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.484 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.484 DEBUG 12856 --- [reactor-http-nio-12] o.s.w.s.adapter.HttpWebHandlerAdapter    : [1b1d1118] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.484 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.484 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.484 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0xdf79ed19, L:/10.5.0.2:8080 - R:/10.5.0.2:57397] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.484 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.484 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.484 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.484 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : [1b1d1118] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.484 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [49892b09] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.484 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.484 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x25559567, L:/10.5.0.2:8080 - R:/10.5.0.2:57408] New http connection, requesting read
2019-07-08 09:27:14.484 DEBUG 12856 --- [reactor-http-nio-13] reactor.netty.channel.BootstrapHandlers  : [id: 0x25559567, L:/10.5.0.2:8080 - R:/10.5.0.2:57408] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.484 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x49892b09, L:/10.5.0.2:8080 - R:/10.5.0.2:57399] Last HTTP response frame
2019-07-08 09:27:14.484 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x25559567, L:/10.5.0.2:8080 - R:/10.5.0.2:57408] Increasing pending responses, now 1
2019-07-08 09:27:14.484 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x49892b09, L:/10.5.0.2:8080 - R:/10.5.0.2:57399] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.484 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.484 DEBUG 12856 --- [reactor-http-nio-12] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.484 DEBUG 12856 --- [reactor-http-nio-13] reactor.netty.http.server.HttpServer     : [id: 0x25559567, L:/10.5.0.2:8080 - R:/10.5.0.2:57408] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.484 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x49892b09, L:/10.5.0.2:8080 - R:/10.5.0.2:57399] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.484 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x49892b09, L:/10.5.0.2:8080 - R:/10.5.0.2:57399] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.484 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.484 DEBUG 12856 --- [reactor-http-nio-12] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.484 DEBUG 12856 --- [reactor-http-nio-13] o.s.w.s.adapter.HttpWebHandlerAdapter    : [25559567] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.485 DEBUG 12856 --- [reactor-http-nio-12] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.485 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.484 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.485 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x77cf29c9, L:/10.5.0.2:8080 - R:/10.5.0.2:57409] New http connection, requesting read
2019-07-08 09:27:14.485 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.485 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.485 DEBUG 12856 --- [reactor-http-nio-14] reactor.netty.channel.BootstrapHandlers  : [id: 0x77cf29c9, L:/10.5.0.2:8080 - R:/10.5.0.2:57409] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.485 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.485 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : [25559567] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.485 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.485 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x77cf29c9, L:/10.5.0.2:8080 - R:/10.5.0.2:57409] Increasing pending responses, now 1
2019-07-08 09:27:14.485 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.485 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.485 DEBUG 12856 --- [reactor-http-nio-14] reactor.netty.http.server.HttpServer     : [id: 0x77cf29c9, L:/10.5.0.2:8080 - R:/10.5.0.2:57409] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.485 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.485 DEBUG 12856 --- [reactor-http-nio-14] o.s.w.s.adapter.HttpWebHandlerAdapter    : [77cf29c9] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.485 DEBUG 12856 --- [reactor-http-nio-13] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.485 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.485 DEBUG 12856 --- [reactor-http-nio-13] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.485 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 48 bytes, 8 commands in the stack
2019-07-08 09:27:14.485 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.485 DEBUG 12856 --- [reactor-http-nio-13] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.485 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.485 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : [77cf29c9] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.486 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.486 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.486 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.486 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.486 DEBUG 12856 --- [reactor-http-nio-14] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.486 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [77a0f0b6] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.486 DEBUG 12856 --- [reactor-http-nio-14] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.486 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x77a0f0b6, L:/10.5.0.2:8080 - R:/10.5.0.2:57400] Last HTTP response frame
2019-07-08 09:27:14.486 DEBUG 12856 --- [reactor-http-nio-14] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.486 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x77a0f0b6, L:/10.5.0.2:8080 - R:/10.5.0.2:57400] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.486 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.486 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x77a0f0b6, L:/10.5.0.2:8080 - R:/10.5.0.2:57400] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.486 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x77a0f0b6, L:/10.5.0.2:8080 - R:/10.5.0.2:57400] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.486 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.486 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.486 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.486 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [74706ba1] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.486 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x74706ba1, L:/10.5.0.2:8080 - R:/10.5.0.2:57401] Last HTTP response frame
2019-07-08 09:27:14.486 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x74706ba1, L:/10.5.0.2:8080 - R:/10.5.0.2:57401] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.486 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0xbf120388, L:/10.5.0.2:8080 - R:/10.5.0.2:57410] New http connection, requesting read
2019-07-08 09:27:14.486 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.486 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x74706ba1, L:/10.5.0.2:8080 - R:/10.5.0.2:57401] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.486 DEBUG 12856 --- [reactor-http-nio-15] reactor.netty.channel.BootstrapHandlers  : [id: 0xbf120388, L:/10.5.0.2:8080 - R:/10.5.0.2:57410] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.486 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.486 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x74706ba1, L:/10.5.0.2:8080 - R:/10.5.0.2:57401] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.487 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.487 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0xbf120388, L:/10.5.0.2:8080 - R:/10.5.0.2:57410] Increasing pending responses, now 1
2019-07-08 09:27:14.487 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.487 DEBUG 12856 --- [reactor-http-nio-15] reactor.netty.http.server.HttpServer     : [id: 0xbf120388, L:/10.5.0.2:8080 - R:/10.5.0.2:57410] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.487 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [40680298] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.487 DEBUG 12856 --- [reactor-http-nio-15] o.s.w.s.adapter.HttpWebHandlerAdapter    : [bf120388] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.487 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x40680298, L:/10.5.0.2:8080 - R:/10.5.0.2:57402] Last HTTP response frame
2019-07-08 09:27:14.487 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x42178985, L:/10.5.0.2:8080 - R:/10.5.0.2:57411] New http connection, requesting read
2019-07-08 09:27:14.487 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.487 DEBUG 12856 --- [reactor-http-nio-16] reactor.netty.channel.BootstrapHandlers  : [id: 0x42178985, L:/10.5.0.2:8080 - R:/10.5.0.2:57411] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.487 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x40680298, L:/10.5.0.2:8080 - R:/10.5.0.2:57402] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.487 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.487 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x42178985, L:/10.5.0.2:8080 - R:/10.5.0.2:57411] Increasing pending responses, now 1
2019-07-08 09:27:14.487 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.487 DEBUG 12856 --- [reactor-http-nio-16] reactor.netty.http.server.HttpServer     : [id: 0x42178985, L:/10.5.0.2:8080 - R:/10.5.0.2:57411] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.487 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x40680298, L:/10.5.0.2:8080 - R:/10.5.0.2:57402] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.487 DEBUG 12856 --- [reactor-http-nio-16] o.s.w.s.adapter.HttpWebHandlerAdapter    : [42178985] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.487 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : [bf120388] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.487 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.487 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.487 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x40680298, L:/10.5.0.2:8080 - R:/10.5.0.2:57402] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.487 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.487 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.487 DEBUG 12856 --- [reactor-http-nio-15] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.487 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.487 DEBUG 12856 --- [reactor-http-nio-15] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.487 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.487 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [54a23b73] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.488 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : [42178985] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.488 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x54a23b73, L:/10.5.0.2:8080 - R:/10.5.0.2:57403] Last HTTP response frame
2019-07-08 09:27:14.487 DEBUG 12856 --- [reactor-http-nio-15] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.487 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x7d31e7a1, L:/10.5.0.2:8080 - R:/10.5.0.2:57412] New http connection, requesting read
2019-07-08 09:27:14.488 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.488 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x54a23b73, L:/10.5.0.2:8080 - R:/10.5.0.2:57403] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.488 DEBUG 12856 --- [reactor-http-nio-1] reactor.netty.channel.BootstrapHandlers  : [id: 0x7d31e7a1, L:/10.5.0.2:8080 - R:/10.5.0.2:57412] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.488 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.488 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x7d31e7a1, L:/10.5.0.2:8080 - R:/10.5.0.2:57412] Increasing pending responses, now 1
2019-07-08 09:27:14.488 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x54a23b73, L:/10.5.0.2:8080 - R:/10.5.0.2:57403] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.488 DEBUG 12856 --- [reactor-http-nio-16] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.488 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x54a23b73, L:/10.5.0.2:8080 - R:/10.5.0.2:57403] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.488 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.488 DEBUG 12856 --- [reactor-http-nio-1] reactor.netty.http.server.HttpServer     : [id: 0x7d31e7a1, L:/10.5.0.2:8080 - R:/10.5.0.2:57412] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.488 DEBUG 12856 --- [reactor-http-nio-16] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.488 DEBUG 12856 --- [reactor-http-nio-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [7d31e7a1] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.488 DEBUG 12856 --- [reactor-http-nio-16] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.488 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.488 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.488 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.488 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.488 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.488 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : [7d31e7a1] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.488 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.488 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.488 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.489 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.489 DEBUG 12856 --- [reactor-http-nio-1] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.489 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 48 bytes, 8 commands in the stack
2019-07-08 09:27:14.489 DEBUG 12856 --- [reactor-http-nio-1] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.489 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.489 DEBUG 12856 --- [reactor-http-nio-1] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.489 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.489 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.489 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0xc6f4f298, L:/10.5.0.2:8080 - R:/10.5.0.2:57413] New http connection, requesting read
2019-07-08 09:27:14.489 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.489 DEBUG 12856 --- [reactor-http-nio-2] reactor.netty.channel.BootstrapHandlers  : [id: 0xc6f4f298, L:/10.5.0.2:8080 - R:/10.5.0.2:57413] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.489 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [cac9527b] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.489 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0xc6f4f298, L:/10.5.0.2:8080 - R:/10.5.0.2:57413] Increasing pending responses, now 1
2019-07-08 09:27:14.489 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xcac9527b, L:/10.5.0.2:8080 - R:/10.5.0.2:57404] Last HTTP response frame
2019-07-08 09:27:14.489 DEBUG 12856 --- [reactor-http-nio-2] reactor.netty.http.server.HttpServer     : [id: 0xc6f4f298, L:/10.5.0.2:8080 - R:/10.5.0.2:57413] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.489 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xcac9527b, L:/10.5.0.2:8080 - R:/10.5.0.2:57404] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.489 DEBUG 12856 --- [reactor-http-nio-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [c6f4f298] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.489 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.489 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0xcac9527b, L:/10.5.0.2:8080 - R:/10.5.0.2:57404] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.489 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.489 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0xcac9527b, L:/10.5.0.2:8080 - R:/10.5.0.2:57404] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.489 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.489 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.489 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : [c6f4f298] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.489 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.489 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0xc21c17ce, L:/10.5.0.2:8080 - R:/10.5.0.2:57414] New http connection, requesting read
2019-07-08 09:27:14.489 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.490 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.490 DEBUG 12856 --- [reactor-http-nio-3] reactor.netty.channel.BootstrapHandlers  : [id: 0xc21c17ce, L:/10.5.0.2:8080 - R:/10.5.0.2:57414] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.490 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [63111f51] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.490 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x63111f51, L:/10.5.0.2:8080 - R:/10.5.0.2:57405] Last HTTP response frame
2019-07-08 09:27:14.490 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0xc21c17ce, L:/10.5.0.2:8080 - R:/10.5.0.2:57414] Increasing pending responses, now 1
2019-07-08 09:27:14.490 DEBUG 12856 --- [reactor-http-nio-2] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.490 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x63111f51, L:/10.5.0.2:8080 - R:/10.5.0.2:57405] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.490 DEBUG 12856 --- [reactor-http-nio-3] reactor.netty.http.server.HttpServer     : [id: 0xc21c17ce, L:/10.5.0.2:8080 - R:/10.5.0.2:57414] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.490 DEBUG 12856 --- [reactor-http-nio-2] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.490 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.490 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x63111f51, L:/10.5.0.2:8080 - R:/10.5.0.2:57405] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.490 DEBUG 12856 --- [reactor-http-nio-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [c21c17ce] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.490 DEBUG 12856 --- [reactor-http-nio-2] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.490 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.490 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.490 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x63111f51, L:/10.5.0.2:8080 - R:/10.5.0.2:57405] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.490 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.490 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.490 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.490 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : [c21c17ce] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.490 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x4d19cb40, L:/10.5.0.2:8080 - R:/10.5.0.2:57415] New http connection, requesting read
2019-07-08 09:27:14.490 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [305f12ac] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.491 DEBUG 12856 --- [reactor-http-nio-4] reactor.netty.channel.BootstrapHandlers  : [id: 0x4d19cb40, L:/10.5.0.2:8080 - R:/10.5.0.2:57415] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.491 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.491 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x305f12ac, L:/10.5.0.2:8080 - R:/10.5.0.2:57406] Last HTTP response frame
2019-07-08 09:27:14.491 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x4d19cb40, L:/10.5.0.2:8080 - R:/10.5.0.2:57415] Increasing pending responses, now 1
2019-07-08 09:27:14.491 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x305f12ac, L:/10.5.0.2:8080 - R:/10.5.0.2:57406] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.491 DEBUG 12856 --- [reactor-http-nio-4] reactor.netty.http.server.HttpServer     : [id: 0x4d19cb40, L:/10.5.0.2:8080 - R:/10.5.0.2:57415] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.491 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.491 DEBUG 12856 --- [reactor-http-nio-4] o.s.w.s.adapter.HttpWebHandlerAdapter    : [4d19cb40] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.491 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x305f12ac, L:/10.5.0.2:8080 - R:/10.5.0.2:57406] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.491 DEBUG 12856 --- [reactor-http-nio-3] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.491 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.491 DEBUG 12856 --- [reactor-http-nio-3] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.491 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.491 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x305f12ac, L:/10.5.0.2:8080 - R:/10.5.0.2:57406] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.491 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.491 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.491 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : [4d19cb40] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.491 DEBUG 12856 --- [reactor-http-nio-3] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.491 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.491 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x2a8f8832, L:/10.5.0.2:8080 - R:/10.5.0.2:57416] New http connection, requesting read
2019-07-08 09:27:14.491 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [1b1d1118] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.491 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.491 DEBUG 12856 --- [reactor-http-nio-5] reactor.netty.channel.BootstrapHandlers  : [id: 0x2a8f8832, L:/10.5.0.2:8080 - R:/10.5.0.2:57416] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.491 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x1b1d1118, L:/10.5.0.2:8080 - R:/10.5.0.2:57407] Last HTTP response frame
2019-07-08 09:27:14.491 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x1b1d1118, L:/10.5.0.2:8080 - R:/10.5.0.2:57407] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.491 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x2a8f8832, L:/10.5.0.2:8080 - R:/10.5.0.2:57416] Increasing pending responses, now 1
2019-07-08 09:27:14.491 DEBUG 12856 --- [reactor-http-nio-4] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.492 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.492 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x1b1d1118, L:/10.5.0.2:8080 - R:/10.5.0.2:57407] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.492 DEBUG 12856 --- [reactor-http-nio-5] reactor.netty.http.server.HttpServer     : [id: 0x2a8f8832, L:/10.5.0.2:8080 - R:/10.5.0.2:57416] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.492 DEBUG 12856 --- [reactor-http-nio-4] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.492 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.492 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x1b1d1118, L:/10.5.0.2:8080 - R:/10.5.0.2:57407] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.492 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.492 DEBUG 12856 --- [reactor-http-nio-5] o.s.w.s.adapter.HttpWebHandlerAdapter    : [2a8f8832] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.492 DEBUG 12856 --- [reactor-http-nio-4] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.492 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.492 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.492 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.492 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.492 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0xcdabbbbd, L:/10.5.0.2:8080 - R:/10.5.0.2:57417] New http connection, requesting read
2019-07-08 09:27:14.492 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.492 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : [2a8f8832] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.492 DEBUG 12856 --- [reactor-http-nio-6] reactor.netty.channel.BootstrapHandlers  : [id: 0xcdabbbbd, L:/10.5.0.2:8080 - R:/10.5.0.2:57417] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.492 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.492 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0xcdabbbbd, L:/10.5.0.2:8080 - R:/10.5.0.2:57417] Increasing pending responses, now 1
2019-07-08 09:27:14.492 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.492 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.492 DEBUG 12856 --- [reactor-http-nio-6] reactor.netty.http.server.HttpServer     : [id: 0xcdabbbbd, L:/10.5.0.2:8080 - R:/10.5.0.2:57417] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.492 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 48 bytes, 8 commands in the stack
2019-07-08 09:27:14.492 DEBUG 12856 --- [reactor-http-nio-6] o.s.w.s.adapter.HttpWebHandlerAdapter    : [cdabbbbd] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.493 DEBUG 12856 --- [reactor-http-nio-5] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.492 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.493 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.493 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.493 DEBUG 12856 --- [reactor-http-nio-5] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.493 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.493 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.493 DEBUG 12856 --- [reactor-http-nio-5] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.493 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.493 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : [cdabbbbd] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.493 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [25559567] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.493 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x25559567, L:/10.5.0.2:8080 - R:/10.5.0.2:57408] Last HTTP response frame
2019-07-08 09:27:14.493 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.493 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x25559567, L:/10.5.0.2:8080 - R:/10.5.0.2:57408] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.493 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.493 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x25559567, L:/10.5.0.2:8080 - R:/10.5.0.2:57408] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.493 DEBUG 12856 --- [reactor-http-nio-6] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.493 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x25559567, L:/10.5.0.2:8080 - R:/10.5.0.2:57408] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.493 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.493 DEBUG 12856 --- [reactor-http-nio-6] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.493 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.493 DEBUG 12856 --- [reactor-http-nio-6] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.493 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.493 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [77cf29c9] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.493 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0xb566800c, L:/10.5.0.2:8080 - R:/10.5.0.2:57418] New http connection, requesting read
2019-07-08 09:27:14.493 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x77cf29c9, L:/10.5.0.2:8080 - R:/10.5.0.2:57409] Last HTTP response frame
2019-07-08 09:27:14.493 DEBUG 12856 --- [reactor-http-nio-7] reactor.netty.channel.BootstrapHandlers  : [id: 0xb566800c, L:/10.5.0.2:8080 - R:/10.5.0.2:57418] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.494 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x77cf29c9, L:/10.5.0.2:8080 - R:/10.5.0.2:57409] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.494 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0xb566800c, L:/10.5.0.2:8080 - R:/10.5.0.2:57418] Increasing pending responses, now 1
2019-07-08 09:27:14.494 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x77cf29c9, L:/10.5.0.2:8080 - R:/10.5.0.2:57409] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.494 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.494 DEBUG 12856 --- [reactor-http-nio-7] reactor.netty.http.server.HttpServer     : [id: 0xb566800c, L:/10.5.0.2:8080 - R:/10.5.0.2:57418] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.494 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x77cf29c9, L:/10.5.0.2:8080 - R:/10.5.0.2:57409] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.494 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.494 DEBUG 12856 --- [reactor-http-nio-7] o.s.w.s.adapter.HttpWebHandlerAdapter    : [b566800c] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.494 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.494 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.494 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.494 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.494 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [bf120388] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.494 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : [b566800c] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.494 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x88c9a1c3, L:/10.5.0.2:8080 - R:/10.5.0.2:57419] New http connection, requesting read
2019-07-08 09:27:14.494 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xbf120388, L:/10.5.0.2:8080 - R:/10.5.0.2:57410] Last HTTP response frame
2019-07-08 09:27:14.494 DEBUG 12856 --- [reactor-http-nio-8] reactor.netty.channel.BootstrapHandlers  : [id: 0x88c9a1c3, L:/10.5.0.2:8080 - R:/10.5.0.2:57419] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.494 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.494 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xbf120388, L:/10.5.0.2:8080 - R:/10.5.0.2:57410] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.494 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x88c9a1c3, L:/10.5.0.2:8080 - R:/10.5.0.2:57419] Increasing pending responses, now 1
2019-07-08 09:27:14.494 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.494 DEBUG 12856 --- [reactor-http-nio-8] reactor.netty.http.server.HttpServer     : [id: 0x88c9a1c3, L:/10.5.0.2:8080 - R:/10.5.0.2:57419] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.494 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0xbf120388, L:/10.5.0.2:8080 - R:/10.5.0.2:57410] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.494 DEBUG 12856 --- [reactor-http-nio-8] o.s.w.s.adapter.HttpWebHandlerAdapter    : [88c9a1c3] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.494 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0xbf120388, L:/10.5.0.2:8080 - R:/10.5.0.2:57410] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.494 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.494 DEBUG 12856 --- [reactor-http-nio-7] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.494 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.494 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.495 DEBUG 12856 --- [reactor-http-nio-7] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.495 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x2643d95a, L:/10.5.0.2:8080 - R:/10.5.0.2:57420] New http connection, requesting read
2019-07-08 09:27:14.495 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.495 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.495 DEBUG 12856 --- [reactor-http-nio-7] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.495 DEBUG 12856 --- [reactor-http-nio-9] reactor.netty.channel.BootstrapHandlers  : [id: 0x2643d95a, L:/10.5.0.2:8080 - R:/10.5.0.2:57420] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.495 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : [88c9a1c3] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.495 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [42178985] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.495 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x2643d95a, L:/10.5.0.2:8080 - R:/10.5.0.2:57420] Increasing pending responses, now 1
2019-07-08 09:27:14.495 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.495 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x42178985, L:/10.5.0.2:8080 - R:/10.5.0.2:57411] Last HTTP response frame
2019-07-08 09:27:14.495 DEBUG 12856 --- [reactor-http-nio-9] reactor.netty.http.server.HttpServer     : [id: 0x2643d95a, L:/10.5.0.2:8080 - R:/10.5.0.2:57420] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.495 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x42178985, L:/10.5.0.2:8080 - R:/10.5.0.2:57411] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.495 DEBUG 12856 --- [reactor-http-nio-9] o.s.w.s.adapter.HttpWebHandlerAdapter    : [2643d95a] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.495 DEBUG 12856 --- [reactor-http-nio-8] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.495 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.495 DEBUG 12856 --- [reactor-http-nio-8] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.495 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.495 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x42178985, L:/10.5.0.2:8080 - R:/10.5.0.2:57411] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.495 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.495 DEBUG 12856 --- [reactor-http-nio-8] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.495 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.495 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x42178985, L:/10.5.0.2:8080 - R:/10.5.0.2:57411] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.495 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.495 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : [2643d95a] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.495 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.495 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.496 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.496 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0xfd974ced, L:/10.5.0.2:8080 - R:/10.5.0.2:57421] New http connection, requesting read
2019-07-08 09:27:14.496 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.496 DEBUG 12856 --- [reactor-http-nio-10] reactor.netty.channel.BootstrapHandlers  : [id: 0xfd974ced, L:/10.5.0.2:8080 - R:/10.5.0.2:57421] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.496 DEBUG 12856 --- [reactor-http-nio-9] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.496 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.496 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0xfd974ced, L:/10.5.0.2:8080 - R:/10.5.0.2:57421] Increasing pending responses, now 1
2019-07-08 09:27:14.496 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.496 DEBUG 12856 --- [reactor-http-nio-9] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.496 DEBUG 12856 --- [reactor-http-nio-10] reactor.netty.http.server.HttpServer     : [id: 0xfd974ced, L:/10.5.0.2:8080 - R:/10.5.0.2:57421] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.496 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 48 bytes, 8 commands in the stack
2019-07-08 09:27:14.496 DEBUG 12856 --- [reactor-http-nio-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [fd974ced] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.496 DEBUG 12856 --- [reactor-http-nio-9] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.496 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.496 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.496 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.496 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.496 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.496 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : [fd974ced] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.496 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.496 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.496 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [7d31e7a1] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.497 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x7d31e7a1, L:/10.5.0.2:8080 - R:/10.5.0.2:57412] Last HTTP response frame
2019-07-08 09:27:14.497 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x7d31e7a1, L:/10.5.0.2:8080 - R:/10.5.0.2:57412] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.497 DEBUG 12856 --- [reactor-http-nio-10] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.497 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.497 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x7d31e7a1, L:/10.5.0.2:8080 - R:/10.5.0.2:57412] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.497 DEBUG 12856 --- [reactor-http-nio-10] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.497 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.497 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x7d31e7a1, L:/10.5.0.2:8080 - R:/10.5.0.2:57412] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.497 DEBUG 12856 --- [reactor-http-nio-10] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.497 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.497 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.497 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [c6f4f298] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.497 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xc6f4f298, L:/10.5.0.2:8080 - R:/10.5.0.2:57413] Last HTTP response frame
2019-07-08 09:27:14.497 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xc6f4f298, L:/10.5.0.2:8080 - R:/10.5.0.2:57413] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.497 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x24c91ba5, L:/10.5.0.2:8080 - R:/10.5.0.2:57422] New http connection, requesting read
2019-07-08 09:27:14.497 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0xc6f4f298, L:/10.5.0.2:8080 - R:/10.5.0.2:57413] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.497 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.497 DEBUG 12856 --- [reactor-http-nio-11] reactor.netty.channel.BootstrapHandlers  : [id: 0x24c91ba5, L:/10.5.0.2:8080 - R:/10.5.0.2:57422] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.497 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.497 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0xc6f4f298, L:/10.5.0.2:8080 - R:/10.5.0.2:57413] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.497 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.497 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x24c91ba5, L:/10.5.0.2:8080 - R:/10.5.0.2:57422] Increasing pending responses, now 1
2019-07-08 09:27:14.497 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.497 DEBUG 12856 --- [reactor-http-nio-11] reactor.netty.http.server.HttpServer     : [id: 0x24c91ba5, L:/10.5.0.2:8080 - R:/10.5.0.2:57422] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.497 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [c21c17ce] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.497 DEBUG 12856 --- [reactor-http-nio-11] o.s.w.s.adapter.HttpWebHandlerAdapter    : [24c91ba5] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.497 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xc21c17ce, L:/10.5.0.2:8080 - R:/10.5.0.2:57414] Last HTTP response frame
2019-07-08 09:27:14.497 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x0486073f, L:/10.5.0.2:8080 - R:/10.5.0.2:57423] New http connection, requesting read
2019-07-08 09:27:14.497 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.497 DEBUG 12856 --- [reactor-http-nio-12] reactor.netty.channel.BootstrapHandlers  : [id: 0x0486073f, L:/10.5.0.2:8080 - R:/10.5.0.2:57423] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.498 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.497 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xc21c17ce, L:/10.5.0.2:8080 - R:/10.5.0.2:57414] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.498 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x0486073f, L:/10.5.0.2:8080 - R:/10.5.0.2:57423] Increasing pending responses, now 1
2019-07-08 09:27:14.498 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : [24c91ba5] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.498 DEBUG 12856 --- [reactor-http-nio-12] reactor.netty.http.server.HttpServer     : [id: 0x0486073f, L:/10.5.0.2:8080 - R:/10.5.0.2:57423] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.498 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.498 DEBUG 12856 --- [reactor-http-nio-12] o.s.w.s.adapter.HttpWebHandlerAdapter    : [0486073f] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.498 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.498 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0xc21c17ce, L:/10.5.0.2:8080 - R:/10.5.0.2:57414] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.498 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.498 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.498 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.498 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0xc21c17ce, L:/10.5.0.2:8080 - R:/10.5.0.2:57414] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.498 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.498 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.498 DEBUG 12856 --- [reactor-http-nio-11] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.498 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [4d19cb40] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.498 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : [0486073f] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.498 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x72e0f916, L:/10.5.0.2:8080 - R:/10.5.0.2:57424] New http connection, requesting read
2019-07-08 09:27:14.498 DEBUG 12856 --- [reactor-http-nio-11] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.498 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x4d19cb40, L:/10.5.0.2:8080 - R:/10.5.0.2:57415] Last HTTP response frame
2019-07-08 09:27:14.498 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.498 DEBUG 12856 --- [reactor-http-nio-13] reactor.netty.channel.BootstrapHandlers  : [id: 0x72e0f916, L:/10.5.0.2:8080 - R:/10.5.0.2:57424] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.498 DEBUG 12856 --- [reactor-http-nio-11] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.498 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x4d19cb40, L:/10.5.0.2:8080 - R:/10.5.0.2:57415] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.499 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x72e0f916, L:/10.5.0.2:8080 - R:/10.5.0.2:57424] Increasing pending responses, now 1
2019-07-08 09:27:14.499 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.499 DEBUG 12856 --- [reactor-http-nio-12] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.499 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.499 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x4d19cb40, L:/10.5.0.2:8080 - R:/10.5.0.2:57415] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.499 DEBUG 12856 --- [reactor-http-nio-13] reactor.netty.http.server.HttpServer     : [id: 0x72e0f916, L:/10.5.0.2:8080 - R:/10.5.0.2:57424] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.499 DEBUG 12856 --- [reactor-http-nio-12] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.499 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.499 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x4d19cb40, L:/10.5.0.2:8080 - R:/10.5.0.2:57415] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.499 DEBUG 12856 --- [reactor-http-nio-13] o.s.w.s.adapter.HttpWebHandlerAdapter    : [72e0f916] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.499 DEBUG 12856 --- [reactor-http-nio-12] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.499 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.499 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.500 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.500 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x8bbbfc61, L:/10.5.0.2:8080 - R:/10.5.0.2:57425] New http connection, requesting read
2019-07-08 09:27:14.500 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.500 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.500 DEBUG 12856 --- [reactor-http-nio-14] reactor.netty.channel.BootstrapHandlers  : [id: 0x8bbbfc61, L:/10.5.0.2:8080 - R:/10.5.0.2:57425] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.500 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.500 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : [72e0f916] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.500 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.500 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x8bbbfc61, L:/10.5.0.2:8080 - R:/10.5.0.2:57425] Increasing pending responses, now 1
2019-07-08 09:27:14.500 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.500 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 48 bytes, 8 commands in the stack
2019-07-08 09:27:14.500 DEBUG 12856 --- [reactor-http-nio-14] reactor.netty.http.server.HttpServer     : [id: 0x8bbbfc61, L:/10.5.0.2:8080 - R:/10.5.0.2:57425] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.500 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.500 DEBUG 12856 --- [reactor-http-nio-14] o.s.w.s.adapter.HttpWebHandlerAdapter    : [8bbbfc61] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.500 DEBUG 12856 --- [reactor-http-nio-13] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.500 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.501 DEBUG 12856 --- [reactor-http-nio-13] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.500 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.501 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.501 DEBUG 12856 --- [reactor-http-nio-13] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.501 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.501 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.501 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : [8bbbfc61] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.501 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [2a8f8832] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.501 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.501 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x2a8f8832, L:/10.5.0.2:8080 - R:/10.5.0.2:57416] Last HTTP response frame
2019-07-08 09:27:14.501 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x2a8f8832, L:/10.5.0.2:8080 - R:/10.5.0.2:57416] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.501 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.501 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x2a8f8832, L:/10.5.0.2:8080 - R:/10.5.0.2:57416] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.501 DEBUG 12856 --- [reactor-http-nio-14] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.501 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x2a8f8832, L:/10.5.0.2:8080 - R:/10.5.0.2:57416] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.501 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.501 DEBUG 12856 --- [reactor-http-nio-14] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.501 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.501 DEBUG 12856 --- [reactor-http-nio-14] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.501 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.502 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x83a97889, L:/10.5.0.2:8080 - R:/10.5.0.2:57426] New http connection, requesting read
2019-07-08 09:27:14.502 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [cdabbbbd] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.502 DEBUG 12856 --- [reactor-http-nio-15] reactor.netty.channel.BootstrapHandlers  : [id: 0x83a97889, L:/10.5.0.2:8080 - R:/10.5.0.2:57426] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.502 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xcdabbbbd, L:/10.5.0.2:8080 - R:/10.5.0.2:57417] Last HTTP response frame
2019-07-08 09:27:14.502 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x83a97889, L:/10.5.0.2:8080 - R:/10.5.0.2:57426] Increasing pending responses, now 1
2019-07-08 09:27:14.502 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xcdabbbbd, L:/10.5.0.2:8080 - R:/10.5.0.2:57417] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.502 DEBUG 12856 --- [reactor-http-nio-15] reactor.netty.http.server.HttpServer     : [id: 0x83a97889, L:/10.5.0.2:8080 - R:/10.5.0.2:57426] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.502 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.502 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0xcdabbbbd, L:/10.5.0.2:8080 - R:/10.5.0.2:57417] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.502 DEBUG 12856 --- [reactor-http-nio-15] o.s.w.s.adapter.HttpWebHandlerAdapter    : [83a97889] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.502 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.502 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.502 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0xcdabbbbd, L:/10.5.0.2:8080 - R:/10.5.0.2:57417] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.502 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.502 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.502 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.502 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x29864e63, L:/10.5.0.2:8080 - R:/10.5.0.2:57427] New http connection, requesting read
2019-07-08 09:27:14.502 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [b566800c] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.502 DEBUG 12856 --- [reactor-http-nio-16] reactor.netty.channel.BootstrapHandlers  : [id: 0x29864e63, L:/10.5.0.2:8080 - R:/10.5.0.2:57427] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.502 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : [83a97889] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.502 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xb566800c, L:/10.5.0.2:8080 - R:/10.5.0.2:57418] Last HTTP response frame
2019-07-08 09:27:14.502 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x29864e63, L:/10.5.0.2:8080 - R:/10.5.0.2:57427] Increasing pending responses, now 1
2019-07-08 09:27:14.502 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.502 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xb566800c, L:/10.5.0.2:8080 - R:/10.5.0.2:57418] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.503 DEBUG 12856 --- [reactor-http-nio-16] reactor.netty.http.server.HttpServer     : [id: 0x29864e63, L:/10.5.0.2:8080 - R:/10.5.0.2:57427] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.503 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0xb566800c, L:/10.5.0.2:8080 - R:/10.5.0.2:57418] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.503 DEBUG 12856 --- [reactor-http-nio-16] o.s.w.s.adapter.HttpWebHandlerAdapter    : [29864e63] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.503 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.503 DEBUG 12856 --- [reactor-http-nio-15] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.503 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0xb566800c, L:/10.5.0.2:8080 - R:/10.5.0.2:57418] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.503 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.503 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.503 DEBUG 12856 --- [reactor-http-nio-15] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.503 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.503 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.503 DEBUG 12856 --- [reactor-http-nio-15] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.503 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.503 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0xdc3cc39c, L:/10.5.0.2:8080 - R:/10.5.0.2:57428] New http connection, requesting read
2019-07-08 09:27:14.503 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : [29864e63] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.503 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [88c9a1c3] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.503 DEBUG 12856 --- [reactor-http-nio-1] reactor.netty.channel.BootstrapHandlers  : [id: 0xdc3cc39c, L:/10.5.0.2:8080 - R:/10.5.0.2:57428] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.504 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.504 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x88c9a1c3, L:/10.5.0.2:8080 - R:/10.5.0.2:57419] Last HTTP response frame
2019-07-08 09:27:14.504 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0xdc3cc39c, L:/10.5.0.2:8080 - R:/10.5.0.2:57428] Increasing pending responses, now 1
2019-07-08 09:27:14.504 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x88c9a1c3, L:/10.5.0.2:8080 - R:/10.5.0.2:57419] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.504 DEBUG 12856 --- [reactor-http-nio-1] reactor.netty.http.server.HttpServer     : [id: 0xdc3cc39c, L:/10.5.0.2:8080 - R:/10.5.0.2:57428] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.504 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.504 DEBUG 12856 --- [reactor-http-nio-16] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.504 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.504 DEBUG 12856 --- [reactor-http-nio-16] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.504 DEBUG 12856 --- [reactor-http-nio-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [dc3cc39c] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.504 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x88c9a1c3, L:/10.5.0.2:8080 - R:/10.5.0.2:57419] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.504 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.504 DEBUG 12856 --- [reactor-http-nio-16] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.504 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.504 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.504 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.504 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x88c9a1c3, L:/10.5.0.2:8080 - R:/10.5.0.2:57419] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.504 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.505 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : [dc3cc39c] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.505 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.505 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.505 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.505 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.505 DEBUG 12856 --- [reactor-http-nio-1] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.505 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 48 bytes, 8 commands in the stack
2019-07-08 09:27:14.505 DEBUG 12856 --- [reactor-http-nio-1] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.505 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.505 DEBUG 12856 --- [reactor-http-nio-1] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.505 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.505 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.505 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x5de446d5, L:/10.5.0.2:8080 - R:/10.5.0.2:57429] New http connection, requesting read
2019-07-08 09:27:14.505 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.506 DEBUG 12856 --- [reactor-http-nio-2] reactor.netty.channel.BootstrapHandlers  : [id: 0x5de446d5, L:/10.5.0.2:8080 - R:/10.5.0.2:57429] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.506 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [2643d95a] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.506 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x2643d95a, L:/10.5.0.2:8080 - R:/10.5.0.2:57420] Last HTTP response frame
2019-07-08 09:27:14.506 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x5de446d5, L:/10.5.0.2:8080 - R:/10.5.0.2:57429] Increasing pending responses, now 1
2019-07-08 09:27:14.506 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x2643d95a, L:/10.5.0.2:8080 - R:/10.5.0.2:57420] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.506 DEBUG 12856 --- [reactor-http-nio-2] reactor.netty.http.server.HttpServer     : [id: 0x5de446d5, L:/10.5.0.2:8080 - R:/10.5.0.2:57429] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.506 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.506 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x2643d95a, L:/10.5.0.2:8080 - R:/10.5.0.2:57420] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.506 DEBUG 12856 --- [reactor-http-nio-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [5de446d5] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.506 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.506 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x2643d95a, L:/10.5.0.2:8080 - R:/10.5.0.2:57420] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.506 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.506 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.506 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.506 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.506 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x26f2d90d, L:/10.5.0.2:8080 - R:/10.5.0.2:57430] New http connection, requesting read
2019-07-08 09:27:14.506 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : [5de446d5] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.506 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [fd974ced] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.506 DEBUG 12856 --- [reactor-http-nio-3] reactor.netty.channel.BootstrapHandlers  : [id: 0x26f2d90d, L:/10.5.0.2:8080 - R:/10.5.0.2:57430] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.506 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.506 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xfd974ced, L:/10.5.0.2:8080 - R:/10.5.0.2:57421] Last HTTP response frame
2019-07-08 09:27:14.506 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x26f2d90d, L:/10.5.0.2:8080 - R:/10.5.0.2:57430] Increasing pending responses, now 1
2019-07-08 09:27:14.507 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xfd974ced, L:/10.5.0.2:8080 - R:/10.5.0.2:57421] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.507 DEBUG 12856 --- [reactor-http-nio-2] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.507 DEBUG 12856 --- [reactor-http-nio-3] reactor.netty.http.server.HttpServer     : [id: 0x26f2d90d, L:/10.5.0.2:8080 - R:/10.5.0.2:57430] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.507 DEBUG 12856 --- [reactor-http-nio-2] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.507 DEBUG 12856 --- [reactor-http-nio-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [26f2d90d] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.507 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.507 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0xfd974ced, L:/10.5.0.2:8080 - R:/10.5.0.2:57421] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.507 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.507 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0xfd974ced, L:/10.5.0.2:8080 - R:/10.5.0.2:57421] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.507 DEBUG 12856 --- [reactor-http-nio-2] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.507 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.507 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.507 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.508 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x2999ccd5, L:/10.5.0.2:8080 - R:/10.5.0.2:57431] New http connection, requesting read
2019-07-08 09:27:14.508 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.508 DEBUG 12856 --- [reactor-http-nio-4] reactor.netty.channel.BootstrapHandlers  : [id: 0x2999ccd5, L:/10.5.0.2:8080 - R:/10.5.0.2:57431] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.508 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : [26f2d90d] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.508 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x2999ccd5, L:/10.5.0.2:8080 - R:/10.5.0.2:57431] Increasing pending responses, now 1
2019-07-08 09:27:14.508 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [24c91ba5] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.508 DEBUG 12856 --- [reactor-http-nio-4] reactor.netty.http.server.HttpServer     : [id: 0x2999ccd5, L:/10.5.0.2:8080 - R:/10.5.0.2:57431] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.508 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x24c91ba5, L:/10.5.0.2:8080 - R:/10.5.0.2:57422] Last HTTP response frame
2019-07-08 09:27:14.508 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.508 DEBUG 12856 --- [reactor-http-nio-4] o.s.w.s.adapter.HttpWebHandlerAdapter    : [2999ccd5] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.508 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x24c91ba5, L:/10.5.0.2:8080 - R:/10.5.0.2:57422] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.509 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.509 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.509 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x24c91ba5, L:/10.5.0.2:8080 - R:/10.5.0.2:57422] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.509 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.509 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x24c91ba5, L:/10.5.0.2:8080 - R:/10.5.0.2:57422] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.509 DEBUG 12856 --- [reactor-http-nio-3] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.509 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.509 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : [2999ccd5] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.509 DEBUG 12856 --- [reactor-http-nio-3] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.509 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.509 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.509 DEBUG 12856 --- [reactor-http-nio-3] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.509 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0xce71db10, L:/10.5.0.2:8080 - R:/10.5.0.2:57432] New http connection, requesting read
2019-07-08 09:27:14.510 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.510 DEBUG 12856 --- [reactor-http-nio-5] reactor.netty.channel.BootstrapHandlers  : [id: 0xce71db10, L:/10.5.0.2:8080 - R:/10.5.0.2:57432] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.510 DEBUG 12856 --- [reactor-http-nio-4] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.510 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [0486073f] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.510 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0xce71db10, L:/10.5.0.2:8080 - R:/10.5.0.2:57432] Increasing pending responses, now 1
2019-07-08 09:27:14.510 DEBUG 12856 --- [reactor-http-nio-4] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.510 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x0486073f, L:/10.5.0.2:8080 - R:/10.5.0.2:57423] Last HTTP response frame
2019-07-08 09:27:14.510 DEBUG 12856 --- [reactor-http-nio-5] reactor.netty.http.server.HttpServer     : [id: 0xce71db10, L:/10.5.0.2:8080 - R:/10.5.0.2:57432] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.510 DEBUG 12856 --- [reactor-http-nio-4] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.510 DEBUG 12856 --- [reactor-http-nio-5] o.s.w.s.adapter.HttpWebHandlerAdapter    : [ce71db10] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.510 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x0486073f, L:/10.5.0.2:8080 - R:/10.5.0.2:57423] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.510 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.510 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.510 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.510 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x0486073f, L:/10.5.0.2:8080 - R:/10.5.0.2:57423] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.510 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.510 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x0486073f, L:/10.5.0.2:8080 - R:/10.5.0.2:57423] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.510 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : [ce71db10] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.510 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.511 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.511 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.511 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0xdebb14d6, L:/10.5.0.2:8080 - R:/10.5.0.2:57433] New http connection, requesting read
2019-07-08 09:27:14.511 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.511 DEBUG 12856 --- [reactor-http-nio-6] reactor.netty.channel.BootstrapHandlers  : [id: 0xdebb14d6, L:/10.5.0.2:8080 - R:/10.5.0.2:57433] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.511 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.511 DEBUG 12856 --- [reactor-http-nio-5] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.511 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0xdebb14d6, L:/10.5.0.2:8080 - R:/10.5.0.2:57433] Increasing pending responses, now 1
2019-07-08 09:27:14.511 DEBUG 12856 --- [reactor-http-nio-5] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.511 DEBUG 12856 --- [reactor-http-nio-6] reactor.netty.http.server.HttpServer     : [id: 0xdebb14d6, L:/10.5.0.2:8080 - R:/10.5.0.2:57433] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.511 DEBUG 12856 --- [reactor-http-nio-5] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.511 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.511 DEBUG 12856 --- [reactor-http-nio-6] o.s.w.s.adapter.HttpWebHandlerAdapter    : [debb14d6] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.511 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.511 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.511 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.511 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.511 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.512 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : [debb14d6] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.512 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 48 bytes, 9 commands in the stack
2019-07-08 09:27:14.512 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.512 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 9 commands
2019-07-08 09:27:14.512 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.512 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.512 DEBUG 12856 --- [reactor-http-nio-6] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.512 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.512 DEBUG 12856 --- [reactor-http-nio-6] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.512 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [72e0f916] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.512 DEBUG 12856 --- [reactor-http-nio-6] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.512 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x72e0f916, L:/10.5.0.2:8080 - R:/10.5.0.2:57424] Last HTTP response frame
2019-07-08 09:27:14.512 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x72e0f916, L:/10.5.0.2:8080 - R:/10.5.0.2:57424] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.512 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.512 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x72e0f916, L:/10.5.0.2:8080 - R:/10.5.0.2:57424] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.512 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.513 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.513 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x72e0f916, L:/10.5.0.2:8080 - R:/10.5.0.2:57424] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.513 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.513 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [8bbbfc61] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.513 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x8bbbfc61, L:/10.5.0.2:8080 - R:/10.5.0.2:57425] Last HTTP response frame
2019-07-08 09:27:14.513 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x8bbbfc61, L:/10.5.0.2:8080 - R:/10.5.0.2:57425] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.513 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.513 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.513 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.513 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.513 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x8bbbfc61, L:/10.5.0.2:8080 - R:/10.5.0.2:57425] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.513 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [83a97889] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.513 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x71fdb401, L:/10.5.0.2:8080 - R:/10.5.0.2:57434] New http connection, requesting read
2019-07-08 09:27:14.513 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x83a97889, L:/10.5.0.2:8080 - R:/10.5.0.2:57426] Last HTTP response frame
2019-07-08 09:27:14.513 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x8bbbfc61, L:/10.5.0.2:8080 - R:/10.5.0.2:57425] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.513 DEBUG 12856 --- [reactor-http-nio-7] reactor.netty.channel.BootstrapHandlers  : [id: 0x71fdb401, L:/10.5.0.2:8080 - R:/10.5.0.2:57434] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.513 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x83a97889, L:/10.5.0.2:8080 - R:/10.5.0.2:57426] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.513 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x71fdb401, L:/10.5.0.2:8080 - R:/10.5.0.2:57434] Increasing pending responses, now 1
2019-07-08 09:27:14.513 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.513 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x83a97889, L:/10.5.0.2:8080 - R:/10.5.0.2:57426] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.513 DEBUG 12856 --- [reactor-http-nio-7] reactor.netty.http.server.HttpServer     : [id: 0x71fdb401, L:/10.5.0.2:8080 - R:/10.5.0.2:57434] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.513 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.513 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x43a527fb, L:/10.5.0.2:8080 - R:/10.5.0.2:57435] New http connection, requesting read
2019-07-08 09:27:14.513 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.513 DEBUG 12856 --- [reactor-http-nio-8] reactor.netty.channel.BootstrapHandlers  : [id: 0x43a527fb, L:/10.5.0.2:8080 - R:/10.5.0.2:57435] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.513 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x83a97889, L:/10.5.0.2:8080 - R:/10.5.0.2:57426] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.514 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x43a527fb, L:/10.5.0.2:8080 - R:/10.5.0.2:57435] Increasing pending responses, now 1
2019-07-08 09:27:14.513 DEBUG 12856 --- [reactor-http-nio-7] o.s.w.s.adapter.HttpWebHandlerAdapter    : [71fdb401] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.514 DEBUG 12856 --- [reactor-http-nio-8] reactor.netty.http.server.HttpServer     : [id: 0x43a527fb, L:/10.5.0.2:8080 - R:/10.5.0.2:57435] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.513 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.514 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.514 DEBUG 12856 --- [reactor-http-nio-8] o.s.w.s.adapter.HttpWebHandlerAdapter    : [43a527fb] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.514 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.514 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0xa713c81f, L:/10.5.0.2:8080 - R:/10.5.0.2:57436] New http connection, requesting read
2019-07-08 09:27:14.514 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [29864e63] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.514 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x29864e63, L:/10.5.0.2:8080 - R:/10.5.0.2:57427] Last HTTP response frame
2019-07-08 09:27:14.514 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x29864e63, L:/10.5.0.2:8080 - R:/10.5.0.2:57427] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.514 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.514 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.514 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.514 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : [43a527fb] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.514 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : [71fdb401] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.514 DEBUG 12856 --- [reactor-http-nio-9] reactor.netty.channel.BootstrapHandlers  : [id: 0xa713c81f, L:/10.5.0.2:8080 - R:/10.5.0.2:57436] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.514 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.514 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x29864e63, L:/10.5.0.2:8080 - R:/10.5.0.2:57427] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.514 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.515 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x29864e63, L:/10.5.0.2:8080 - R:/10.5.0.2:57427] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.515 DEBUG 12856 --- [reactor-http-nio-7] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.514 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.515 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x58296848, L:/10.5.0.2:8080 - R:/10.5.0.2:57437] New http connection, requesting read
2019-07-08 09:27:14.514 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0xa713c81f, L:/10.5.0.2:8080 - R:/10.5.0.2:57436] Increasing pending responses, now 1
2019-07-08 09:27:14.515 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 60 bytes, 6 commands in the stack
2019-07-08 09:27:14.515 DEBUG 12856 --- [reactor-http-nio-7] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.515 DEBUG 12856 --- [reactor-http-nio-10] reactor.netty.channel.BootstrapHandlers  : [id: 0x58296848, L:/10.5.0.2:8080 - R:/10.5.0.2:57437] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.515 DEBUG 12856 --- [reactor-http-nio-9] reactor.netty.http.server.HttpServer     : [id: 0xa713c81f, L:/10.5.0.2:8080 - R:/10.5.0.2:57436] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.515 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x58296848, L:/10.5.0.2:8080 - R:/10.5.0.2:57437] Increasing pending responses, now 1
2019-07-08 09:27:14.515 DEBUG 12856 --- [reactor-http-nio-9] o.s.w.s.adapter.HttpWebHandlerAdapter    : [a713c81f] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.515 DEBUG 12856 --- [reactor-http-nio-8] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.515 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.515 DEBUG 12856 --- [reactor-http-nio-7] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.515 DEBUG 12856 --- [reactor-http-nio-10] reactor.netty.http.server.HttpServer     : [id: 0x58296848, L:/10.5.0.2:8080 - R:/10.5.0.2:57437] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.515 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.515 DEBUG 12856 --- [reactor-http-nio-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [58296848] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.515 DEBUG 12856 --- [reactor-http-nio-8] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.515 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.515 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.515 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.515 DEBUG 12856 --- [reactor-http-nio-8] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.515 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.515 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.516 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.516 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : [58296848] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.515 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : [a713c81f] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.516 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [dc3cc39c] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.516 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.516 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.516 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xdc3cc39c, L:/10.5.0.2:8080 - R:/10.5.0.2:57428] Last HTTP response frame
2019-07-08 09:27:14.516 DEBUG 12856 --- [reactor-http-nio-9] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.516 DEBUG 12856 --- [reactor-http-nio-10] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.516 DEBUG 12856 --- [reactor-http-nio-9] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.516 DEBUG 12856 --- [reactor-http-nio-10] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.516 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xdc3cc39c, L:/10.5.0.2:8080 - R:/10.5.0.2:57428] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.516 DEBUG 12856 --- [reactor-http-nio-9] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.516 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0xdc3cc39c, L:/10.5.0.2:8080 - R:/10.5.0.2:57428] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.516 DEBUG 12856 --- [reactor-http-nio-10] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.516 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0xdc3cc39c, L:/10.5.0.2:8080 - R:/10.5.0.2:57428] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.516 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.516 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.516 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.517 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.517 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [5de446d5] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.517 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x5de446d5, L:/10.5.0.2:8080 - R:/10.5.0.2:57429] Last HTTP response frame
2019-07-08 09:27:14.517 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x5de446d5, L:/10.5.0.2:8080 - R:/10.5.0.2:57429] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.517 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x38f94e3c, L:/10.5.0.2:8080 - R:/10.5.0.2:57438] New http connection, requesting read
2019-07-08 09:27:14.517 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x5de446d5, L:/10.5.0.2:8080 - R:/10.5.0.2:57429] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.517 DEBUG 12856 --- [reactor-http-nio-11] reactor.netty.channel.BootstrapHandlers  : [id: 0x38f94e3c, L:/10.5.0.2:8080 - R:/10.5.0.2:57438] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.517 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 4 commands
2019-07-08 09:27:14.517 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x5de446d5, L:/10.5.0.2:8080 - R:/10.5.0.2:57429] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.517 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.517 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x38f94e3c, L:/10.5.0.2:8080 - R:/10.5.0.2:57438] Increasing pending responses, now 1
2019-07-08 09:27:14.517 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.517 DEBUG 12856 --- [reactor-http-nio-11] reactor.netty.http.server.HttpServer     : [id: 0x38f94e3c, L:/10.5.0.2:8080 - R:/10.5.0.2:57438] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.517 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.517 DEBUG 12856 --- [reactor-http-nio-11] o.s.w.s.adapter.HttpWebHandlerAdapter    : [38f94e3c] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.517 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [26f2d90d] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.517 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.517 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x9720fc46, L:/10.5.0.2:8080 - R:/10.5.0.2:57439] New http connection, requesting read
2019-07-08 09:27:14.517 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x26f2d90d, L:/10.5.0.2:8080 - R:/10.5.0.2:57430] Last HTTP response frame
2019-07-08 09:27:14.517 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.517 DEBUG 12856 --- [reactor-http-nio-12] reactor.netty.channel.BootstrapHandlers  : [id: 0x9720fc46, L:/10.5.0.2:8080 - R:/10.5.0.2:57439] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.517 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x26f2d90d, L:/10.5.0.2:8080 - R:/10.5.0.2:57430] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.517 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x9720fc46, L:/10.5.0.2:8080 - R:/10.5.0.2:57439] Increasing pending responses, now 1
2019-07-08 09:27:14.517 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 3 commands
2019-07-08 09:27:14.517 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : [38f94e3c] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.517 DEBUG 12856 --- [reactor-http-nio-12] reactor.netty.http.server.HttpServer     : [id: 0x9720fc46, L:/10.5.0.2:8080 - R:/10.5.0.2:57439] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.517 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.517 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x26f2d90d, L:/10.5.0.2:8080 - R:/10.5.0.2:57430] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.517 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.517 DEBUG 12856 --- [reactor-http-nio-12] o.s.w.s.adapter.HttpWebHandlerAdapter    : [9720fc46] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.518 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.518 DEBUG 12856 --- [reactor-http-nio-11] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.518 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x26f2d90d, L:/10.5.0.2:8080 - R:/10.5.0.2:57430] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.518 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.518 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.518 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [2999ccd5] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.518 DEBUG 12856 --- [reactor-http-nio-11] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.518 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.518 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x2999ccd5, L:/10.5.0.2:8080 - R:/10.5.0.2:57431] Last HTTP response frame
2019-07-08 09:27:14.518 DEBUG 12856 --- [reactor-http-nio-11] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.518 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x124a69e1, L:/10.5.0.2:8080 - R:/10.5.0.2:57440] New http connection, requesting read
2019-07-08 09:27:14.518 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : [9720fc46] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.518 DEBUG 12856 --- [reactor-http-nio-13] reactor.netty.channel.BootstrapHandlers  : [id: 0x124a69e1, L:/10.5.0.2:8080 - R:/10.5.0.2:57440] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.518 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x2999ccd5, L:/10.5.0.2:8080 - R:/10.5.0.2:57431] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.518 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.518 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x124a69e1, L:/10.5.0.2:8080 - R:/10.5.0.2:57440] Increasing pending responses, now 1
2019-07-08 09:27:14.518 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 2 commands
2019-07-08 09:27:14.518 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x2999ccd5, L:/10.5.0.2:8080 - R:/10.5.0.2:57431] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.518 DEBUG 12856 --- [reactor-http-nio-13] reactor.netty.http.server.HttpServer     : [id: 0x124a69e1, L:/10.5.0.2:8080 - R:/10.5.0.2:57440] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.518 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x2999ccd5, L:/10.5.0.2:8080 - R:/10.5.0.2:57431] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.518 DEBUG 12856 --- [reactor-http-nio-12] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.518 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.518 DEBUG 12856 --- [reactor-http-nio-13] o.s.w.s.adapter.HttpWebHandlerAdapter    : [124a69e1] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.518 DEBUG 12856 --- [reactor-http-nio-12] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.518 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.518 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.518 DEBUG 12856 --- [reactor-http-nio-12] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.518 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0xab8419bd, L:/10.5.0.2:8080 - R:/10.5.0.2:57441] New http connection, requesting read
2019-07-08 09:27:14.518 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.518 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.518 DEBUG 12856 --- [reactor-http-nio-14] reactor.netty.channel.BootstrapHandlers  : [id: 0xab8419bd, L:/10.5.0.2:8080 - R:/10.5.0.2:57441] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.518 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [ce71db10] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.518 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : [124a69e1] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.519 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0xab8419bd, L:/10.5.0.2:8080 - R:/10.5.0.2:57441] Increasing pending responses, now 1
2019-07-08 09:27:14.519 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.519 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xce71db10, L:/10.5.0.2:8080 - R:/10.5.0.2:57432] Last HTTP response frame
2019-07-08 09:27:14.519 DEBUG 12856 --- [reactor-http-nio-14] reactor.netty.http.server.HttpServer     : [id: 0xab8419bd, L:/10.5.0.2:8080 - R:/10.5.0.2:57441] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.519 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xce71db10, L:/10.5.0.2:8080 - R:/10.5.0.2:57432] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.519 DEBUG 12856 --- [reactor-http-nio-14] o.s.w.s.adapter.HttpWebHandlerAdapter    : [ab8419bd] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.519 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.519 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.519 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0xce71db10, L:/10.5.0.2:8080 - R:/10.5.0.2:57432] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.519 DEBUG 12856 --- [reactor-http-nio-13] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.519 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.519 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.519 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0xce71db10, L:/10.5.0.2:8080 - R:/10.5.0.2:57432] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.519 DEBUG 12856 --- [reactor-http-nio-13] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.519 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.519 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : [ab8419bd] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.519 DEBUG 12856 --- [reactor-http-nio-13] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.519 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.519 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.519 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x815f7400, L:/10.5.0.2:8080 - R:/10.5.0.2:57442] New http connection, requesting read
2019-07-08 09:27:14.519 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.519 DEBUG 12856 --- [reactor-http-nio-15] reactor.netty.channel.BootstrapHandlers  : [id: 0x815f7400, L:/10.5.0.2:8080 - R:/10.5.0.2:57442] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.519 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.520 DEBUG 12856 --- [reactor-http-nio-14] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.520 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x815f7400, L:/10.5.0.2:8080 - R:/10.5.0.2:57442] Increasing pending responses, now 1
2019-07-08 09:27:14.520 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.520 DEBUG 12856 --- [reactor-http-nio-14] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.520 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.520 DEBUG 12856 --- [reactor-http-nio-15] reactor.netty.http.server.HttpServer     : [id: 0x815f7400, L:/10.5.0.2:8080 - R:/10.5.0.2:57442] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.520 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.520 DEBUG 12856 --- [reactor-http-nio-14] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.520 DEBUG 12856 --- [reactor-http-nio-15] o.s.w.s.adapter.HttpWebHandlerAdapter    : [815f7400] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.520 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.520 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.520 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.520 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.520 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.520 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : [815f7400] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.520 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.520 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.520 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.520 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.520 DEBUG 12856 --- [reactor-http-nio-15] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.520 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.520 DEBUG 12856 --- [reactor-http-nio-15] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.520 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 12 bytes, 9 commands in the stack
2019-07-08 09:27:14.520 DEBUG 12856 --- [reactor-http-nio-15] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.520 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 9 commands
2019-07-08 09:27:14.520 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.521 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.521 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.521 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [debb14d6] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.521 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xdebb14d6, L:/10.5.0.2:8080 - R:/10.5.0.2:57433] Last HTTP response frame
2019-07-08 09:27:14.521 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xdebb14d6, L:/10.5.0.2:8080 - R:/10.5.0.2:57433] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.521 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.521 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0xdebb14d6, L:/10.5.0.2:8080 - R:/10.5.0.2:57433] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.521 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.521 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0xdebb14d6, L:/10.5.0.2:8080 - R:/10.5.0.2:57433] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.521 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x71c05a68, L:/10.5.0.2:8080 - R:/10.5.0.2:57443] New http connection, requesting read
2019-07-08 09:27:14.521 DEBUG 12856 --- [reactor-http-nio-16] reactor.netty.channel.BootstrapHandlers  : [id: 0x71c05a68, L:/10.5.0.2:8080 - R:/10.5.0.2:57443] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.521 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x71c05a68, L:/10.5.0.2:8080 - R:/10.5.0.2:57443] Increasing pending responses, now 1
2019-07-08 09:27:14.521 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 12 bytes, 9 commands in the stack
2019-07-08 09:27:14.521 DEBUG 12856 --- [reactor-http-nio-16] reactor.netty.http.server.HttpServer     : [id: 0x71c05a68, L:/10.5.0.2:8080 - R:/10.5.0.2:57443] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.521 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 9 commands
2019-07-08 09:27:14.521 DEBUG 12856 --- [reactor-http-nio-16] o.s.w.s.adapter.HttpWebHandlerAdapter    : [71c05a68] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.521 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.521 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.521 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.521 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.521 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : [71c05a68] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.521 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.521 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.521 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [71fdb401] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.522 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x71fdb401, L:/10.5.0.2:8080 - R:/10.5.0.2:57434] Last HTTP response frame
2019-07-08 09:27:14.522 DEBUG 12856 --- [reactor-http-nio-16] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.522 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x71fdb401, L:/10.5.0.2:8080 - R:/10.5.0.2:57434] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.522 DEBUG 12856 --- [reactor-http-nio-16] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.522 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x71fdb401, L:/10.5.0.2:8080 - R:/10.5.0.2:57434] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.522 DEBUG 12856 --- [reactor-http-nio-16] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.522 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.522 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x71fdb401, L:/10.5.0.2:8080 - R:/10.5.0.2:57434] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.522 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.522 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 48 bytes, 9 commands in the stack
2019-07-08 09:27:14.522 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 9 commands
2019-07-08 09:27:14.522 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.522 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0xf064a0c9, L:/10.5.0.2:8080 - R:/10.5.0.2:57444] New http connection, requesting read
2019-07-08 09:27:14.522 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.522 DEBUG 12856 --- [reactor-http-nio-1] reactor.netty.channel.BootstrapHandlers  : [id: 0xf064a0c9, L:/10.5.0.2:8080 - R:/10.5.0.2:57444] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.522 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.522 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0xf064a0c9, L:/10.5.0.2:8080 - R:/10.5.0.2:57444] Increasing pending responses, now 1
2019-07-08 09:27:14.522 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [43a527fb] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.522 DEBUG 12856 --- [reactor-http-nio-1] reactor.netty.http.server.HttpServer     : [id: 0xf064a0c9, L:/10.5.0.2:8080 - R:/10.5.0.2:57444] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.522 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x43a527fb, L:/10.5.0.2:8080 - R:/10.5.0.2:57435] Last HTTP response frame
2019-07-08 09:27:14.522 DEBUG 12856 --- [reactor-http-nio-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [f064a0c9] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.522 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x43a527fb, L:/10.5.0.2:8080 - R:/10.5.0.2:57435] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.522 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.522 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.522 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x43a527fb, L:/10.5.0.2:8080 - R:/10.5.0.2:57435] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.522 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.522 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.522 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x43a527fb, L:/10.5.0.2:8080 - R:/10.5.0.2:57435] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.523 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.522 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : [f064a0c9] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.523 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.523 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.523 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [a713c81f] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.523 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xa713c81f, L:/10.5.0.2:8080 - R:/10.5.0.2:57436] Last HTTP response frame
2019-07-08 09:27:14.523 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xa713c81f, L:/10.5.0.2:8080 - R:/10.5.0.2:57436] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.523 DEBUG 12856 --- [reactor-http-nio-1] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.523 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0xa713c81f, L:/10.5.0.2:8080 - R:/10.5.0.2:57436] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.523 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.523 DEBUG 12856 --- [reactor-http-nio-1] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.523 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0xa713c81f, L:/10.5.0.2:8080 - R:/10.5.0.2:57436] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.523 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.523 DEBUG 12856 --- [reactor-http-nio-1] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.523 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.523 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.523 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [58296848] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.523 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0xca792601, L:/10.5.0.2:8080 - R:/10.5.0.2:57445] New http connection, requesting read
2019-07-08 09:27:14.523 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x6394c692, L:/10.5.0.2:8080 - R:/10.5.0.2:57446] New http connection, requesting read
2019-07-08 09:27:14.523 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x58296848, L:/10.5.0.2:8080 - R:/10.5.0.2:57437] Last HTTP response frame
2019-07-08 09:27:14.523 DEBUG 12856 --- [reactor-http-nio-2] reactor.netty.channel.BootstrapHandlers  : [id: 0xca792601, L:/10.5.0.2:8080 - R:/10.5.0.2:57445] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.523 DEBUG 12856 --- [reactor-http-nio-3] reactor.netty.channel.BootstrapHandlers  : [id: 0x6394c692, L:/10.5.0.2:8080 - R:/10.5.0.2:57446] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.523 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x58296848, L:/10.5.0.2:8080 - R:/10.5.0.2:57437] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.523 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0xca792601, L:/10.5.0.2:8080 - R:/10.5.0.2:57445] Increasing pending responses, now 1
2019-07-08 09:27:14.523 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x6394c692, L:/10.5.0.2:8080 - R:/10.5.0.2:57446] Increasing pending responses, now 1
2019-07-08 09:27:14.523 DEBUG 12856 --- [reactor-http-nio-2] reactor.netty.http.server.HttpServer     : [id: 0xca792601, L:/10.5.0.2:8080 - R:/10.5.0.2:57445] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.523 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.523 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x58296848, L:/10.5.0.2:8080 - R:/10.5.0.2:57437] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.523 DEBUG 12856 --- [reactor-http-nio-3] reactor.netty.http.server.HttpServer     : [id: 0x6394c692, L:/10.5.0.2:8080 - R:/10.5.0.2:57446] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.523 DEBUG 12856 --- [reactor-http-nio-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [ca792601] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.523 DEBUG 12856 --- [reactor-http-nio-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [6394c692] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.523 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.523 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x58296848, L:/10.5.0.2:8080 - R:/10.5.0.2:57437] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.524 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.523 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.524 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.524 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.524 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.524 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.524 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0xf94a9998, L:/10.5.0.2:8080 - R:/10.5.0.2:57447] New http connection, requesting read
2019-07-08 09:27:14.524 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : [ca792601] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.524 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [38f94e3c] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.524 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : [6394c692] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.524 DEBUG 12856 --- [reactor-http-nio-4] reactor.netty.channel.BootstrapHandlers  : [id: 0xf94a9998, L:/10.5.0.2:8080 - R:/10.5.0.2:57447] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.524 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x38f94e3c, L:/10.5.0.2:8080 - R:/10.5.0.2:57438] Last HTTP response frame
2019-07-08 09:27:14.524 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.524 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.524 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x38f94e3c, L:/10.5.0.2:8080 - R:/10.5.0.2:57438] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.524 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0xf94a9998, L:/10.5.0.2:8080 - R:/10.5.0.2:57447] Increasing pending responses, now 1
2019-07-08 09:27:14.524 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.524 DEBUG 12856 --- [reactor-http-nio-2] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.524 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.524 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x38f94e3c, L:/10.5.0.2:8080 - R:/10.5.0.2:57438] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.524 DEBUG 12856 --- [reactor-http-nio-4] reactor.netty.http.server.HttpServer     : [id: 0xf94a9998, L:/10.5.0.2:8080 - R:/10.5.0.2:57447] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.524 DEBUG 12856 --- [reactor-http-nio-3] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.524 DEBUG 12856 --- [reactor-http-nio-2] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.524 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 60 bytes, 6 commands in the stack
2019-07-08 09:27:14.524 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x38f94e3c, L:/10.5.0.2:8080 - R:/10.5.0.2:57438] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.524 DEBUG 12856 --- [reactor-http-nio-4] o.s.w.s.adapter.HttpWebHandlerAdapter    : [f94a9998] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.524 DEBUG 12856 --- [reactor-http-nio-3] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.524 DEBUG 12856 --- [reactor-http-nio-2] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.524 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.524 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.525 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.524 DEBUG 12856 --- [reactor-http-nio-3] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.525 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.525 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x36e71c69, L:/10.5.0.2:8080 - R:/10.5.0.2:57448] New http connection, requesting read
2019-07-08 09:27:14.525 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.525 DEBUG 12856 --- [reactor-http-nio-5] reactor.netty.channel.BootstrapHandlers  : [id: 0x36e71c69, L:/10.5.0.2:8080 - R:/10.5.0.2:57448] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.525 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : [f94a9998] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.525 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.525 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x36e71c69, L:/10.5.0.2:8080 - R:/10.5.0.2:57448] Increasing pending responses, now 1
2019-07-08 09:27:14.525 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [9720fc46] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.525 DEBUG 12856 --- [reactor-http-nio-5] reactor.netty.http.server.HttpServer     : [id: 0x36e71c69, L:/10.5.0.2:8080 - R:/10.5.0.2:57448] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.525 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.525 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x9720fc46, L:/10.5.0.2:8080 - R:/10.5.0.2:57439] Last HTTP response frame
2019-07-08 09:27:14.525 DEBUG 12856 --- [reactor-http-nio-5] o.s.w.s.adapter.HttpWebHandlerAdapter    : [36e71c69] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.525 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x9720fc46, L:/10.5.0.2:8080 - R:/10.5.0.2:57439] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.525 DEBUG 12856 --- [reactor-http-nio-4] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.525 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x9720fc46, L:/10.5.0.2:8080 - R:/10.5.0.2:57439] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.525 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.525 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.525 DEBUG 12856 --- [reactor-http-nio-4] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.525 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x9720fc46, L:/10.5.0.2:8080 - R:/10.5.0.2:57439] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.525 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.525 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.525 DEBUG 12856 --- [reactor-http-nio-4] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.525 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.525 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : [36e71c69] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.525 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x4104aed0, L:/10.5.0.2:8080 - R:/10.5.0.2:57449] New http connection, requesting read
2019-07-08 09:27:14.525 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.525 DEBUG 12856 --- [reactor-http-nio-6] reactor.netty.channel.BootstrapHandlers  : [id: 0x4104aed0, L:/10.5.0.2:8080 - R:/10.5.0.2:57449] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.525 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.525 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [124a69e1] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.526 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x4104aed0, L:/10.5.0.2:8080 - R:/10.5.0.2:57449] Increasing pending responses, now 1
2019-07-08 09:27:14.526 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x124a69e1, L:/10.5.0.2:8080 - R:/10.5.0.2:57440] Last HTTP response frame
2019-07-08 09:27:14.526 DEBUG 12856 --- [reactor-http-nio-6] reactor.netty.http.server.HttpServer     : [id: 0x4104aed0, L:/10.5.0.2:8080 - R:/10.5.0.2:57449] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.526 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x124a69e1, L:/10.5.0.2:8080 - R:/10.5.0.2:57440] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.526 DEBUG 12856 --- [reactor-http-nio-6] o.s.w.s.adapter.HttpWebHandlerAdapter    : [4104aed0] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.526 DEBUG 12856 --- [reactor-http-nio-5] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.526 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x124a69e1, L:/10.5.0.2:8080 - R:/10.5.0.2:57440] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.526 DEBUG 12856 --- [reactor-http-nio-5] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.526 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 4 commands
2019-07-08 09:27:14.526 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.526 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.526 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x124a69e1, L:/10.5.0.2:8080 - R:/10.5.0.2:57440] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.526 DEBUG 12856 --- [reactor-http-nio-5] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.526 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.526 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.526 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : [4104aed0] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.526 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.526 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x9b647a12, L:/10.5.0.2:8080 - R:/10.5.0.2:57450] New http connection, requesting read
2019-07-08 09:27:14.526 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.526 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [ab8419bd] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.526 DEBUG 12856 --- [reactor-http-nio-7] reactor.netty.channel.BootstrapHandlers  : [id: 0x9b647a12, L:/10.5.0.2:8080 - R:/10.5.0.2:57450] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.526 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xab8419bd, L:/10.5.0.2:8080 - R:/10.5.0.2:57441] Last HTTP response frame
2019-07-08 09:27:14.526 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x9b647a12, L:/10.5.0.2:8080 - R:/10.5.0.2:57450] Increasing pending responses, now 1
2019-07-08 09:27:14.526 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xab8419bd, L:/10.5.0.2:8080 - R:/10.5.0.2:57441] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.526 DEBUG 12856 --- [reactor-http-nio-7] reactor.netty.http.server.HttpServer     : [id: 0x9b647a12, L:/10.5.0.2:8080 - R:/10.5.0.2:57450] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.526 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 3 commands
2019-07-08 09:27:14.526 DEBUG 12856 --- [reactor-http-nio-6] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.526 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0xab8419bd, L:/10.5.0.2:8080 - R:/10.5.0.2:57441] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.526 DEBUG 12856 --- [reactor-http-nio-7] o.s.w.s.adapter.HttpWebHandlerAdapter    : [9b647a12] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.526 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.526 DEBUG 12856 --- [reactor-http-nio-6] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.526 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0xab8419bd, L:/10.5.0.2:8080 - R:/10.5.0.2:57441] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.526 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.526 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.526 DEBUG 12856 --- [reactor-http-nio-6] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.527 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.527 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.527 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [815f7400] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.527 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x2aff4c36, L:/10.5.0.2:8080 - R:/10.5.0.2:57451] New http connection, requesting read
2019-07-08 09:27:14.527 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : [9b647a12] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.527 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x815f7400, L:/10.5.0.2:8080 - R:/10.5.0.2:57442] Last HTTP response frame
2019-07-08 09:27:14.527 DEBUG 12856 --- [reactor-http-nio-8] reactor.netty.channel.BootstrapHandlers  : [id: 0x2aff4c36, L:/10.5.0.2:8080 - R:/10.5.0.2:57451] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.527 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.527 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x815f7400, L:/10.5.0.2:8080 - R:/10.5.0.2:57442] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.527 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x2aff4c36, L:/10.5.0.2:8080 - R:/10.5.0.2:57451] Increasing pending responses, now 1
2019-07-08 09:27:14.527 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 2 commands
2019-07-08 09:27:14.527 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x815f7400, L:/10.5.0.2:8080 - R:/10.5.0.2:57442] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.527 DEBUG 12856 --- [reactor-http-nio-8] reactor.netty.http.server.HttpServer     : [id: 0x2aff4c36, L:/10.5.0.2:8080 - R:/10.5.0.2:57451] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.527 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.527 DEBUG 12856 --- [reactor-http-nio-7] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.527 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x815f7400, L:/10.5.0.2:8080 - R:/10.5.0.2:57442] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.527 DEBUG 12856 --- [reactor-http-nio-8] o.s.w.s.adapter.HttpWebHandlerAdapter    : [2aff4c36] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.527 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.527 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.527 DEBUG 12856 --- [reactor-http-nio-7] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.527 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.527 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.527 DEBUG 12856 --- [reactor-http-nio-7] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.527 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [71c05a68] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.527 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x614516ca, L:/10.5.0.2:8080 - R:/10.5.0.2:57452] New http connection, requesting read
2019-07-08 09:27:14.527 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : [2aff4c36] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.527 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x71c05a68, L:/10.5.0.2:8080 - R:/10.5.0.2:57443] Last HTTP response frame
2019-07-08 09:27:14.527 DEBUG 12856 --- [reactor-http-nio-9] reactor.netty.channel.BootstrapHandlers  : [id: 0x614516ca, L:/10.5.0.2:8080 - R:/10.5.0.2:57452] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.527 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.527 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x71c05a68, L:/10.5.0.2:8080 - R:/10.5.0.2:57443] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.527 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x614516ca, L:/10.5.0.2:8080 - R:/10.5.0.2:57452] Increasing pending responses, now 1
2019-07-08 09:27:14.528 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.528 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x71c05a68, L:/10.5.0.2:8080 - R:/10.5.0.2:57443] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.528 DEBUG 12856 --- [reactor-http-nio-8] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.528 DEBUG 12856 --- [reactor-http-nio-9] reactor.netty.http.server.HttpServer     : [id: 0x614516ca, L:/10.5.0.2:8080 - R:/10.5.0.2:57452] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.528 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.528 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x71c05a68, L:/10.5.0.2:8080 - R:/10.5.0.2:57443] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.528 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.528 DEBUG 12856 --- [reactor-http-nio-8] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.528 DEBUG 12856 --- [reactor-http-nio-9] o.s.w.s.adapter.HttpWebHandlerAdapter    : [614516ca] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.528 DEBUG 12856 --- [reactor-http-nio-8] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.528 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.528 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.528 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.528 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x8decb164, L:/10.5.0.2:8080 - R:/10.5.0.2:57453] New http connection, requesting read
2019-07-08 09:27:14.528 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.528 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.528 DEBUG 12856 --- [reactor-http-nio-10] reactor.netty.channel.BootstrapHandlers  : [id: 0x8decb164, L:/10.5.0.2:8080 - R:/10.5.0.2:57453] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.528 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.528 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : [614516ca] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.528 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.528 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x8decb164, L:/10.5.0.2:8080 - R:/10.5.0.2:57453] Increasing pending responses, now 1
2019-07-08 09:27:14.528 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.528 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.528 DEBUG 12856 --- [reactor-http-nio-10] reactor.netty.http.server.HttpServer     : [id: 0x8decb164, L:/10.5.0.2:8080 - R:/10.5.0.2:57453] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.528 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.528 DEBUG 12856 --- [reactor-http-nio-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [8decb164] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.528 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.528 DEBUG 12856 --- [reactor-http-nio-9] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.529 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.528 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.529 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.529 DEBUG 12856 --- [reactor-http-nio-9] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.529 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.529 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.529 DEBUG 12856 --- [reactor-http-nio-9] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.529 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : [8decb164] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.529 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.529 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.529 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.529 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 36 bytes, 9 commands in the stack
2019-07-08 09:27:14.529 DEBUG 12856 --- [reactor-http-nio-10] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.529 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 9 commands
2019-07-08 09:27:14.529 DEBUG 12856 --- [reactor-http-nio-10] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.529 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.529 DEBUG 12856 --- [reactor-http-nio-10] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.529 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.529 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.529 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [f064a0c9] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.529 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xf064a0c9, L:/10.5.0.2:8080 - R:/10.5.0.2:57444] Last HTTP response frame
2019-07-08 09:27:14.529 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xf064a0c9, L:/10.5.0.2:8080 - R:/10.5.0.2:57444] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.529 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.529 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0xf064a0c9, L:/10.5.0.2:8080 - R:/10.5.0.2:57444] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.529 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.530 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.530 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0xf064a0c9, L:/10.5.0.2:8080 - R:/10.5.0.2:57444] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.530 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.530 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [ca792601] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.530 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xca792601, L:/10.5.0.2:8080 - R:/10.5.0.2:57445] Last HTTP response frame
2019-07-08 09:27:14.530 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xca792601, L:/10.5.0.2:8080 - R:/10.5.0.2:57445] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.530 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.530 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0xca792601, L:/10.5.0.2:8080 - R:/10.5.0.2:57445] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.530 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x0cb31684, L:/10.5.0.2:8080 - R:/10.5.0.2:57454] New http connection, requesting read
2019-07-08 09:27:14.530 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0xca792601, L:/10.5.0.2:8080 - R:/10.5.0.2:57445] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.530 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.530 DEBUG 12856 --- [reactor-http-nio-11] reactor.netty.channel.BootstrapHandlers  : [id: 0x0cb31684, L:/10.5.0.2:8080 - R:/10.5.0.2:57454] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.530 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.530 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x0cb31684, L:/10.5.0.2:8080 - R:/10.5.0.2:57454] Increasing pending responses, now 1
2019-07-08 09:27:14.530 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.530 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0xd4d5d49a, L:/10.5.0.2:8080 - R:/10.5.0.2:57455] New http connection, requesting read
2019-07-08 09:27:14.530 DEBUG 12856 --- [reactor-http-nio-11] reactor.netty.http.server.HttpServer     : [id: 0x0cb31684, L:/10.5.0.2:8080 - R:/10.5.0.2:57454] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.530 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [6394c692] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.530 DEBUG 12856 --- [reactor-http-nio-11] o.s.w.s.adapter.HttpWebHandlerAdapter    : [0cb31684] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.530 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x6394c692, L:/10.5.0.2:8080 - R:/10.5.0.2:57446] Last HTTP response frame
2019-07-08 09:27:14.530 DEBUG 12856 --- [reactor-http-nio-12] reactor.netty.channel.BootstrapHandlers  : [id: 0xd4d5d49a, L:/10.5.0.2:8080 - R:/10.5.0.2:57455] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.530 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.530 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x6394c692, L:/10.5.0.2:8080 - R:/10.5.0.2:57446] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.530 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.530 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0xd4d5d49a, L:/10.5.0.2:8080 - R:/10.5.0.2:57455] Increasing pending responses, now 1
2019-07-08 09:27:14.530 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.530 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x6394c692, L:/10.5.0.2:8080 - R:/10.5.0.2:57446] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.530 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : [0cb31684] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.530 DEBUG 12856 --- [reactor-http-nio-12] reactor.netty.http.server.HttpServer     : [id: 0xd4d5d49a, L:/10.5.0.2:8080 - R:/10.5.0.2:57455] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.530 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.530 DEBUG 12856 --- [reactor-http-nio-12] o.s.w.s.adapter.HttpWebHandlerAdapter    : [d4d5d49a] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.530 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x6394c692, L:/10.5.0.2:8080 - R:/10.5.0.2:57446] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.530 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.531 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x7cac90bf, L:/10.5.0.2:8080 - R:/10.5.0.2:57456] New http connection, requesting read
2019-07-08 09:27:14.531 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.531 DEBUG 12856 --- [reactor-http-nio-13] reactor.netty.channel.BootstrapHandlers  : [id: 0x7cac90bf, L:/10.5.0.2:8080 - R:/10.5.0.2:57456] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.531 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 60 bytes, 7 commands in the stack
2019-07-08 09:27:14.531 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x7cac90bf, L:/10.5.0.2:8080 - R:/10.5.0.2:57456] Increasing pending responses, now 1
2019-07-08 09:27:14.531 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.531 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.531 DEBUG 12856 --- [reactor-http-nio-11] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.531 DEBUG 12856 --- [reactor-http-nio-13] reactor.netty.http.server.HttpServer     : [id: 0x7cac90bf, L:/10.5.0.2:8080 - R:/10.5.0.2:57456] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.531 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.531 DEBUG 12856 --- [reactor-http-nio-13] o.s.w.s.adapter.HttpWebHandlerAdapter    : [7cac90bf] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.531 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : [d4d5d49a] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.531 DEBUG 12856 --- [reactor-http-nio-11] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.531 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.531 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.531 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.531 DEBUG 12856 --- [reactor-http-nio-11] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.531 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.531 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.531 DEBUG 12856 --- [reactor-http-nio-12] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.531 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [f94a9998] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.531 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : [7cac90bf] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.531 DEBUG 12856 --- [reactor-http-nio-12] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.532 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xf94a9998, L:/10.5.0.2:8080 - R:/10.5.0.2:57447] Last HTTP response frame
2019-07-08 09:27:14.532 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.532 DEBUG 12856 --- [reactor-http-nio-12] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.532 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xf94a9998, L:/10.5.0.2:8080 - R:/10.5.0.2:57447] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.532 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.532 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0xf94a9998, L:/10.5.0.2:8080 - R:/10.5.0.2:57447] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.532 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.532 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0xf94a9998, L:/10.5.0.2:8080 - R:/10.5.0.2:57447] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.532 DEBUG 12856 --- [reactor-http-nio-13] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.532 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.532 DEBUG 12856 --- [reactor-http-nio-13] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.532 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.532 DEBUG 12856 --- [reactor-http-nio-13] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.532 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [36e71c69] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.532 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0xf240cf1f, L:/10.5.0.2:8080 - R:/10.5.0.2:57457] New http connection, requesting read
2019-07-08 09:27:14.532 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x36e71c69, L:/10.5.0.2:8080 - R:/10.5.0.2:57448] Last HTTP response frame
2019-07-08 09:27:14.532 DEBUG 12856 --- [reactor-http-nio-14] reactor.netty.channel.BootstrapHandlers  : [id: 0xf240cf1f, L:/10.5.0.2:8080 - R:/10.5.0.2:57457] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.532 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x36e71c69, L:/10.5.0.2:8080 - R:/10.5.0.2:57448] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.532 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.532 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0xf240cf1f, L:/10.5.0.2:8080 - R:/10.5.0.2:57457] Increasing pending responses, now 1
2019-07-08 09:27:14.532 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x36e71c69, L:/10.5.0.2:8080 - R:/10.5.0.2:57448] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.532 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.532 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x36e71c69, L:/10.5.0.2:8080 - R:/10.5.0.2:57448] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.532 DEBUG 12856 --- [reactor-http-nio-14] reactor.netty.http.server.HttpServer     : [id: 0xf240cf1f, L:/10.5.0.2:8080 - R:/10.5.0.2:57457] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.532 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.532 DEBUG 12856 --- [reactor-http-nio-14] o.s.w.s.adapter.HttpWebHandlerAdapter    : [f240cf1f] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.544 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.544 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.533 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x12a05865, L:/10.5.0.2:8080 - R:/10.5.0.2:57458] New http connection, requesting read
2019-07-08 09:27:14.544 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.544 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : [f240cf1f] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.544 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [4104aed0] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.544 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.544 DEBUG 12856 --- [reactor-http-nio-15] reactor.netty.channel.BootstrapHandlers  : [id: 0x12a05865, L:/10.5.0.2:8080 - R:/10.5.0.2:57458] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.544 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x4104aed0, L:/10.5.0.2:8080 - R:/10.5.0.2:57449] Last HTTP response frame
2019-07-08 09:27:14.544 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x4104aed0, L:/10.5.0.2:8080 - R:/10.5.0.2:57449] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.544 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x12a05865, L:/10.5.0.2:8080 - R:/10.5.0.2:57458] Increasing pending responses, now 1
2019-07-08 09:27:14.544 DEBUG 12856 --- [reactor-http-nio-14] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.544 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 4 commands
2019-07-08 09:27:14.544 DEBUG 12856 --- [reactor-http-nio-14] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.544 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.544 DEBUG 12856 --- [reactor-http-nio-14] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.544 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.544 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x4104aed0, L:/10.5.0.2:8080 - R:/10.5.0.2:57449] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.544 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.544 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [9b647a12] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.544 DEBUG 12856 --- [reactor-http-nio-15] reactor.netty.http.server.HttpServer     : [id: 0x12a05865, L:/10.5.0.2:8080 - R:/10.5.0.2:57458] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.544 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x4104aed0, L:/10.5.0.2:8080 - R:/10.5.0.2:57449] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.544 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x9b647a12, L:/10.5.0.2:8080 - R:/10.5.0.2:57450] Last HTTP response frame
2019-07-08 09:27:14.544 DEBUG 12856 --- [reactor-http-nio-15] o.s.w.s.adapter.HttpWebHandlerAdapter    : [12a05865] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.544 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x9b647a12, L:/10.5.0.2:8080 - R:/10.5.0.2:57450] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.545 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.545 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x9b647a12, L:/10.5.0.2:8080 - R:/10.5.0.2:57450] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.545 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 3 commands
2019-07-08 09:27:14.545 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x9b647a12, L:/10.5.0.2:8080 - R:/10.5.0.2:57450] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.545 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.545 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.545 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x60112a4e, L:/10.5.0.2:8080 - R:/10.5.0.2:57460] New http connection, requesting read
2019-07-08 09:27:14.545 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x4d1bd0f3, L:/10.5.0.2:8080 - R:/10.5.0.2:57459] New http connection, requesting read
2019-07-08 09:27:14.545 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : [12a05865] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.545 DEBUG 12856 --- [reactor-http-nio-16] reactor.netty.channel.BootstrapHandlers  : [id: 0x4d1bd0f3, L:/10.5.0.2:8080 - R:/10.5.0.2:57459] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.545 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.545 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.545 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.545 DEBUG 12856 --- [reactor-http-nio-15] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.545 DEBUG 12856 --- [reactor-http-nio-1] reactor.netty.channel.BootstrapHandlers  : [id: 0x60112a4e, L:/10.5.0.2:8080 - R:/10.5.0.2:57460] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.545 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x4d1bd0f3, L:/10.5.0.2:8080 - R:/10.5.0.2:57459] Increasing pending responses, now 1
2019-07-08 09:27:14.545 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [2aff4c36] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.545 DEBUG 12856 --- [reactor-http-nio-16] reactor.netty.http.server.HttpServer     : [id: 0x4d1bd0f3, L:/10.5.0.2:8080 - R:/10.5.0.2:57459] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.545 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x2aff4c36, L:/10.5.0.2:8080 - R:/10.5.0.2:57451] Last HTTP response frame
2019-07-08 09:27:14.545 DEBUG 12856 --- [reactor-http-nio-16] o.s.w.s.adapter.HttpWebHandlerAdapter    : [4d1bd0f3] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.545 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.545 DEBUG 12856 --- [reactor-http-nio-15] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.545 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x60112a4e, L:/10.5.0.2:8080 - R:/10.5.0.2:57460] Increasing pending responses, now 1
2019-07-08 09:27:14.545 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x2aff4c36, L:/10.5.0.2:8080 - R:/10.5.0.2:57451] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.545 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.546 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : [4d1bd0f3] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.545 DEBUG 12856 --- [reactor-http-nio-15] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.546 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.545 DEBUG 12856 --- [reactor-http-nio-1] reactor.netty.http.server.HttpServer     : [id: 0x60112a4e, L:/10.5.0.2:8080 - R:/10.5.0.2:57460] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.546 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.546 DEBUG 12856 --- [reactor-http-nio-16] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.546 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x2aff4c36, L:/10.5.0.2:8080 - R:/10.5.0.2:57451] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.546 DEBUG 12856 --- [reactor-http-nio-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [60112a4e] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.546 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.546 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.546 DEBUG 12856 --- [reactor-http-nio-16] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.546 DEBUG 12856 --- [reactor-http-nio-16] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.546 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x2aff4c36, L:/10.5.0.2:8080 - R:/10.5.0.2:57451] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.546 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.546 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.546 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.546 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.546 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : [60112a4e] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.547 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.547 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.547 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.547 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.547 DEBUG 12856 --- [reactor-http-nio-1] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.547 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.547 DEBUG 12856 --- [reactor-http-nio-1] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.547 DEBUG 12856 --- [reactor-http-nio-1] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.547 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.547 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.547 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x650f692d, L:/10.5.0.2:8080 - R:/10.5.0.2:57461] New http connection, requesting read
2019-07-08 09:27:14.547 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.548 DEBUG 12856 --- [reactor-http-nio-2] reactor.netty.channel.BootstrapHandlers  : [id: 0x650f692d, L:/10.5.0.2:8080 - R:/10.5.0.2:57461] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.548 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.548 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x650f692d, L:/10.5.0.2:8080 - R:/10.5.0.2:57461] Increasing pending responses, now 1
2019-07-08 09:27:14.548 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.548 DEBUG 12856 --- [reactor-http-nio-2] reactor.netty.http.server.HttpServer     : [id: 0x650f692d, L:/10.5.0.2:8080 - R:/10.5.0.2:57461] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.548 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 24 bytes, 9 commands in the stack
2019-07-08 09:27:14.548 DEBUG 12856 --- [reactor-http-nio-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [650f692d] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.548 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 9 commands
2019-07-08 09:27:14.548 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.548 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.548 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.548 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : [650f692d] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.548 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.548 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.548 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.548 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [614516ca] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.548 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x614516ca, L:/10.5.0.2:8080 - R:/10.5.0.2:57452] Last HTTP response frame
2019-07-08 09:27:14.548 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x614516ca, L:/10.5.0.2:8080 - R:/10.5.0.2:57452] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.548 DEBUG 12856 --- [reactor-http-nio-2] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.548 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.549 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x614516ca, L:/10.5.0.2:8080 - R:/10.5.0.2:57452] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.549 DEBUG 12856 --- [reactor-http-nio-2] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.549 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.549 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x614516ca, L:/10.5.0.2:8080 - R:/10.5.0.2:57452] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.549 DEBUG 12856 --- [reactor-http-nio-2] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.549 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.549 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.549 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [8decb164] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.549 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x8decb164, L:/10.5.0.2:8080 - R:/10.5.0.2:57453] Last HTTP response frame
2019-07-08 09:27:14.549 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0xd693b447, L:/10.5.0.2:8080 - R:/10.5.0.2:57462] New http connection, requesting read
2019-07-08 09:27:14.549 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x8decb164, L:/10.5.0.2:8080 - R:/10.5.0.2:57453] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.549 DEBUG 12856 --- [reactor-http-nio-3] reactor.netty.channel.BootstrapHandlers  : [id: 0xd693b447, L:/10.5.0.2:8080 - R:/10.5.0.2:57462] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.549 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x8decb164, L:/10.5.0.2:8080 - R:/10.5.0.2:57453] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.549 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.549 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0xd693b447, L:/10.5.0.2:8080 - R:/10.5.0.2:57462] Increasing pending responses, now 1
2019-07-08 09:27:14.549 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.549 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x8decb164, L:/10.5.0.2:8080 - R:/10.5.0.2:57453] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.549 DEBUG 12856 --- [reactor-http-nio-3] reactor.netty.http.server.HttpServer     : [id: 0xd693b447, L:/10.5.0.2:8080 - R:/10.5.0.2:57462] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.549 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 48 bytes, 8 commands in the stack
2019-07-08 09:27:14.549 DEBUG 12856 --- [reactor-http-nio-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [d693b447] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.549 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.549 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.549 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.549 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.549 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x45d66991, L:/10.5.0.2:8080 - R:/10.5.0.2:57463] New http connection, requesting read
2019-07-08 09:27:14.549 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.549 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : [d693b447] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.550 DEBUG 12856 --- [reactor-http-nio-4] reactor.netty.channel.BootstrapHandlers  : [id: 0x45d66991, L:/10.5.0.2:8080 - R:/10.5.0.2:57463] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.550 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.550 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.550 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x45d66991, L:/10.5.0.2:8080 - R:/10.5.0.2:57463] Increasing pending responses, now 1
2019-07-08 09:27:14.550 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [0cb31684] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.550 DEBUG 12856 --- [reactor-http-nio-4] reactor.netty.http.server.HttpServer     : [id: 0x45d66991, L:/10.5.0.2:8080 - R:/10.5.0.2:57463] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.550 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x0cb31684, L:/10.5.0.2:8080 - R:/10.5.0.2:57454] Last HTTP response frame
2019-07-08 09:27:14.550 DEBUG 12856 --- [reactor-http-nio-4] o.s.w.s.adapter.HttpWebHandlerAdapter    : [45d66991] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.550 DEBUG 12856 --- [reactor-http-nio-3] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.550 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.550 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x0cb31684, L:/10.5.0.2:8080 - R:/10.5.0.2:57454] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.550 DEBUG 12856 --- [reactor-http-nio-3] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.552 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.552 DEBUG 12856 --- [reactor-http-nio-3] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.552 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.552 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x0cb31684, L:/10.5.0.2:8080 - R:/10.5.0.2:57454] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.552 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : [45d66991] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.552 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.552 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x0cb31684, L:/10.5.0.2:8080 - R:/10.5.0.2:57454] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.553 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.552 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.553 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.553 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0xb3639a30, L:/10.5.0.2:8080 - R:/10.5.0.2:57464] New http connection, requesting read
2019-07-08 09:27:14.553 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [d4d5d49a] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.553 DEBUG 12856 --- [reactor-http-nio-5] reactor.netty.channel.BootstrapHandlers  : [id: 0xb3639a30, L:/10.5.0.2:8080 - R:/10.5.0.2:57464] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.553 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xd4d5d49a, L:/10.5.0.2:8080 - R:/10.5.0.2:57455] Last HTTP response frame
2019-07-08 09:27:14.553 DEBUG 12856 --- [reactor-http-nio-4] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.553 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xd4d5d49a, L:/10.5.0.2:8080 - R:/10.5.0.2:57455] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.553 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0xb3639a30, L:/10.5.0.2:8080 - R:/10.5.0.2:57464] Increasing pending responses, now 1
2019-07-08 09:27:14.553 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0xd4d5d49a, L:/10.5.0.2:8080 - R:/10.5.0.2:57455] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.553 DEBUG 12856 --- [reactor-http-nio-4] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.553 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.553 DEBUG 12856 --- [reactor-http-nio-5] reactor.netty.http.server.HttpServer     : [id: 0xb3639a30, L:/10.5.0.2:8080 - R:/10.5.0.2:57464] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.553 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0xd4d5d49a, L:/10.5.0.2:8080 - R:/10.5.0.2:57455] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.553 DEBUG 12856 --- [reactor-http-nio-4] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.553 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.553 DEBUG 12856 --- [reactor-http-nio-5] o.s.w.s.adapter.HttpWebHandlerAdapter    : [b3639a30] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.553 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.553 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.553 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.553 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.554 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x659d2f33, L:/10.5.0.2:8080 - R:/10.5.0.2:57465] New http connection, requesting read
2019-07-08 09:27:14.554 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [7cac90bf] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.554 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : [b3639a30] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.554 DEBUG 12856 --- [reactor-http-nio-6] reactor.netty.channel.BootstrapHandlers  : [id: 0x659d2f33, L:/10.5.0.2:8080 - R:/10.5.0.2:57465] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.554 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x659d2f33, L:/10.5.0.2:8080 - R:/10.5.0.2:57465] Increasing pending responses, now 1
2019-07-08 09:27:14.554 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x7cac90bf, L:/10.5.0.2:8080 - R:/10.5.0.2:57456] Last HTTP response frame
2019-07-08 09:27:14.554 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.554 DEBUG 12856 --- [reactor-http-nio-6] reactor.netty.http.server.HttpServer     : [id: 0x659d2f33, L:/10.5.0.2:8080 - R:/10.5.0.2:57465] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.554 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x7cac90bf, L:/10.5.0.2:8080 - R:/10.5.0.2:57456] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.554 DEBUG 12856 --- [reactor-http-nio-6] o.s.w.s.adapter.HttpWebHandlerAdapter    : [659d2f33] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.554 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.554 DEBUG 12856 --- [reactor-http-nio-5] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.554 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x7cac90bf, L:/10.5.0.2:8080 - R:/10.5.0.2:57456] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.555 DEBUG 12856 --- [reactor-http-nio-5] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.554 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.555 DEBUG 12856 --- [reactor-http-nio-5] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.555 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.555 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x7cac90bf, L:/10.5.0.2:8080 - R:/10.5.0.2:57456] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.555 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.555 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.555 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : [659d2f33] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.555 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.555 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x0851fecf, L:/10.5.0.2:8080 - R:/10.5.0.2:57466] New http connection, requesting read
2019-07-08 09:27:14.555 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.555 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [f240cf1f] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.555 DEBUG 12856 --- [reactor-http-nio-7] reactor.netty.channel.BootstrapHandlers  : [id: 0x0851fecf, L:/10.5.0.2:8080 - R:/10.5.0.2:57466] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.556 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xf240cf1f, L:/10.5.0.2:8080 - R:/10.5.0.2:57457] Last HTTP response frame
2019-07-08 09:27:14.556 DEBUG 12856 --- [reactor-http-nio-6] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.556 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x0851fecf, L:/10.5.0.2:8080 - R:/10.5.0.2:57466] Increasing pending responses, now 1
2019-07-08 09:27:14.556 DEBUG 12856 --- [reactor-http-nio-6] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.556 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xf240cf1f, L:/10.5.0.2:8080 - R:/10.5.0.2:57457] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.556 DEBUG 12856 --- [reactor-http-nio-7] reactor.netty.http.server.HttpServer     : [id: 0x0851fecf, L:/10.5.0.2:8080 - R:/10.5.0.2:57466] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.556 DEBUG 12856 --- [reactor-http-nio-6] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.556 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.556 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0xf240cf1f, L:/10.5.0.2:8080 - R:/10.5.0.2:57457] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.556 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.556 DEBUG 12856 --- [reactor-http-nio-7] o.s.w.s.adapter.HttpWebHandlerAdapter    : [0851fecf] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.556 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0xf240cf1f, L:/10.5.0.2:8080 - R:/10.5.0.2:57457] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.556 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.556 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.556 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.556 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.557 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.557 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x7f3d06e1, L:/10.5.0.2:8080 - R:/10.5.0.2:57467] New http connection, requesting read
2019-07-08 09:27:14.557 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : [0851fecf] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.557 DEBUG 12856 --- [reactor-http-nio-8] reactor.netty.channel.BootstrapHandlers  : [id: 0x7f3d06e1, L:/10.5.0.2:8080 - R:/10.5.0.2:57467] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.557 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.557 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x7f3d06e1, L:/10.5.0.2:8080 - R:/10.5.0.2:57467] Increasing pending responses, now 1
2019-07-08 09:27:14.557 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.557 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.557 DEBUG 12856 --- [reactor-http-nio-8] reactor.netty.http.server.HttpServer     : [id: 0x7f3d06e1, L:/10.5.0.2:8080 - R:/10.5.0.2:57467] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.557 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.557 DEBUG 12856 --- [reactor-http-nio-8] o.s.w.s.adapter.HttpWebHandlerAdapter    : [7f3d06e1] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.557 DEBUG 12856 --- [reactor-http-nio-7] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.558 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 48 bytes, 8 commands in the stack
2019-07-08 09:27:14.558 DEBUG 12856 --- [reactor-http-nio-7] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.558 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.558 DEBUG 12856 --- [reactor-http-nio-7] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.558 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.558 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.558 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.558 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : [7f3d06e1] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.558 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.558 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.558 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.559 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [12a05865] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.559 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x12a05865, L:/10.5.0.2:8080 - R:/10.5.0.2:57458] Last HTTP response frame
2019-07-08 09:27:14.559 DEBUG 12856 --- [reactor-http-nio-8] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.559 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x12a05865, L:/10.5.0.2:8080 - R:/10.5.0.2:57458] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.559 DEBUG 12856 --- [reactor-http-nio-8] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.559 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x12a05865, L:/10.5.0.2:8080 - R:/10.5.0.2:57458] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.559 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.559 DEBUG 12856 --- [reactor-http-nio-8] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.559 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x12a05865, L:/10.5.0.2:8080 - R:/10.5.0.2:57458] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.559 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.559 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.559 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.559 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [4d1bd0f3] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.559 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x4d1bd0f3, L:/10.5.0.2:8080 - R:/10.5.0.2:57459] Last HTTP response frame
2019-07-08 09:27:14.559 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x4d1bd0f3, L:/10.5.0.2:8080 - R:/10.5.0.2:57459] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.559 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.559 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x4d1bd0f3, L:/10.5.0.2:8080 - R:/10.5.0.2:57459] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.559 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0xd6442db2, L:/10.5.0.2:8080 - R:/10.5.0.2:57468] New http connection, requesting read
2019-07-08 09:27:14.559 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x4d1bd0f3, L:/10.5.0.2:8080 - R:/10.5.0.2:57459] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.559 DEBUG 12856 --- [reactor-http-nio-9] reactor.netty.channel.BootstrapHandlers  : [id: 0xd6442db2, L:/10.5.0.2:8080 - R:/10.5.0.2:57468] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.559 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.559 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0xd6442db2, L:/10.5.0.2:8080 - R:/10.5.0.2:57468] Increasing pending responses, now 1
2019-07-08 09:27:14.559 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.559 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0xa0b40213, L:/10.5.0.2:8080 - R:/10.5.0.2:57469] New http connection, requesting read
2019-07-08 09:27:14.559 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.559 DEBUG 12856 --- [reactor-http-nio-9] reactor.netty.http.server.HttpServer     : [id: 0xd6442db2, L:/10.5.0.2:8080 - R:/10.5.0.2:57468] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.560 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [60112a4e] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.560 DEBUG 12856 --- [reactor-http-nio-9] o.s.w.s.adapter.HttpWebHandlerAdapter    : [d6442db2] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.560 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x60112a4e, L:/10.5.0.2:8080 - R:/10.5.0.2:57460] Last HTTP response frame
2019-07-08 09:27:14.559 DEBUG 12856 --- [reactor-http-nio-10] reactor.netty.channel.BootstrapHandlers  : [id: 0xa0b40213, L:/10.5.0.2:8080 - R:/10.5.0.2:57469] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.560 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.560 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x60112a4e, L:/10.5.0.2:8080 - R:/10.5.0.2:57460] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.560 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0xa0b40213, L:/10.5.0.2:8080 - R:/10.5.0.2:57469] Increasing pending responses, now 1
2019-07-08 09:27:14.560 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.560 DEBUG 12856 --- [reactor-http-nio-10] reactor.netty.http.server.HttpServer     : [id: 0xa0b40213, L:/10.5.0.2:8080 - R:/10.5.0.2:57469] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.560 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.560 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x60112a4e, L:/10.5.0.2:8080 - R:/10.5.0.2:57460] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.560 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.560 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x60112a4e, L:/10.5.0.2:8080 - R:/10.5.0.2:57460] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.560 DEBUG 12856 --- [reactor-http-nio-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [a0b40213] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.560 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : [d6442db2] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.560 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.560 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.560 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.560 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.560 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.560 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0xdeb28a2c, L:/10.5.0.2:8080 - R:/10.5.0.2:57470] New http connection, requesting read
2019-07-08 09:27:14.560 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [650f692d] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.560 DEBUG 12856 --- [reactor-http-nio-9] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.560 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x650f692d, L:/10.5.0.2:8080 - R:/10.5.0.2:57461] Last HTTP response frame
2019-07-08 09:27:14.561 DEBUG 12856 --- [reactor-http-nio-9] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.560 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : [a0b40213] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.561 DEBUG 12856 --- [reactor-http-nio-9] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.560 DEBUG 12856 --- [reactor-http-nio-11] reactor.netty.channel.BootstrapHandlers  : [id: 0xdeb28a2c, L:/10.5.0.2:8080 - R:/10.5.0.2:57470] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.561 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x650f692d, L:/10.5.0.2:8080 - R:/10.5.0.2:57461] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.561 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.561 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0xdeb28a2c, L:/10.5.0.2:8080 - R:/10.5.0.2:57470] Increasing pending responses, now 1
2019-07-08 09:27:14.561 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.561 DEBUG 12856 --- [reactor-http-nio-11] reactor.netty.http.server.HttpServer     : [id: 0xdeb28a2c, L:/10.5.0.2:8080 - R:/10.5.0.2:57470] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.561 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x650f692d, L:/10.5.0.2:8080 - R:/10.5.0.2:57461] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.561 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.561 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x650f692d, L:/10.5.0.2:8080 - R:/10.5.0.2:57461] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.561 DEBUG 12856 --- [reactor-http-nio-10] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.561 DEBUG 12856 --- [reactor-http-nio-11] o.s.w.s.adapter.HttpWebHandlerAdapter    : [deb28a2c] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.561 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.561 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.561 DEBUG 12856 --- [reactor-http-nio-10] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.561 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.561 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.561 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x4f4e2ab2, L:/10.5.0.2:8080 - R:/10.5.0.2:57471] New http connection, requesting read
2019-07-08 09:27:14.562 DEBUG 12856 --- [reactor-http-nio-10] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.562 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.562 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : [deb28a2c] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.562 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.562 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.562 DEBUG 12856 --- [reactor-http-nio-12] reactor.netty.channel.BootstrapHandlers  : [id: 0x4f4e2ab2, L:/10.5.0.2:8080 - R:/10.5.0.2:57471] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.562 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.562 DEBUG 12856 --- [reactor-http-nio-11] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.562 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x4f4e2ab2, L:/10.5.0.2:8080 - R:/10.5.0.2:57471] Increasing pending responses, now 1
2019-07-08 09:27:14.563 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.563 DEBUG 12856 --- [reactor-http-nio-11] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.563 DEBUG 12856 --- [reactor-http-nio-12] reactor.netty.http.server.HttpServer     : [id: 0x4f4e2ab2, L:/10.5.0.2:8080 - R:/10.5.0.2:57471] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.563 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 48 bytes, 8 commands in the stack
2019-07-08 09:27:14.563 DEBUG 12856 --- [reactor-http-nio-12] o.s.w.s.adapter.HttpWebHandlerAdapter    : [4f4e2ab2] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.563 DEBUG 12856 --- [reactor-http-nio-11] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.563 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.563 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.563 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.563 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.563 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.563 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : [4f4e2ab2] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.563 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.563 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.563 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [d693b447] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.563 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xd693b447, L:/10.5.0.2:8080 - R:/10.5.0.2:57462] Last HTTP response frame
2019-07-08 09:27:14.563 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xd693b447, L:/10.5.0.2:8080 - R:/10.5.0.2:57462] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.563 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.564 DEBUG 12856 --- [reactor-http-nio-12] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.564 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0xd693b447, L:/10.5.0.2:8080 - R:/10.5.0.2:57462] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.564 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.564 DEBUG 12856 --- [reactor-http-nio-12] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.564 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0xd693b447, L:/10.5.0.2:8080 - R:/10.5.0.2:57462] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.564 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.564 DEBUG 12856 --- [reactor-http-nio-12] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.564 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.564 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [45d66991] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.564 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x45d66991, L:/10.5.0.2:8080 - R:/10.5.0.2:57463] Last HTTP response frame
2019-07-08 09:27:14.564 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x677a71b4, L:/10.5.0.2:8080 - R:/10.5.0.2:57472] New http connection, requesting read
2019-07-08 09:27:14.564 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x45d66991, L:/10.5.0.2:8080 - R:/10.5.0.2:57463] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.564 DEBUG 12856 --- [reactor-http-nio-13] reactor.netty.channel.BootstrapHandlers  : [id: 0x677a71b4, L:/10.5.0.2:8080 - R:/10.5.0.2:57472] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.564 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x45d66991, L:/10.5.0.2:8080 - R:/10.5.0.2:57463] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.564 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.564 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x45d66991, L:/10.5.0.2:8080 - R:/10.5.0.2:57463] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.564 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x677a71b4, L:/10.5.0.2:8080 - R:/10.5.0.2:57472] Increasing pending responses, now 1
2019-07-08 09:27:14.564 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.565 DEBUG 12856 --- [reactor-http-nio-13] reactor.netty.http.server.HttpServer     : [id: 0x677a71b4, L:/10.5.0.2:8080 - R:/10.5.0.2:57472] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.565 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.565 DEBUG 12856 --- [reactor-http-nio-13] o.s.w.s.adapter.HttpWebHandlerAdapter    : [677a71b4] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.565 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.565 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.565 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x2cf2eaef, L:/10.5.0.2:8080 - R:/10.5.0.2:57473] New http connection, requesting read
2019-07-08 09:27:14.565 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.565 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [b3639a30] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.565 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xb3639a30, L:/10.5.0.2:8080 - R:/10.5.0.2:57464] Last HTTP response frame
2019-07-08 09:27:14.565 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xb3639a30, L:/10.5.0.2:8080 - R:/10.5.0.2:57464] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.565 DEBUG 12856 --- [reactor-http-nio-14] reactor.netty.channel.BootstrapHandlers  : [id: 0x2cf2eaef, L:/10.5.0.2:8080 - R:/10.5.0.2:57473] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.565 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0xb3639a30, L:/10.5.0.2:8080 - R:/10.5.0.2:57464] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.565 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0xb3639a30, L:/10.5.0.2:8080 - R:/10.5.0.2:57464] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.565 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : [677a71b4] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.565 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.565 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x2cf2eaef, L:/10.5.0.2:8080 - R:/10.5.0.2:57473] Increasing pending responses, now 1
2019-07-08 09:27:14.565 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.565 DEBUG 12856 --- [reactor-http-nio-14] reactor.netty.http.server.HttpServer     : [id: 0x2cf2eaef, L:/10.5.0.2:8080 - R:/10.5.0.2:57473] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.565 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.565 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.566 DEBUG 12856 --- [reactor-http-nio-13] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.565 DEBUG 12856 --- [reactor-http-nio-14] o.s.w.s.adapter.HttpWebHandlerAdapter    : [2cf2eaef] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.566 DEBUG 12856 --- [reactor-http-nio-13] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.565 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x76eea135, L:/10.5.0.2:8080 - R:/10.5.0.2:57474] New http connection, requesting read
2019-07-08 09:27:14.566 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.566 DEBUG 12856 --- [reactor-http-nio-13] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.566 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.566 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.566 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : [2cf2eaef] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.566 DEBUG 12856 --- [reactor-http-nio-15] reactor.netty.channel.BootstrapHandlers  : [id: 0x76eea135, L:/10.5.0.2:8080 - R:/10.5.0.2:57474] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.566 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x76eea135, L:/10.5.0.2:8080 - R:/10.5.0.2:57474] Increasing pending responses, now 1
2019-07-08 09:27:14.566 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [659d2f33] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.566 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.566 DEBUG 12856 --- [reactor-http-nio-15] reactor.netty.http.server.HttpServer     : [id: 0x76eea135, L:/10.5.0.2:8080 - R:/10.5.0.2:57474] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.566 DEBUG 12856 --- [reactor-http-nio-14] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.566 DEBUG 12856 --- [reactor-http-nio-14] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.566 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x659d2f33, L:/10.5.0.2:8080 - R:/10.5.0.2:57465] Last HTTP response frame
2019-07-08 09:27:14.566 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x659d2f33, L:/10.5.0.2:8080 - R:/10.5.0.2:57465] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.566 DEBUG 12856 --- [reactor-http-nio-15] o.s.w.s.adapter.HttpWebHandlerAdapter    : [76eea135] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.566 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.566 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.566 DEBUG 12856 --- [reactor-http-nio-14] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.566 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.566 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.566 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x659d2f33, L:/10.5.0.2:8080 - R:/10.5.0.2:57465] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.566 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : [76eea135] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.567 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x659d2f33, L:/10.5.0.2:8080 - R:/10.5.0.2:57465] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.567 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.567 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.567 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.567 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x1f59ed4b, L:/10.5.0.2:8080 - R:/10.5.0.2:57475] New http connection, requesting read
2019-07-08 09:27:14.567 DEBUG 12856 --- [reactor-http-nio-15] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.567 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.567 DEBUG 12856 --- [reactor-http-nio-16] reactor.netty.channel.BootstrapHandlers  : [id: 0x1f59ed4b, L:/10.5.0.2:8080 - R:/10.5.0.2:57475] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.567 DEBUG 12856 --- [reactor-http-nio-15] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.567 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.567 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x1f59ed4b, L:/10.5.0.2:8080 - R:/10.5.0.2:57475] Increasing pending responses, now 1
2019-07-08 09:27:14.568 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.567 DEBUG 12856 --- [reactor-http-nio-15] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.568 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.568 DEBUG 12856 --- [reactor-http-nio-16] reactor.netty.http.server.HttpServer     : [id: 0x1f59ed4b, L:/10.5.0.2:8080 - R:/10.5.0.2:57475] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.568 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.568 DEBUG 12856 --- [reactor-http-nio-16] o.s.w.s.adapter.HttpWebHandlerAdapter    : [1f59ed4b] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.568 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.568 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.568 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 48 bytes, 9 commands in the stack
2019-07-08 09:27:14.568 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.568 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 9 commands
2019-07-08 09:27:14.568 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : [1f59ed4b] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.568 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.568 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.568 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.569 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.569 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [0851fecf] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.569 DEBUG 12856 --- [reactor-http-nio-16] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.569 DEBUG 12856 --- [reactor-http-nio-16] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.569 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x0851fecf, L:/10.5.0.2:8080 - R:/10.5.0.2:57466] Last HTTP response frame
2019-07-08 09:27:14.569 DEBUG 12856 --- [reactor-http-nio-16] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.569 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x0851fecf, L:/10.5.0.2:8080 - R:/10.5.0.2:57466] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.569 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.569 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x0851fecf, L:/10.5.0.2:8080 - R:/10.5.0.2:57466] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.569 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.569 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x0851fecf, L:/10.5.0.2:8080 - R:/10.5.0.2:57466] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.569 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.569 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.569 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [7f3d06e1] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.569 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x7f3d06e1, L:/10.5.0.2:8080 - R:/10.5.0.2:57467] Last HTTP response frame
2019-07-08 09:27:14.569 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x7f3d06e1, L:/10.5.0.2:8080 - R:/10.5.0.2:57467] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.569 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.569 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x7f3d06e1, L:/10.5.0.2:8080 - R:/10.5.0.2:57467] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.569 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x4b8c6110, L:/10.5.0.2:8080 - R:/10.5.0.2:57476] New http connection, requesting read
2019-07-08 09:27:14.569 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.570 DEBUG 12856 --- [reactor-http-nio-1] reactor.netty.channel.BootstrapHandlers  : [id: 0x4b8c6110, L:/10.5.0.2:8080 - R:/10.5.0.2:57476] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.570 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x4b8c6110, L:/10.5.0.2:8080 - R:/10.5.0.2:57476] Increasing pending responses, now 1
2019-07-08 09:27:14.570 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x7f3d06e1, L:/10.5.0.2:8080 - R:/10.5.0.2:57467] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.570 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.570 DEBUG 12856 --- [reactor-http-nio-1] reactor.netty.http.server.HttpServer     : [id: 0x4b8c6110, L:/10.5.0.2:8080 - R:/10.5.0.2:57476] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.570 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.570 DEBUG 12856 --- [reactor-http-nio-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [4b8c6110] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.570 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [d6442db2] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.570 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.570 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xd6442db2, L:/10.5.0.2:8080 - R:/10.5.0.2:57468] Last HTTP response frame
2019-07-08 09:27:14.570 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.570 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xd6442db2, L:/10.5.0.2:8080 - R:/10.5.0.2:57468] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.570 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : [4b8c6110] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.570 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.570 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0xd6442db2, L:/10.5.0.2:8080 - R:/10.5.0.2:57468] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.570 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.570 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.570 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0xd6442db2, L:/10.5.0.2:8080 - R:/10.5.0.2:57468] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.571 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.571 DEBUG 12856 --- [reactor-http-nio-1] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.571 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.571 DEBUG 12856 --- [reactor-http-nio-1] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.571 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [a0b40213] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.571 DEBUG 12856 --- [reactor-http-nio-1] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.571 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xa0b40213, L:/10.5.0.2:8080 - R:/10.5.0.2:57469] Last HTTP response frame
2019-07-08 09:27:14.571 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xa0b40213, L:/10.5.0.2:8080 - R:/10.5.0.2:57469] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.571 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0xc152cd5d, L:/10.5.0.2:8080 - R:/10.5.0.2:57478] New http connection, requesting read
2019-07-08 09:27:14.571 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0xa0b40213, L:/10.5.0.2:8080 - R:/10.5.0.2:57469] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.571 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0xab7795c5, L:/10.5.0.2:8080 - R:/10.5.0.2:57477] New http connection, requesting read
2019-07-08 09:27:14.571 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0xa0b40213, L:/10.5.0.2:8080 - R:/10.5.0.2:57469] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.571 DEBUG 12856 --- [reactor-http-nio-2] reactor.netty.channel.BootstrapHandlers  : [id: 0xab7795c5, L:/10.5.0.2:8080 - R:/10.5.0.2:57477] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.571 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.571 DEBUG 12856 --- [reactor-http-nio-3] reactor.netty.channel.BootstrapHandlers  : [id: 0xc152cd5d, L:/10.5.0.2:8080 - R:/10.5.0.2:57478] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.571 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0xab7795c5, L:/10.5.0.2:8080 - R:/10.5.0.2:57477] Increasing pending responses, now 1
2019-07-08 09:27:14.571 DEBUG 12856 --- [reactor-http-nio-2] reactor.netty.http.server.HttpServer     : [id: 0xab7795c5, L:/10.5.0.2:8080 - R:/10.5.0.2:57477] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.571 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.571 DEBUG 12856 --- [reactor-http-nio-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [ab7795c5] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.571 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.571 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0xeec01a0e, L:/10.5.0.2:8080 - R:/10.5.0.2:57479] New http connection, requesting read
2019-07-08 09:27:14.572 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.571 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0xc152cd5d, L:/10.5.0.2:8080 - R:/10.5.0.2:57478] Increasing pending responses, now 1
2019-07-08 09:27:14.571 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.572 DEBUG 12856 --- [reactor-http-nio-3] reactor.netty.http.server.HttpServer     : [id: 0xc152cd5d, L:/10.5.0.2:8080 - R:/10.5.0.2:57478] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.572 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.572 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : [ab7795c5] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.572 DEBUG 12856 --- [reactor-http-nio-4] reactor.netty.channel.BootstrapHandlers  : [id: 0xeec01a0e, L:/10.5.0.2:8080 - R:/10.5.0.2:57479] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.572 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 60 bytes, 7 commands in the stack
2019-07-08 09:27:14.572 DEBUG 12856 --- [reactor-http-nio-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [c152cd5d] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.572 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.572 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0xeec01a0e, L:/10.5.0.2:8080 - R:/10.5.0.2:57479] Increasing pending responses, now 1
2019-07-08 09:27:14.572 DEBUG 12856 --- [reactor-http-nio-4] reactor.netty.http.server.HttpServer     : [id: 0xeec01a0e, L:/10.5.0.2:8080 - R:/10.5.0.2:57479] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.572 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.572 DEBUG 12856 --- [reactor-http-nio-2] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.572 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.572 DEBUG 12856 --- [reactor-http-nio-2] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.572 DEBUG 12856 --- [reactor-http-nio-4] o.s.w.s.adapter.HttpWebHandlerAdapter    : [eec01a0e] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.572 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.572 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.572 DEBUG 12856 --- [reactor-http-nio-2] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.572 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : [c152cd5d] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.572 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.572 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.572 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.572 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.572 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.573 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : [eec01a0e] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.573 DEBUG 12856 --- [reactor-http-nio-3] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.573 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [deb28a2c] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.573 DEBUG 12856 --- [reactor-http-nio-3] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.573 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.573 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xdeb28a2c, L:/10.5.0.2:8080 - R:/10.5.0.2:57470] Last HTTP response frame
2019-07-08 09:27:14.573 DEBUG 12856 --- [reactor-http-nio-3] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.573 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xdeb28a2c, L:/10.5.0.2:8080 - R:/10.5.0.2:57470] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.573 DEBUG 12856 --- [reactor-http-nio-4] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.573 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.573 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0xdeb28a2c, L:/10.5.0.2:8080 - R:/10.5.0.2:57470] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.573 DEBUG 12856 --- [reactor-http-nio-4] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.573 DEBUG 12856 --- [reactor-http-nio-4] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.573 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.573 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.573 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0xdeb28a2c, L:/10.5.0.2:8080 - R:/10.5.0.2:57470] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.573 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.573 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [4f4e2ab2] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.573 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x4f4e2ab2, L:/10.5.0.2:8080 - R:/10.5.0.2:57471] Last HTTP response frame
2019-07-08 09:27:14.573 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x4f4e2ab2, L:/10.5.0.2:8080 - R:/10.5.0.2:57471] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.573 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.573 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.573 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x4f4e2ab2, L:/10.5.0.2:8080 - R:/10.5.0.2:57471] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.574 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x3466c789, L:/10.5.0.2:8080 - R:/10.5.0.2:57480] New http connection, requesting read
2019-07-08 09:27:14.573 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.574 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x4f4e2ab2, L:/10.5.0.2:8080 - R:/10.5.0.2:57471] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.574 DEBUG 12856 --- [reactor-http-nio-5] reactor.netty.channel.BootstrapHandlers  : [id: 0x3466c789, L:/10.5.0.2:8080 - R:/10.5.0.2:57480] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.574 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.574 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [677a71b4] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.574 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x3466c789, L:/10.5.0.2:8080 - R:/10.5.0.2:57480] Increasing pending responses, now 1
2019-07-08 09:27:14.574 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x677a71b4, L:/10.5.0.2:8080 - R:/10.5.0.2:57472] Last HTTP response frame
2019-07-08 09:27:14.574 DEBUG 12856 --- [reactor-http-nio-5] reactor.netty.http.server.HttpServer     : [id: 0x3466c789, L:/10.5.0.2:8080 - R:/10.5.0.2:57480] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.574 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x114885eb, L:/10.5.0.2:8080 - R:/10.5.0.2:57481] New http connection, requesting read
2019-07-08 09:27:14.574 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x677a71b4, L:/10.5.0.2:8080 - R:/10.5.0.2:57472] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.574 DEBUG 12856 --- [reactor-http-nio-5] o.s.w.s.adapter.HttpWebHandlerAdapter    : [3466c789] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.574 DEBUG 12856 --- [reactor-http-nio-6] reactor.netty.channel.BootstrapHandlers  : [id: 0x114885eb, L:/10.5.0.2:8080 - R:/10.5.0.2:57481] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.574 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 4 commands
2019-07-08 09:27:14.574 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x114885eb, L:/10.5.0.2:8080 - R:/10.5.0.2:57481] Increasing pending responses, now 1
2019-07-08 09:27:14.574 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.574 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.574 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x677a71b4, L:/10.5.0.2:8080 - R:/10.5.0.2:57472] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.574 DEBUG 12856 --- [reactor-http-nio-6] reactor.netty.http.server.HttpServer     : [id: 0x114885eb, L:/10.5.0.2:8080 - R:/10.5.0.2:57481] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.574 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x677a71b4, L:/10.5.0.2:8080 - R:/10.5.0.2:57472] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.574 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.574 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.574 DEBUG 12856 --- [reactor-http-nio-6] o.s.w.s.adapter.HttpWebHandlerAdapter    : [114885eb] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.574 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.574 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0xf371b0c3, L:/10.5.0.2:8080 - R:/10.5.0.2:57482] New http connection, requesting read
2019-07-08 09:27:14.574 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : [3466c789] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.574 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.574 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [2cf2eaef] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.574 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.574 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : [114885eb] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.574 DEBUG 12856 --- [reactor-http-nio-7] reactor.netty.channel.BootstrapHandlers  : [id: 0xf371b0c3, L:/10.5.0.2:8080 - R:/10.5.0.2:57482] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.574 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.574 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x2cf2eaef, L:/10.5.0.2:8080 - R:/10.5.0.2:57473] Last HTTP response frame
2019-07-08 09:27:14.575 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x2cf2eaef, L:/10.5.0.2:8080 - R:/10.5.0.2:57473] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.575 DEBUG 12856 --- [reactor-http-nio-5] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.575 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x2cf2eaef, L:/10.5.0.2:8080 - R:/10.5.0.2:57473] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.575 DEBUG 12856 --- [reactor-http-nio-5] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.574 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.575 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0xf371b0c3, L:/10.5.0.2:8080 - R:/10.5.0.2:57482] Increasing pending responses, now 1
2019-07-08 09:27:14.575 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 3 commands
2019-07-08 09:27:14.575 DEBUG 12856 --- [reactor-http-nio-7] reactor.netty.http.server.HttpServer     : [id: 0xf371b0c3, L:/10.5.0.2:8080 - R:/10.5.0.2:57482] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.575 DEBUG 12856 --- [reactor-http-nio-5] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.575 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x2cf2eaef, L:/10.5.0.2:8080 - R:/10.5.0.2:57473] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.575 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.575 DEBUG 12856 --- [reactor-http-nio-7] o.s.w.s.adapter.HttpWebHandlerAdapter    : [f371b0c3] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.575 DEBUG 12856 --- [reactor-http-nio-6] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.575 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.575 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.575 DEBUG 12856 --- [reactor-http-nio-6] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.575 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.575 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.575 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x4e23d8c4, L:/10.5.0.2:8080 - R:/10.5.0.2:57483] New http connection, requesting read
2019-07-08 09:27:14.575 DEBUG 12856 --- [reactor-http-nio-6] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.575 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : [f371b0c3] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.575 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [76eea135] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.575 DEBUG 12856 --- [reactor-http-nio-8] reactor.netty.channel.BootstrapHandlers  : [id: 0x4e23d8c4, L:/10.5.0.2:8080 - R:/10.5.0.2:57483] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.575 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.575 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x76eea135, L:/10.5.0.2:8080 - R:/10.5.0.2:57474] Last HTTP response frame
2019-07-08 09:27:14.575 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x4e23d8c4, L:/10.5.0.2:8080 - R:/10.5.0.2:57483] Increasing pending responses, now 1
2019-07-08 09:27:14.576 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x76eea135, L:/10.5.0.2:8080 - R:/10.5.0.2:57474] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.576 DEBUG 12856 --- [reactor-http-nio-8] reactor.netty.http.server.HttpServer     : [id: 0x4e23d8c4, L:/10.5.0.2:8080 - R:/10.5.0.2:57483] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.576 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.576 DEBUG 12856 --- [reactor-http-nio-7] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.576 DEBUG 12856 --- [reactor-http-nio-8] o.s.w.s.adapter.HttpWebHandlerAdapter    : [4e23d8c4] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.576 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.576 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.576 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x76eea135, L:/10.5.0.2:8080 - R:/10.5.0.2:57474] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.576 DEBUG 12856 --- [reactor-http-nio-7] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.576 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x76eea135, L:/10.5.0.2:8080 - R:/10.5.0.2:57474] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.576 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.576 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.576 DEBUG 12856 --- [reactor-http-nio-7] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.576 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x0adc33fb, L:/10.5.0.2:8080 - R:/10.5.0.2:57484] New http connection, requesting read
2019-07-08 09:27:14.576 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.576 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : [4e23d8c4] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.576 DEBUG 12856 --- [reactor-http-nio-9] reactor.netty.channel.BootstrapHandlers  : [id: 0x0adc33fb, L:/10.5.0.2:8080 - R:/10.5.0.2:57484] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.576 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.576 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x0adc33fb, L:/10.5.0.2:8080 - R:/10.5.0.2:57484] Increasing pending responses, now 1
2019-07-08 09:27:14.576 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.576 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.576 DEBUG 12856 --- [reactor-http-nio-9] reactor.netty.http.server.HttpServer     : [id: 0x0adc33fb, L:/10.5.0.2:8080 - R:/10.5.0.2:57484] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.576 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.577 DEBUG 12856 --- [reactor-http-nio-9] o.s.w.s.adapter.HttpWebHandlerAdapter    : [0adc33fb] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.577 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.577 DEBUG 12856 --- [reactor-http-nio-8] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.577 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.577 DEBUG 12856 --- [reactor-http-nio-8] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.577 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.577 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.577 DEBUG 12856 --- [reactor-http-nio-8] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.577 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.577 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : [0adc33fb] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.577 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.577 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.577 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.577 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.577 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.577 DEBUG 12856 --- [reactor-http-nio-9] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.577 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 24 bytes, 9 commands in the stack
2019-07-08 09:27:14.577 DEBUG 12856 --- [reactor-http-nio-9] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.577 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 9 commands
2019-07-08 09:27:14.578 DEBUG 12856 --- [reactor-http-nio-9] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.578 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.578 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.578 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.578 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [1f59ed4b] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.578 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x1f59ed4b, L:/10.5.0.2:8080 - R:/10.5.0.2:57475] Last HTTP response frame
2019-07-08 09:27:14.578 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x1f59ed4b, L:/10.5.0.2:8080 - R:/10.5.0.2:57475] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.578 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.578 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x1f59ed4b, L:/10.5.0.2:8080 - R:/10.5.0.2:57475] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.578 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.578 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x1f59ed4b, L:/10.5.0.2:8080 - R:/10.5.0.2:57475] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.578 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.578 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.578 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [4b8c6110] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.578 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x4b8c6110, L:/10.5.0.2:8080 - R:/10.5.0.2:57476] Last HTTP response frame
2019-07-08 09:27:14.578 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x4b8c6110, L:/10.5.0.2:8080 - R:/10.5.0.2:57476] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.578 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.578 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.578 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0xa106d36f, L:/10.5.0.2:8080 - R:/10.5.0.2:57485] New http connection, requesting read
2019-07-08 09:27:14.578 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x4b8c6110, L:/10.5.0.2:8080 - R:/10.5.0.2:57476] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.578 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 12 bytes, 8 commands in the stack
2019-07-08 09:27:14.578 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x4b8c6110, L:/10.5.0.2:8080 - R:/10.5.0.2:57476] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.578 DEBUG 12856 --- [reactor-http-nio-10] reactor.netty.channel.BootstrapHandlers  : [id: 0xa106d36f, L:/10.5.0.2:8080 - R:/10.5.0.2:57485] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.578 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.578 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.578 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0xa106d36f, L:/10.5.0.2:8080 - R:/10.5.0.2:57485] Increasing pending responses, now 1
2019-07-08 09:27:14.578 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.578 DEBUG 12856 --- [reactor-http-nio-10] reactor.netty.http.server.HttpServer     : [id: 0xa106d36f, L:/10.5.0.2:8080 - R:/10.5.0.2:57485] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.578 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0xba10fbbb, L:/10.5.0.2:8080 - R:/10.5.0.2:57486] New http connection, requesting read
2019-07-08 09:27:14.579 DEBUG 12856 --- [reactor-http-nio-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [a106d36f] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.579 DEBUG 12856 --- [reactor-http-nio-11] reactor.netty.channel.BootstrapHandlers  : [id: 0xba10fbbb, L:/10.5.0.2:8080 - R:/10.5.0.2:57486] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.579 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.579 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.579 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [ab7795c5] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.579 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0xba10fbbb, L:/10.5.0.2:8080 - R:/10.5.0.2:57486] Increasing pending responses, now 1
2019-07-08 09:27:14.579 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.579 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xab7795c5, L:/10.5.0.2:8080 - R:/10.5.0.2:57477] Last HTTP response frame
2019-07-08 09:27:14.579 DEBUG 12856 --- [reactor-http-nio-11] reactor.netty.http.server.HttpServer     : [id: 0xba10fbbb, L:/10.5.0.2:8080 - R:/10.5.0.2:57486] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.579 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : [a106d36f] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.579 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xab7795c5, L:/10.5.0.2:8080 - R:/10.5.0.2:57477] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.579 DEBUG 12856 --- [reactor-http-nio-11] o.s.w.s.adapter.HttpWebHandlerAdapter    : [ba10fbbb] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.579 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.579 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 24 bytes, 7 commands in the stack
2019-07-08 09:27:14.579 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0xab7795c5, L:/10.5.0.2:8080 - R:/10.5.0.2:57477] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.579 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.579 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0xab7795c5, L:/10.5.0.2:8080 - R:/10.5.0.2:57477] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.579 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.579 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.579 DEBUG 12856 --- [reactor-http-nio-10] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.580 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : [ba10fbbb] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.580 DEBUG 12856 --- [reactor-http-nio-10] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.580 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.579 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.580 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x5a304ad6, L:/10.5.0.2:8080 - R:/10.5.0.2:57487] New http connection, requesting read
2019-07-08 09:27:14.580 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.580 DEBUG 12856 --- [reactor-http-nio-12] reactor.netty.channel.BootstrapHandlers  : [id: 0x5a304ad6, L:/10.5.0.2:8080 - R:/10.5.0.2:57487] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.580 DEBUG 12856 --- [reactor-http-nio-10] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.580 DEBUG 12856 --- [reactor-http-nio-11] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.580 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.580 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x5a304ad6, L:/10.5.0.2:8080 - R:/10.5.0.2:57487] Increasing pending responses, now 1
2019-07-08 09:27:14.580 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [c152cd5d] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.580 DEBUG 12856 --- [reactor-http-nio-11] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.580 DEBUG 12856 --- [reactor-http-nio-12] reactor.netty.http.server.HttpServer     : [id: 0x5a304ad6, L:/10.5.0.2:8080 - R:/10.5.0.2:57487] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.580 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xc152cd5d, L:/10.5.0.2:8080 - R:/10.5.0.2:57478] Last HTTP response frame
2019-07-08 09:27:14.580 DEBUG 12856 --- [reactor-http-nio-12] o.s.w.s.adapter.HttpWebHandlerAdapter    : [5a304ad6] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.580 DEBUG 12856 --- [reactor-http-nio-11] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.580 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xc152cd5d, L:/10.5.0.2:8080 - R:/10.5.0.2:57478] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.580 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.580 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.580 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0xc152cd5d, L:/10.5.0.2:8080 - R:/10.5.0.2:57478] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.580 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.580 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.580 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0xc152cd5d, L:/10.5.0.2:8080 - R:/10.5.0.2:57478] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.580 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : [5a304ad6] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.580 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.580 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.580 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.581 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0xdd2df63f, L:/10.5.0.2:8080 - R:/10.5.0.2:57488] New http connection, requesting read
2019-07-08 09:27:14.581 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [eec01a0e] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.581 DEBUG 12856 --- [reactor-http-nio-13] reactor.netty.channel.BootstrapHandlers  : [id: 0xdd2df63f, L:/10.5.0.2:8080 - R:/10.5.0.2:57488] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.581 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xeec01a0e, L:/10.5.0.2:8080 - R:/10.5.0.2:57479] Last HTTP response frame
2019-07-08 09:27:14.581 DEBUG 12856 --- [reactor-http-nio-12] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.581 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0xdd2df63f, L:/10.5.0.2:8080 - R:/10.5.0.2:57488] Increasing pending responses, now 1
2019-07-08 09:27:14.581 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xeec01a0e, L:/10.5.0.2:8080 - R:/10.5.0.2:57479] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.581 DEBUG 12856 --- [reactor-http-nio-12] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.581 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.581 DEBUG 12856 --- [reactor-http-nio-13] reactor.netty.http.server.HttpServer     : [id: 0xdd2df63f, L:/10.5.0.2:8080 - R:/10.5.0.2:57488] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.581 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0xeec01a0e, L:/10.5.0.2:8080 - R:/10.5.0.2:57479] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.581 DEBUG 12856 --- [reactor-http-nio-12] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.581 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.581 DEBUG 12856 --- [reactor-http-nio-13] o.s.w.s.adapter.HttpWebHandlerAdapter    : [dd2df63f] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.581 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0xeec01a0e, L:/10.5.0.2:8080 - R:/10.5.0.2:57479] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.581 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.581 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.581 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.581 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.581 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.581 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x9825be0c, L:/10.5.0.2:8080 - R:/10.5.0.2:57489] New http connection, requesting read
2019-07-08 09:27:14.581 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : [dd2df63f] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.581 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.581 DEBUG 12856 --- [reactor-http-nio-14] reactor.netty.channel.BootstrapHandlers  : [id: 0x9825be0c, L:/10.5.0.2:8080 - R:/10.5.0.2:57489] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.581 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 60 bytes, 8 commands in the stack
2019-07-08 09:27:14.581 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.581 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x9825be0c, L:/10.5.0.2:8080 - R:/10.5.0.2:57489] Increasing pending responses, now 1
2019-07-08 09:27:14.581 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.582 DEBUG 12856 --- [reactor-http-nio-14] reactor.netty.http.server.HttpServer     : [id: 0x9825be0c, L:/10.5.0.2:8080 - R:/10.5.0.2:57489] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.582 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.582 DEBUG 12856 --- [reactor-http-nio-14] o.s.w.s.adapter.HttpWebHandlerAdapter    : [9825be0c] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.582 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.582 DEBUG 12856 --- [reactor-http-nio-13] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.582 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.582 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.582 DEBUG 12856 --- [reactor-http-nio-13] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.582 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [3466c789] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.582 DEBUG 12856 --- [reactor-http-nio-13] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.582 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.582 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x3466c789, L:/10.5.0.2:8080 - R:/10.5.0.2:57480] Last HTTP response frame
2019-07-08 09:27:14.582 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : [9825be0c] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.582 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x3466c789, L:/10.5.0.2:8080 - R:/10.5.0.2:57480] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.582 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.582 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.582 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x3466c789, L:/10.5.0.2:8080 - R:/10.5.0.2:57480] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.582 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.582 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x3466c789, L:/10.5.0.2:8080 - R:/10.5.0.2:57480] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.582 DEBUG 12856 --- [reactor-http-nio-14] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.582 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.582 DEBUG 12856 --- [reactor-http-nio-14] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.582 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.583 DEBUG 12856 --- [reactor-http-nio-14] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.583 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x99d70dca, L:/10.5.0.2:8080 - R:/10.5.0.2:57490] New http connection, requesting read
2019-07-08 09:27:14.583 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [114885eb] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.583 DEBUG 12856 --- [reactor-http-nio-15] reactor.netty.channel.BootstrapHandlers  : [id: 0x99d70dca, L:/10.5.0.2:8080 - R:/10.5.0.2:57490] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.583 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x114885eb, L:/10.5.0.2:8080 - R:/10.5.0.2:57481] Last HTTP response frame
2019-07-08 09:27:14.583 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x99d70dca, L:/10.5.0.2:8080 - R:/10.5.0.2:57490] Increasing pending responses, now 1
2019-07-08 09:27:14.583 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x114885eb, L:/10.5.0.2:8080 - R:/10.5.0.2:57481] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.583 DEBUG 12856 --- [reactor-http-nio-15] reactor.netty.http.server.HttpServer     : [id: 0x99d70dca, L:/10.5.0.2:8080 - R:/10.5.0.2:57490] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.583 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x114885eb, L:/10.5.0.2:8080 - R:/10.5.0.2:57481] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.583 DEBUG 12856 --- [reactor-http-nio-15] o.s.w.s.adapter.HttpWebHandlerAdapter    : [99d70dca] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.583 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.583 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.583 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.583 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x114885eb, L:/10.5.0.2:8080 - R:/10.5.0.2:57481] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.583 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.583 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.583 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : [99d70dca] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.583 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.583 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.583 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0xcd1c5b60, L:/10.5.0.2:8080 - R:/10.5.0.2:57491] New http connection, requesting read
2019-07-08 09:27:14.583 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [f371b0c3] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.583 DEBUG 12856 --- [reactor-http-nio-16] reactor.netty.channel.BootstrapHandlers  : [id: 0xcd1c5b60, L:/10.5.0.2:8080 - R:/10.5.0.2:57491] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.583 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xf371b0c3, L:/10.5.0.2:8080 - R:/10.5.0.2:57482] Last HTTP response frame
2019-07-08 09:27:14.583 DEBUG 12856 --- [reactor-http-nio-15] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.583 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0xcd1c5b60, L:/10.5.0.2:8080 - R:/10.5.0.2:57491] Increasing pending responses, now 1
2019-07-08 09:27:14.583 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xf371b0c3, L:/10.5.0.2:8080 - R:/10.5.0.2:57482] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.583 DEBUG 12856 --- [reactor-http-nio-15] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.583 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.583 DEBUG 12856 --- [reactor-http-nio-16] reactor.netty.http.server.HttpServer     : [id: 0xcd1c5b60, L:/10.5.0.2:8080 - R:/10.5.0.2:57491] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.583 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0xf371b0c3, L:/10.5.0.2:8080 - R:/10.5.0.2:57482] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.583 DEBUG 12856 --- [reactor-http-nio-15] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.584 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.584 DEBUG 12856 --- [reactor-http-nio-16] o.s.w.s.adapter.HttpWebHandlerAdapter    : [cd1c5b60] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.584 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.584 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.584 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0xf371b0c3, L:/10.5.0.2:8080 - R:/10.5.0.2:57482] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.584 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.584 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.584 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x9b1eb2c7, L:/10.5.0.2:8080 - R:/10.5.0.2:57492] New http connection, requesting read
2019-07-08 09:27:14.584 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : [cd1c5b60] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.584 DEBUG 12856 --- [reactor-http-nio-1] reactor.netty.channel.BootstrapHandlers  : [id: 0x9b1eb2c7, L:/10.5.0.2:8080 - R:/10.5.0.2:57492] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.584 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [4e23d8c4] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.584 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.584 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x4e23d8c4, L:/10.5.0.2:8080 - R:/10.5.0.2:57483] Last HTTP response frame
2019-07-08 09:27:14.584 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x9b1eb2c7, L:/10.5.0.2:8080 - R:/10.5.0.2:57492] Increasing pending responses, now 1
2019-07-08 09:27:14.584 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x4e23d8c4, L:/10.5.0.2:8080 - R:/10.5.0.2:57483] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.584 DEBUG 12856 --- [reactor-http-nio-1] reactor.netty.http.server.HttpServer     : [id: 0x9b1eb2c7, L:/10.5.0.2:8080 - R:/10.5.0.2:57492] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.584 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 4 commands
2019-07-08 09:27:14.584 DEBUG 12856 --- [reactor-http-nio-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [9b1eb2c7] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.584 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.584 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x4e23d8c4, L:/10.5.0.2:8080 - R:/10.5.0.2:57483] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.584 DEBUG 12856 --- [reactor-http-nio-16] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.584 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x4e23d8c4, L:/10.5.0.2:8080 - R:/10.5.0.2:57483] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.584 DEBUG 12856 --- [reactor-http-nio-16] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.584 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.584 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.584 DEBUG 12856 --- [reactor-http-nio-16] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.584 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.584 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.584 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [0adc33fb] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.584 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : [9b1eb2c7] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.585 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x0adc33fb, L:/10.5.0.2:8080 - R:/10.5.0.2:57484] Last HTTP response frame
2019-07-08 09:27:14.585 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.585 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x0adc33fb, L:/10.5.0.2:8080 - R:/10.5.0.2:57484] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.585 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.585 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x0adc33fb, L:/10.5.0.2:8080 - R:/10.5.0.2:57484] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.585 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.585 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x0adc33fb, L:/10.5.0.2:8080 - R:/10.5.0.2:57484] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.585 DEBUG 12856 --- [reactor-http-nio-1] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.585 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.585 DEBUG 12856 --- [reactor-http-nio-1] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.585 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.585 DEBUG 12856 --- [reactor-http-nio-1] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.585 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.585 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.585 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0xdb7d9636, L:/10.5.0.2:8080 - R:/10.5.0.2:57493] New http connection, requesting read
2019-07-08 09:27:14.585 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x8040d9d9, L:/10.5.0.2:8080 - R:/10.5.0.2:57494] New http connection, requesting read
2019-07-08 09:27:14.585 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.585 DEBUG 12856 --- [reactor-http-nio-2] reactor.netty.channel.BootstrapHandlers  : [id: 0xdb7d9636, L:/10.5.0.2:8080 - R:/10.5.0.2:57493] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.585 DEBUG 12856 --- [reactor-http-nio-3] reactor.netty.channel.BootstrapHandlers  : [id: 0x8040d9d9, L:/10.5.0.2:8080 - R:/10.5.0.2:57494] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.585 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.585 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0xdb7d9636, L:/10.5.0.2:8080 - R:/10.5.0.2:57493] Increasing pending responses, now 1
2019-07-08 09:27:14.585 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.585 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x8040d9d9, L:/10.5.0.2:8080 - R:/10.5.0.2:57494] Increasing pending responses, now 1
2019-07-08 09:27:14.585 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.585 DEBUG 12856 --- [reactor-http-nio-2] reactor.netty.http.server.HttpServer     : [id: 0xdb7d9636, L:/10.5.0.2:8080 - R:/10.5.0.2:57493] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.585 DEBUG 12856 --- [reactor-http-nio-3] reactor.netty.http.server.HttpServer     : [id: 0x8040d9d9, L:/10.5.0.2:8080 - R:/10.5.0.2:57494] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.585 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 36 bytes, 8 commands in the stack
2019-07-08 09:27:14.586 DEBUG 12856 --- [reactor-http-nio-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [8040d9d9] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.585 DEBUG 12856 --- [reactor-http-nio-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [db7d9636] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.586 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.586 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.586 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.586 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.586 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.586 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.586 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : [8040d9d9] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.586 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.586 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.586 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.586 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : [db7d9636] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.586 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [a106d36f] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.586 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.586 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xa106d36f, L:/10.5.0.2:8080 - R:/10.5.0.2:57485] Last HTTP response frame
2019-07-08 09:27:14.586 DEBUG 12856 --- [reactor-http-nio-3] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.586 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xa106d36f, L:/10.5.0.2:8080 - R:/10.5.0.2:57485] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.586 DEBUG 12856 --- [reactor-http-nio-3] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.586 DEBUG 12856 --- [reactor-http-nio-2] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.586 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.587 DEBUG 12856 --- [reactor-http-nio-2] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.587 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.586 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0xa106d36f, L:/10.5.0.2:8080 - R:/10.5.0.2:57485] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.587 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.586 DEBUG 12856 --- [reactor-http-nio-3] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.587 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.587 DEBUG 12856 --- [reactor-http-nio-2] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.587 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [ba10fbbb] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.587 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0xa106d36f, L:/10.5.0.2:8080 - R:/10.5.0.2:57485] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.587 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xba10fbbb, L:/10.5.0.2:8080 - R:/10.5.0.2:57486] Last HTTP response frame
2019-07-08 09:27:14.587 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xba10fbbb, L:/10.5.0.2:8080 - R:/10.5.0.2:57486] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.587 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.587 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0xba10fbbb, L:/10.5.0.2:8080 - R:/10.5.0.2:57486] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.587 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.587 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0xba10fbbb, L:/10.5.0.2:8080 - R:/10.5.0.2:57486] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.587 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0xaa3be156, L:/10.5.0.2:8080 - R:/10.5.0.2:57495] New http connection, requesting read
2019-07-08 09:27:14.587 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.587 DEBUG 12856 --- [reactor-http-nio-4] reactor.netty.channel.BootstrapHandlers  : [id: 0xaa3be156, L:/10.5.0.2:8080 - R:/10.5.0.2:57495] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.587 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.587 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0xaa3be156, L:/10.5.0.2:8080 - R:/10.5.0.2:57495] Increasing pending responses, now 1
2019-07-08 09:27:14.587 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [5a304ad6] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.587 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0xfa22308c, L:/10.5.0.2:8080 - R:/10.5.0.2:57496] New http connection, requesting read
2019-07-08 09:27:14.587 DEBUG 12856 --- [reactor-http-nio-4] reactor.netty.http.server.HttpServer     : [id: 0xaa3be156, L:/10.5.0.2:8080 - R:/10.5.0.2:57495] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.587 DEBUG 12856 --- [reactor-http-nio-5] reactor.netty.channel.BootstrapHandlers  : [id: 0xfa22308c, L:/10.5.0.2:8080 - R:/10.5.0.2:57496] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.587 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x5a304ad6, L:/10.5.0.2:8080 - R:/10.5.0.2:57487] Last HTTP response frame
2019-07-08 09:27:14.587 DEBUG 12856 --- [reactor-http-nio-4] o.s.w.s.adapter.HttpWebHandlerAdapter    : [aa3be156] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.587 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x5a304ad6, L:/10.5.0.2:8080 - R:/10.5.0.2:57487] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.587 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0xfa22308c, L:/10.5.0.2:8080 - R:/10.5.0.2:57496] Increasing pending responses, now 1
2019-07-08 09:27:14.587 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.587 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.587 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x5a304ad6, L:/10.5.0.2:8080 - R:/10.5.0.2:57487] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.587 DEBUG 12856 --- [reactor-http-nio-5] reactor.netty.http.server.HttpServer     : [id: 0xfa22308c, L:/10.5.0.2:8080 - R:/10.5.0.2:57496] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.587 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.587 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.587 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x5a304ad6, L:/10.5.0.2:8080 - R:/10.5.0.2:57487] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.587 DEBUG 12856 --- [reactor-http-nio-5] o.s.w.s.adapter.HttpWebHandlerAdapter    : [fa22308c] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.588 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.588 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.588 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : [aa3be156] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.588 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.588 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.588 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.588 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 48 bytes, 7 commands in the stack
2019-07-08 09:27:14.588 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x930b0031, L:/10.5.0.2:8080 - R:/10.5.0.2:57497] New http connection, requesting read
2019-07-08 09:27:14.588 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : [fa22308c] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.588 DEBUG 12856 --- [reactor-http-nio-6] reactor.netty.channel.BootstrapHandlers  : [id: 0x930b0031, L:/10.5.0.2:8080 - R:/10.5.0.2:57497] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.588 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.588 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x930b0031, L:/10.5.0.2:8080 - R:/10.5.0.2:57497] Increasing pending responses, now 1
2019-07-08 09:27:14.588 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.588 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.588 DEBUG 12856 --- [reactor-http-nio-4] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.588 DEBUG 12856 --- [reactor-http-nio-6] reactor.netty.http.server.HttpServer     : [id: 0x930b0031, L:/10.5.0.2:8080 - R:/10.5.0.2:57497] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.588 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.588 DEBUG 12856 --- [reactor-http-nio-4] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.589 DEBUG 12856 --- [reactor-http-nio-6] o.s.w.s.adapter.HttpWebHandlerAdapter    : [930b0031] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.589 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.589 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.589 DEBUG 12856 --- [reactor-http-nio-5] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.589 DEBUG 12856 --- [reactor-http-nio-4] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.589 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [dd2df63f] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.589 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.589 DEBUG 12856 --- [reactor-http-nio-5] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.589 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xdd2df63f, L:/10.5.0.2:8080 - R:/10.5.0.2:57488] Last HTTP response frame
2019-07-08 09:27:14.589 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : [930b0031] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.589 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xdd2df63f, L:/10.5.0.2:8080 - R:/10.5.0.2:57488] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.589 DEBUG 12856 --- [reactor-http-nio-5] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.589 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.589 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.589 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0xdd2df63f, L:/10.5.0.2:8080 - R:/10.5.0.2:57488] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.589 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.589 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0xdd2df63f, L:/10.5.0.2:8080 - R:/10.5.0.2:57488] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.589 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.589 DEBUG 12856 --- [reactor-http-nio-6] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.589 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.589 DEBUG 12856 --- [reactor-http-nio-6] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.589 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [9825be0c] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.589 DEBUG 12856 --- [reactor-http-nio-6] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.589 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x9825be0c, L:/10.5.0.2:8080 - R:/10.5.0.2:57489] Last HTTP response frame
2019-07-08 09:27:14.589 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x341dc9a1, L:/10.5.0.2:8080 - R:/10.5.0.2:57498] New http connection, requesting read
2019-07-08 09:27:14.589 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x9825be0c, L:/10.5.0.2:8080 - R:/10.5.0.2:57489] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.589 DEBUG 12856 --- [reactor-http-nio-7] reactor.netty.channel.BootstrapHandlers  : [id: 0x341dc9a1, L:/10.5.0.2:8080 - R:/10.5.0.2:57498] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.590 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x9825be0c, L:/10.5.0.2:8080 - R:/10.5.0.2:57489] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.590 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.590 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x341dc9a1, L:/10.5.0.2:8080 - R:/10.5.0.2:57498] Increasing pending responses, now 1
2019-07-08 09:27:14.590 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.590 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x9825be0c, L:/10.5.0.2:8080 - R:/10.5.0.2:57489] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.590 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.590 DEBUG 12856 --- [reactor-http-nio-7] reactor.netty.http.server.HttpServer     : [id: 0x341dc9a1, L:/10.5.0.2:8080 - R:/10.5.0.2:57498] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.590 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.590 DEBUG 12856 --- [reactor-http-nio-7] o.s.w.s.adapter.HttpWebHandlerAdapter    : [341dc9a1] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.590 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [99d70dca] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.590 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x99d70dca, L:/10.5.0.2:8080 - R:/10.5.0.2:57490] Last HTTP response frame
2019-07-08 09:27:14.590 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x3a8e85ad, L:/10.5.0.2:8080 - R:/10.5.0.2:57499] New http connection, requesting read
2019-07-08 09:27:14.590 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.590 DEBUG 12856 --- [reactor-http-nio-8] reactor.netty.channel.BootstrapHandlers  : [id: 0x3a8e85ad, L:/10.5.0.2:8080 - R:/10.5.0.2:57499] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.590 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x99d70dca, L:/10.5.0.2:8080 - R:/10.5.0.2:57490] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.590 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.590 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x3a8e85ad, L:/10.5.0.2:8080 - R:/10.5.0.2:57499] Increasing pending responses, now 1
2019-07-08 09:27:14.590 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 4 commands
2019-07-08 09:27:14.590 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x99d70dca, L:/10.5.0.2:8080 - R:/10.5.0.2:57490] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.590 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : [341dc9a1] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.590 DEBUG 12856 --- [reactor-http-nio-8] reactor.netty.http.server.HttpServer     : [id: 0x3a8e85ad, L:/10.5.0.2:8080 - R:/10.5.0.2:57499] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.590 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.590 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.590 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x99d70dca, L:/10.5.0.2:8080 - R:/10.5.0.2:57490] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.590 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.590 DEBUG 12856 --- [reactor-http-nio-8] o.s.w.s.adapter.HttpWebHandlerAdapter    : [3a8e85ad] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.590 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.590 DEBUG 12856 --- [reactor-http-nio-7] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.590 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.590 DEBUG 12856 --- [reactor-http-nio-7] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.590 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [cd1c5b60] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.590 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.590 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x7fb075a0, L:/10.5.0.2:8080 - R:/10.5.0.2:57500] New http connection, requesting read
2019-07-08 09:27:14.591 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : [3a8e85ad] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.591 DEBUG 12856 --- [reactor-http-nio-9] reactor.netty.channel.BootstrapHandlers  : [id: 0x7fb075a0, L:/10.5.0.2:8080 - R:/10.5.0.2:57500] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.590 DEBUG 12856 --- [reactor-http-nio-7] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.591 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xcd1c5b60, L:/10.5.0.2:8080 - R:/10.5.0.2:57491] Last HTTP response frame
2019-07-08 09:27:14.591 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.591 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x7fb075a0, L:/10.5.0.2:8080 - R:/10.5.0.2:57500] Increasing pending responses, now 1
2019-07-08 09:27:14.591 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xcd1c5b60, L:/10.5.0.2:8080 - R:/10.5.0.2:57491] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.591 DEBUG 12856 --- [reactor-http-nio-9] reactor.netty.http.server.HttpServer     : [id: 0x7fb075a0, L:/10.5.0.2:8080 - R:/10.5.0.2:57500] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.591 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.591 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0xcd1c5b60, L:/10.5.0.2:8080 - R:/10.5.0.2:57491] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.591 DEBUG 12856 --- [reactor-http-nio-9] o.s.w.s.adapter.HttpWebHandlerAdapter    : [7fb075a0] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.591 DEBUG 12856 --- [reactor-http-nio-8] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.591 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.591 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0xcd1c5b60, L:/10.5.0.2:8080 - R:/10.5.0.2:57491] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.591 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.591 DEBUG 12856 --- [reactor-http-nio-8] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.591 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.591 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.591 DEBUG 12856 --- [reactor-http-nio-8] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.591 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : [7fb075a0] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.591 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.591 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.591 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x6b6db340, L:/10.5.0.2:8080 - R:/10.5.0.2:57501] New http connection, requesting read
2019-07-08 09:27:14.591 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.592 DEBUG 12856 --- [reactor-http-nio-10] reactor.netty.channel.BootstrapHandlers  : [id: 0x6b6db340, L:/10.5.0.2:8080 - R:/10.5.0.2:57501] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.592 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.592 DEBUG 12856 --- [reactor-http-nio-9] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.592 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x6b6db340, L:/10.5.0.2:8080 - R:/10.5.0.2:57501] Increasing pending responses, now 1
2019-07-08 09:27:14.592 DEBUG 12856 --- [reactor-http-nio-9] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.592 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.592 DEBUG 12856 --- [reactor-http-nio-10] reactor.netty.http.server.HttpServer     : [id: 0x6b6db340, L:/10.5.0.2:8080 - R:/10.5.0.2:57501] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.592 DEBUG 12856 --- [reactor-http-nio-9] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.592 DEBUG 12856 --- [reactor-http-nio-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [6b6db340] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.592 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.592 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.592 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.592 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.592 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.592 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : [6b6db340] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.592 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.592 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.592 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.593 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 48 bytes, 9 commands in the stack
2019-07-08 09:27:14.593 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 9 commands
2019-07-08 09:27:14.593 DEBUG 12856 --- [reactor-http-nio-10] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.593 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.593 DEBUG 12856 --- [reactor-http-nio-10] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.593 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.593 DEBUG 12856 --- [reactor-http-nio-10] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.593 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.593 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [9b1eb2c7] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.593 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x9b1eb2c7, L:/10.5.0.2:8080 - R:/10.5.0.2:57492] Last HTTP response frame
2019-07-08 09:27:14.593 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x9b1eb2c7, L:/10.5.0.2:8080 - R:/10.5.0.2:57492] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.593 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.593 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x9b1eb2c7, L:/10.5.0.2:8080 - R:/10.5.0.2:57492] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.593 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.593 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x9b1eb2c7, L:/10.5.0.2:8080 - R:/10.5.0.2:57492] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.593 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.593 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.593 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [8040d9d9] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.593 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x8040d9d9, L:/10.5.0.2:8080 - R:/10.5.0.2:57494] Last HTTP response frame
2019-07-08 09:27:14.593 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x8040d9d9, L:/10.5.0.2:8080 - R:/10.5.0.2:57494] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.593 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.593 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x8040d9d9, L:/10.5.0.2:8080 - R:/10.5.0.2:57494] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.593 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.593 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0xd865174c, L:/10.5.0.2:8080 - R:/10.5.0.2:57502] New http connection, requesting read
2019-07-08 09:27:14.593 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.593 DEBUG 12856 --- [reactor-http-nio-11] reactor.netty.channel.BootstrapHandlers  : [id: 0xd865174c, L:/10.5.0.2:8080 - R:/10.5.0.2:57502] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.593 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x8040d9d9, L:/10.5.0.2:8080 - R:/10.5.0.2:57494] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.593 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.593 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0xd865174c, L:/10.5.0.2:8080 - R:/10.5.0.2:57502] Increasing pending responses, now 1
2019-07-08 09:27:14.593 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [db7d9636] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.594 DEBUG 12856 --- [reactor-http-nio-11] reactor.netty.http.server.HttpServer     : [id: 0xd865174c, L:/10.5.0.2:8080 - R:/10.5.0.2:57502] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.594 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xdb7d9636, L:/10.5.0.2:8080 - R:/10.5.0.2:57493] Last HTTP response frame
2019-07-08 09:27:14.594 DEBUG 12856 --- [reactor-http-nio-11] o.s.w.s.adapter.HttpWebHandlerAdapter    : [d865174c] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.594 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0xf7f267b9, L:/10.5.0.2:8080 - R:/10.5.0.2:57503] New http connection, requesting read
2019-07-08 09:27:14.594 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xdb7d9636, L:/10.5.0.2:8080 - R:/10.5.0.2:57493] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.594 DEBUG 12856 --- [reactor-http-nio-12] reactor.netty.channel.BootstrapHandlers  : [id: 0xf7f267b9, L:/10.5.0.2:8080 - R:/10.5.0.2:57503] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.594 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0xdb7d9636, L:/10.5.0.2:8080 - R:/10.5.0.2:57493] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.594 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.594 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0xf7f267b9, L:/10.5.0.2:8080 - R:/10.5.0.2:57503] Increasing pending responses, now 1
2019-07-08 09:27:14.594 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.594 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0xdb7d9636, L:/10.5.0.2:8080 - R:/10.5.0.2:57493] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.594 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.594 DEBUG 12856 --- [reactor-http-nio-12] reactor.netty.http.server.HttpServer     : [id: 0xf7f267b9, L:/10.5.0.2:8080 - R:/10.5.0.2:57503] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.594 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : [d865174c] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.594 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.594 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x951fc818, L:/10.5.0.2:8080 - R:/10.5.0.2:57504] New http connection, requesting read
2019-07-08 09:27:14.594 DEBUG 12856 --- [reactor-http-nio-12] o.s.w.s.adapter.HttpWebHandlerAdapter    : [f7f267b9] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.594 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.594 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.594 DEBUG 12856 --- [reactor-http-nio-13] reactor.netty.channel.BootstrapHandlers  : [id: 0x951fc818, L:/10.5.0.2:8080 - R:/10.5.0.2:57504] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.594 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.594 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.595 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.595 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x951fc818, L:/10.5.0.2:8080 - R:/10.5.0.2:57504] Increasing pending responses, now 1
2019-07-08 09:27:14.595 DEBUG 12856 --- [reactor-http-nio-11] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.595 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [aa3be156] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.595 DEBUG 12856 --- [reactor-http-nio-11] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.595 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : [f7f267b9] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.595 DEBUG 12856 --- [reactor-http-nio-13] reactor.netty.http.server.HttpServer     : [id: 0x951fc818, L:/10.5.0.2:8080 - R:/10.5.0.2:57504] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.595 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xaa3be156, L:/10.5.0.2:8080 - R:/10.5.0.2:57495] Last HTTP response frame
2019-07-08 09:27:14.595 DEBUG 12856 --- [reactor-http-nio-13] o.s.w.s.adapter.HttpWebHandlerAdapter    : [951fc818] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.595 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xaa3be156, L:/10.5.0.2:8080 - R:/10.5.0.2:57495] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.595 DEBUG 12856 --- [reactor-http-nio-11] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.595 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.595 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.595 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.595 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0xaa3be156, L:/10.5.0.2:8080 - R:/10.5.0.2:57495] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.595 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.595 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.595 DEBUG 12856 --- [reactor-http-nio-12] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.595 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0xaa3be156, L:/10.5.0.2:8080 - R:/10.5.0.2:57495] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.595 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.595 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : [951fc818] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.595 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.595 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.595 DEBUG 12856 --- [reactor-http-nio-12] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.595 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 60 bytes, 7 commands in the stack
2019-07-08 09:27:14.596 DEBUG 12856 --- [reactor-http-nio-12] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.596 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.595 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0xd0d4d11c, L:/10.5.0.2:8080 - R:/10.5.0.2:57505] New http connection, requesting read
2019-07-08 09:27:14.596 DEBUG 12856 --- [reactor-http-nio-13] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.596 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.596 DEBUG 12856 --- [reactor-http-nio-13] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.596 DEBUG 12856 --- [reactor-http-nio-14] reactor.netty.channel.BootstrapHandlers  : [id: 0xd0d4d11c, L:/10.5.0.2:8080 - R:/10.5.0.2:57505] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.596 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.596 DEBUG 12856 --- [reactor-http-nio-13] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.596 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0xd0d4d11c, L:/10.5.0.2:8080 - R:/10.5.0.2:57505] Increasing pending responses, now 1
2019-07-08 09:27:14.596 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.596 DEBUG 12856 --- [reactor-http-nio-14] reactor.netty.http.server.HttpServer     : [id: 0xd0d4d11c, L:/10.5.0.2:8080 - R:/10.5.0.2:57505] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.596 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [fa22308c] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.596 DEBUG 12856 --- [reactor-http-nio-14] o.s.w.s.adapter.HttpWebHandlerAdapter    : [d0d4d11c] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.596 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xfa22308c, L:/10.5.0.2:8080 - R:/10.5.0.2:57496] Last HTTP response frame
2019-07-08 09:27:14.596 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.596 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xfa22308c, L:/10.5.0.2:8080 - R:/10.5.0.2:57496] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.596 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.596 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.596 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0xfa22308c, L:/10.5.0.2:8080 - R:/10.5.0.2:57496] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.596 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : [d0d4d11c] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.596 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.596 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0xfa22308c, L:/10.5.0.2:8080 - R:/10.5.0.2:57496] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.596 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.596 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.596 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.597 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x24db36a2, L:/10.5.0.2:8080 - R:/10.5.0.2:57506] New http connection, requesting read
2019-07-08 09:27:14.597 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [930b0031] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.597 DEBUG 12856 --- [reactor-http-nio-15] reactor.netty.channel.BootstrapHandlers  : [id: 0x24db36a2, L:/10.5.0.2:8080 - R:/10.5.0.2:57506] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.597 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x930b0031, L:/10.5.0.2:8080 - R:/10.5.0.2:57497] Last HTTP response frame
2019-07-08 09:27:14.597 DEBUG 12856 --- [reactor-http-nio-14] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.597 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x930b0031, L:/10.5.0.2:8080 - R:/10.5.0.2:57497] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.597 DEBUG 12856 --- [reactor-http-nio-14] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.597 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x930b0031, L:/10.5.0.2:8080 - R:/10.5.0.2:57497] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.597 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x24db36a2, L:/10.5.0.2:8080 - R:/10.5.0.2:57506] Increasing pending responses, now 1
2019-07-08 09:27:14.597 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x930b0031, L:/10.5.0.2:8080 - R:/10.5.0.2:57497] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.597 DEBUG 12856 --- [reactor-http-nio-15] reactor.netty.http.server.HttpServer     : [id: 0x24db36a2, L:/10.5.0.2:8080 - R:/10.5.0.2:57506] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.597 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.597 DEBUG 12856 --- [reactor-http-nio-14] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.597 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.597 DEBUG 12856 --- [reactor-http-nio-15] o.s.w.s.adapter.HttpWebHandlerAdapter    : [24db36a2] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.597 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.597 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.597 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.597 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x02f11ec1, L:/10.5.0.2:8080 - R:/10.5.0.2:57507] New http connection, requesting read
2019-07-08 09:27:14.597 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.597 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [341dc9a1] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.597 DEBUG 12856 --- [reactor-http-nio-16] reactor.netty.channel.BootstrapHandlers  : [id: 0x02f11ec1, L:/10.5.0.2:8080 - R:/10.5.0.2:57507] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.597 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : [24db36a2] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.597 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x02f11ec1, L:/10.5.0.2:8080 - R:/10.5.0.2:57507] Increasing pending responses, now 1
2019-07-08 09:27:14.597 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x341dc9a1, L:/10.5.0.2:8080 - R:/10.5.0.2:57498] Last HTTP response frame
2019-07-08 09:27:14.597 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.597 DEBUG 12856 --- [reactor-http-nio-16] reactor.netty.http.server.HttpServer     : [id: 0x02f11ec1, L:/10.5.0.2:8080 - R:/10.5.0.2:57507] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.597 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x341dc9a1, L:/10.5.0.2:8080 - R:/10.5.0.2:57498] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.597 DEBUG 12856 --- [reactor-http-nio-16] o.s.w.s.adapter.HttpWebHandlerAdapter    : [02f11ec1] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.597 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 4 commands
2019-07-08 09:27:14.597 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x341dc9a1, L:/10.5.0.2:8080 - R:/10.5.0.2:57498] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.598 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.597 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.597 DEBUG 12856 --- [reactor-http-nio-15] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.598 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.598 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x341dc9a1, L:/10.5.0.2:8080 - R:/10.5.0.2:57498] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.598 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.598 DEBUG 12856 --- [reactor-http-nio-15] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.598 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : [02f11ec1] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.598 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.598 DEBUG 12856 --- [reactor-http-nio-15] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.598 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [3a8e85ad] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.598 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.598 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x3a8e85ad, L:/10.5.0.2:8080 - R:/10.5.0.2:57499] Last HTTP response frame
2019-07-08 09:27:14.598 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x12e0a9d2, L:/10.5.0.2:8080 - R:/10.5.0.2:57508] New http connection, requesting read
2019-07-08 09:27:14.598 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x3a8e85ad, L:/10.5.0.2:8080 - R:/10.5.0.2:57499] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.598 DEBUG 12856 --- [reactor-http-nio-1] reactor.netty.channel.BootstrapHandlers  : [id: 0x12e0a9d2, L:/10.5.0.2:8080 - R:/10.5.0.2:57508] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.598 DEBUG 12856 --- [reactor-http-nio-16] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.598 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 3 commands
2019-07-08 09:27:14.598 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x3a8e85ad, L:/10.5.0.2:8080 - R:/10.5.0.2:57499] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.598 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x12e0a9d2, L:/10.5.0.2:8080 - R:/10.5.0.2:57508] Increasing pending responses, now 1
2019-07-08 09:27:14.598 DEBUG 12856 --- [reactor-http-nio-16] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.598 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.598 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x3a8e85ad, L:/10.5.0.2:8080 - R:/10.5.0.2:57499] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.598 DEBUG 12856 --- [reactor-http-nio-1] reactor.netty.http.server.HttpServer     : [id: 0x12e0a9d2, L:/10.5.0.2:8080 - R:/10.5.0.2:57508] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.598 DEBUG 12856 --- [reactor-http-nio-16] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.598 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.598 DEBUG 12856 --- [reactor-http-nio-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [12e0a9d2] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.599 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.599 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.599 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [7fb075a0] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.599 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.599 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : [12e0a9d2] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.599 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x7fb075a0, L:/10.5.0.2:8080 - R:/10.5.0.2:57500] Last HTTP response frame
2019-07-08 09:27:14.599 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.599 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x7fb075a0, L:/10.5.0.2:8080 - R:/10.5.0.2:57500] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.599 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.599 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x7fb075a0, L:/10.5.0.2:8080 - R:/10.5.0.2:57500] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.599 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.599 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x7fb075a0, L:/10.5.0.2:8080 - R:/10.5.0.2:57500] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.599 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.599 DEBUG 12856 --- [reactor-http-nio-1] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.599 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.614 DEBUG 12856 --- [reactor-http-nio-1] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.614 DEBUG 12856 --- [reactor-http-nio-1] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.614 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.614 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.614 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x8a6b95b3, L:/10.5.0.2:8080 - R:/10.5.0.2:57509] New http connection, requesting read
2019-07-08 09:27:14.614 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.614 DEBUG 12856 --- [reactor-http-nio-2] reactor.netty.channel.BootstrapHandlers  : [id: 0x8a6b95b3, L:/10.5.0.2:8080 - R:/10.5.0.2:57509] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.614 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.614 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0xa6983019, L:/10.5.0.2:8080 - R:/10.5.0.2:57510] New http connection, requesting read
2019-07-08 09:27:14.614 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.614 DEBUG 12856 --- [reactor-http-nio-3] reactor.netty.channel.BootstrapHandlers  : [id: 0xa6983019, L:/10.5.0.2:8080 - R:/10.5.0.2:57510] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.614 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x8a6b95b3, L:/10.5.0.2:8080 - R:/10.5.0.2:57509] Increasing pending responses, now 1
2019-07-08 09:27:14.614 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.614 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0xa6983019, L:/10.5.0.2:8080 - R:/10.5.0.2:57510] Increasing pending responses, now 1
2019-07-08 09:27:14.614 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.614 DEBUG 12856 --- [reactor-http-nio-2] reactor.netty.http.server.HttpServer     : [id: 0x8a6b95b3, L:/10.5.0.2:8080 - R:/10.5.0.2:57509] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.614 DEBUG 12856 --- [reactor-http-nio-3] reactor.netty.http.server.HttpServer     : [id: 0xa6983019, L:/10.5.0.2:8080 - R:/10.5.0.2:57510] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.614 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.614 DEBUG 12856 --- [reactor-http-nio-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [8a6b95b3] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.614 DEBUG 12856 --- [reactor-http-nio-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [a6983019] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.615 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 36 bytes, 8 commands in the stack
2019-07-08 09:27:14.615 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.615 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.615 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.615 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.615 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.615 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : [8a6b95b3] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.615 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.615 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : [a6983019] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.615 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.615 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.615 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.615 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.615 DEBUG 12856 --- [reactor-http-nio-2] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.615 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [6b6db340] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.615 DEBUG 12856 --- [reactor-http-nio-2] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.615 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x6b6db340, L:/10.5.0.2:8080 - R:/10.5.0.2:57501] Last HTTP response frame
2019-07-08 09:27:14.615 DEBUG 12856 --- [reactor-http-nio-3] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.616 DEBUG 12856 --- [reactor-http-nio-2] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.616 DEBUG 12856 --- [reactor-http-nio-3] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.616 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x6b6db340, L:/10.5.0.2:8080 - R:/10.5.0.2:57501] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.616 DEBUG 12856 --- [reactor-http-nio-3] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.616 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x6b6db340, L:/10.5.0.2:8080 - R:/10.5.0.2:57501] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.616 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.616 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x6b6db340, L:/10.5.0.2:8080 - R:/10.5.0.2:57501] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.616 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.616 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.616 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.616 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [d865174c] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.616 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xd865174c, L:/10.5.0.2:8080 - R:/10.5.0.2:57502] Last HTTP response frame
2019-07-08 09:27:14.616 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xd865174c, L:/10.5.0.2:8080 - R:/10.5.0.2:57502] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.616 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x0d18c3ea, L:/10.5.0.2:8080 - R:/10.5.0.2:57511] New http connection, requesting read
2019-07-08 09:27:14.616 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.616 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0xd865174c, L:/10.5.0.2:8080 - R:/10.5.0.2:57502] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.616 DEBUG 12856 --- [reactor-http-nio-4] reactor.netty.channel.BootstrapHandlers  : [id: 0x0d18c3ea, L:/10.5.0.2:8080 - R:/10.5.0.2:57511] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.616 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.616 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x0d18c3ea, L:/10.5.0.2:8080 - R:/10.5.0.2:57511] Increasing pending responses, now 1
2019-07-08 09:27:14.616 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0xd865174c, L:/10.5.0.2:8080 - R:/10.5.0.2:57502] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.616 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.616 DEBUG 12856 --- [reactor-http-nio-4] reactor.netty.http.server.HttpServer     : [id: 0x0d18c3ea, L:/10.5.0.2:8080 - R:/10.5.0.2:57511] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.616 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.616 DEBUG 12856 --- [reactor-http-nio-4] o.s.w.s.adapter.HttpWebHandlerAdapter    : [0d18c3ea] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.617 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [f7f267b9] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.617 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.617 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xf7f267b9, L:/10.5.0.2:8080 - R:/10.5.0.2:57503] Last HTTP response frame
2019-07-08 09:27:14.617 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.617 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x8c4446fe, L:/10.5.0.2:8080 - R:/10.5.0.2:57512] New http connection, requesting read
2019-07-08 09:27:14.617 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xf7f267b9, L:/10.5.0.2:8080 - R:/10.5.0.2:57503] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.617 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : [0d18c3ea] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.617 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.617 DEBUG 12856 --- [reactor-http-nio-5] reactor.netty.channel.BootstrapHandlers  : [id: 0x8c4446fe, L:/10.5.0.2:8080 - R:/10.5.0.2:57512] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.617 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0xf7f267b9, L:/10.5.0.2:8080 - R:/10.5.0.2:57503] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.617 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0xf7f267b9, L:/10.5.0.2:8080 - R:/10.5.0.2:57503] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.617 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.617 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.617 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0xd1694ff5, L:/10.5.0.2:8080 - R:/10.5.0.2:57513] New http connection, requesting read
2019-07-08 09:27:14.617 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.617 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x8c4446fe, L:/10.5.0.2:8080 - R:/10.5.0.2:57512] Increasing pending responses, now 1
2019-07-08 09:27:14.617 DEBUG 12856 --- [reactor-http-nio-6] reactor.netty.channel.BootstrapHandlers  : [id: 0xd1694ff5, L:/10.5.0.2:8080 - R:/10.5.0.2:57513] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.617 DEBUG 12856 --- [reactor-http-nio-4] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.617 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0xd1694ff5, L:/10.5.0.2:8080 - R:/10.5.0.2:57513] Increasing pending responses, now 1
2019-07-08 09:27:14.617 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.617 DEBUG 12856 --- [reactor-http-nio-5] reactor.netty.http.server.HttpServer     : [id: 0x8c4446fe, L:/10.5.0.2:8080 - R:/10.5.0.2:57512] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.617 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 60 bytes, 7 commands in the stack
2019-07-08 09:27:14.617 DEBUG 12856 --- [reactor-http-nio-4] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.617 DEBUG 12856 --- [reactor-http-nio-6] reactor.netty.http.server.HttpServer     : [id: 0xd1694ff5, L:/10.5.0.2:8080 - R:/10.5.0.2:57513] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.617 DEBUG 12856 --- [reactor-http-nio-5] o.s.w.s.adapter.HttpWebHandlerAdapter    : [8c4446fe] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.617 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.618 DEBUG 12856 --- [reactor-http-nio-4] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.618 DEBUG 12856 --- [reactor-http-nio-6] o.s.w.s.adapter.HttpWebHandlerAdapter    : [d1694ff5] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.618 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.618 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.618 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.618 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.618 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.618 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.618 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.618 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : [8c4446fe] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.618 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : [d1694ff5] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.618 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [951fc818] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.618 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.618 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.618 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x951fc818, L:/10.5.0.2:8080 - R:/10.5.0.2:57504] Last HTTP response frame
2019-07-08 09:27:14.618 DEBUG 12856 --- [reactor-http-nio-5] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.618 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x951fc818, L:/10.5.0.2:8080 - R:/10.5.0.2:57504] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.618 DEBUG 12856 --- [reactor-http-nio-5] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.619 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.619 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.619 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.618 DEBUG 12856 --- [reactor-http-nio-6] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.619 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.619 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x951fc818, L:/10.5.0.2:8080 - R:/10.5.0.2:57504] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.619 DEBUG 12856 --- [reactor-http-nio-5] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.619 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x951fc818, L:/10.5.0.2:8080 - R:/10.5.0.2:57504] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.619 DEBUG 12856 --- [reactor-http-nio-6] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.619 DEBUG 12856 --- [reactor-http-nio-6] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.619 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [d0d4d11c] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.619 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xd0d4d11c, L:/10.5.0.2:8080 - R:/10.5.0.2:57505] Last HTTP response frame
2019-07-08 09:27:14.619 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xd0d4d11c, L:/10.5.0.2:8080 - R:/10.5.0.2:57505] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.619 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.619 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x4a1157c7, L:/10.5.0.2:8080 - R:/10.5.0.2:57514] New http connection, requesting read
2019-07-08 09:27:14.619 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0xd0d4d11c, L:/10.5.0.2:8080 - R:/10.5.0.2:57505] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.619 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.619 DEBUG 12856 --- [reactor-http-nio-7] reactor.netty.channel.BootstrapHandlers  : [id: 0x4a1157c7, L:/10.5.0.2:8080 - R:/10.5.0.2:57514] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.619 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0xd0d4d11c, L:/10.5.0.2:8080 - R:/10.5.0.2:57505] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.619 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x4a1157c7, L:/10.5.0.2:8080 - R:/10.5.0.2:57514] Increasing pending responses, now 1
2019-07-08 09:27:14.619 DEBUG 12856 --- [reactor-http-nio-7] reactor.netty.http.server.HttpServer     : [id: 0x4a1157c7, L:/10.5.0.2:8080 - R:/10.5.0.2:57514] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.619 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.619 DEBUG 12856 --- [reactor-http-nio-7] o.s.w.s.adapter.HttpWebHandlerAdapter    : [4a1157c7] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.619 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.619 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.619 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [24db36a2] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.619 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.619 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0xa9e96602, L:/10.5.0.2:8080 - R:/10.5.0.2:57515] New http connection, requesting read
2019-07-08 09:27:14.619 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x24db36a2, L:/10.5.0.2:8080 - R:/10.5.0.2:57506] Last HTTP response frame
2019-07-08 09:27:14.620 DEBUG 12856 --- [reactor-http-nio-8] reactor.netty.channel.BootstrapHandlers  : [id: 0xa9e96602, L:/10.5.0.2:8080 - R:/10.5.0.2:57515] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.620 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0xa9e96602, L:/10.5.0.2:8080 - R:/10.5.0.2:57515] Increasing pending responses, now 1
2019-07-08 09:27:14.620 DEBUG 12856 --- [reactor-http-nio-8] reactor.netty.http.server.HttpServer     : [id: 0xa9e96602, L:/10.5.0.2:8080 - R:/10.5.0.2:57515] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.619 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : [4a1157c7] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.620 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x24db36a2, L:/10.5.0.2:8080 - R:/10.5.0.2:57506] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.620 DEBUG 12856 --- [reactor-http-nio-8] o.s.w.s.adapter.HttpWebHandlerAdapter    : [a9e96602] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.620 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 4 commands
2019-07-08 09:27:14.620 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.620 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.620 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.620 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.620 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x24db36a2, L:/10.5.0.2:8080 - R:/10.5.0.2:57506] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.620 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.620 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.620 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [02f11ec1] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.620 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x24db36a2, L:/10.5.0.2:8080 - R:/10.5.0.2:57506] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.620 DEBUG 12856 --- [reactor-http-nio-7] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.620 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : [a9e96602] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.620 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x02f11ec1, L:/10.5.0.2:8080 - R:/10.5.0.2:57507] Last HTTP response frame
2019-07-08 09:27:14.620 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x02f11ec1, L:/10.5.0.2:8080 - R:/10.5.0.2:57507] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.620 DEBUG 12856 --- [reactor-http-nio-7] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.620 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.620 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 3 commands
2019-07-08 09:27:14.620 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x02f11ec1, L:/10.5.0.2:8080 - R:/10.5.0.2:57507] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.620 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0xc74b3e15, L:/10.5.0.2:8080 - R:/10.5.0.2:57516] New http connection, requesting read
2019-07-08 09:27:14.620 DEBUG 12856 --- [reactor-http-nio-7] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.621 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.621 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x02f11ec1, L:/10.5.0.2:8080 - R:/10.5.0.2:57507] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.621 DEBUG 12856 --- [reactor-http-nio-8] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.621 DEBUG 12856 --- [reactor-http-nio-9] reactor.netty.channel.BootstrapHandlers  : [id: 0xc74b3e15, L:/10.5.0.2:8080 - R:/10.5.0.2:57516] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.621 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.621 DEBUG 12856 --- [reactor-http-nio-8] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.621 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0xc74b3e15, L:/10.5.0.2:8080 - R:/10.5.0.2:57516] Increasing pending responses, now 1
2019-07-08 09:27:14.621 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.621 DEBUG 12856 --- [reactor-http-nio-8] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.621 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x61bc3abd, L:/10.5.0.2:8080 - R:/10.5.0.2:57517] New http connection, requesting read
2019-07-08 09:27:14.621 DEBUG 12856 --- [reactor-http-nio-9] reactor.netty.http.server.HttpServer     : [id: 0xc74b3e15, L:/10.5.0.2:8080 - R:/10.5.0.2:57516] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.621 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [12e0a9d2] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.621 DEBUG 12856 --- [reactor-http-nio-10] reactor.netty.channel.BootstrapHandlers  : [id: 0x61bc3abd, L:/10.5.0.2:8080 - R:/10.5.0.2:57517] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.621 DEBUG 12856 --- [reactor-http-nio-9] o.s.w.s.adapter.HttpWebHandlerAdapter    : [c74b3e15] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.621 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x12e0a9d2, L:/10.5.0.2:8080 - R:/10.5.0.2:57508] Last HTTP response frame
2019-07-08 09:27:14.621 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x61bc3abd, L:/10.5.0.2:8080 - R:/10.5.0.2:57517] Increasing pending responses, now 1
2019-07-08 09:27:14.621 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x12e0a9d2, L:/10.5.0.2:8080 - R:/10.5.0.2:57508] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.621 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.621 DEBUG 12856 --- [reactor-http-nio-10] reactor.netty.http.server.HttpServer     : [id: 0x61bc3abd, L:/10.5.0.2:8080 - R:/10.5.0.2:57517] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.621 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.621 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x12e0a9d2, L:/10.5.0.2:8080 - R:/10.5.0.2:57508] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.621 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.621 DEBUG 12856 --- [reactor-http-nio-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [61bc3abd] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.621 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.621 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.621 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.621 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x12e0a9d2, L:/10.5.0.2:8080 - R:/10.5.0.2:57508] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.621 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : [c74b3e15] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.621 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.621 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.622 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.622 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : [61bc3abd] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.622 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0xbaa02663, L:/10.5.0.2:8080 - R:/10.5.0.2:57518] New http connection, requesting read
2019-07-08 09:27:14.622 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.622 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.622 DEBUG 12856 --- [reactor-http-nio-11] reactor.netty.channel.BootstrapHandlers  : [id: 0xbaa02663, L:/10.5.0.2:8080 - R:/10.5.0.2:57518] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.622 DEBUG 12856 --- [reactor-http-nio-9] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.622 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.622 DEBUG 12856 --- [reactor-http-nio-10] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.622 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0xbaa02663, L:/10.5.0.2:8080 - R:/10.5.0.2:57518] Increasing pending responses, now 1
2019-07-08 09:27:14.622 DEBUG 12856 --- [reactor-http-nio-9] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.622 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.622 DEBUG 12856 --- [reactor-http-nio-10] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.622 DEBUG 12856 --- [reactor-http-nio-11] reactor.netty.http.server.HttpServer     : [id: 0xbaa02663, L:/10.5.0.2:8080 - R:/10.5.0.2:57518] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.622 DEBUG 12856 --- [reactor-http-nio-9] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.622 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.622 DEBUG 12856 --- [reactor-http-nio-10] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.622 DEBUG 12856 --- [reactor-http-nio-11] o.s.w.s.adapter.HttpWebHandlerAdapter    : [baa02663] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.623 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.623 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.623 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.623 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.623 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : [baa02663] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.623 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.623 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.623 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.623 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.623 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.623 DEBUG 12856 --- [reactor-http-nio-11] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.623 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 48 bytes, 9 commands in the stack
2019-07-08 09:27:14.623 DEBUG 12856 --- [reactor-http-nio-11] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.623 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 9 commands
2019-07-08 09:27:14.623 DEBUG 12856 --- [reactor-http-nio-11] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.623 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.623 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.623 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.623 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [8a6b95b3] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.623 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x8a6b95b3, L:/10.5.0.2:8080 - R:/10.5.0.2:57509] Last HTTP response frame
2019-07-08 09:27:14.624 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x8a6b95b3, L:/10.5.0.2:8080 - R:/10.5.0.2:57509] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.624 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.624 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.624 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x8a6b95b3, L:/10.5.0.2:8080 - R:/10.5.0.2:57509] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.624 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.624 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x8a6b95b3, L:/10.5.0.2:8080 - R:/10.5.0.2:57509] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.624 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.624 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [a6983019] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.624 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xa6983019, L:/10.5.0.2:8080 - R:/10.5.0.2:57510] Last HTTP response frame
2019-07-08 09:27:14.624 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xa6983019, L:/10.5.0.2:8080 - R:/10.5.0.2:57510] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.624 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.624 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0xa6983019, L:/10.5.0.2:8080 - R:/10.5.0.2:57510] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.624 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x1fcc0d16, L:/10.5.0.2:8080 - R:/10.5.0.2:57519] New http connection, requesting read
2019-07-08 09:27:14.624 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.624 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0xa6983019, L:/10.5.0.2:8080 - R:/10.5.0.2:57510] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.624 DEBUG 12856 --- [reactor-http-nio-12] reactor.netty.channel.BootstrapHandlers  : [id: 0x1fcc0d16, L:/10.5.0.2:8080 - R:/10.5.0.2:57519] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.624 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.624 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x1fcc0d16, L:/10.5.0.2:8080 - R:/10.5.0.2:57519] Increasing pending responses, now 1
2019-07-08 09:27:14.624 DEBUG 12856 --- [reactor-http-nio-12] reactor.netty.http.server.HttpServer     : [id: 0x1fcc0d16, L:/10.5.0.2:8080 - R:/10.5.0.2:57519] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.624 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.624 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x60354f54, L:/10.5.0.2:8080 - R:/10.5.0.2:57520] New http connection, requesting read
2019-07-08 09:27:14.624 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [0d18c3ea] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.624 DEBUG 12856 --- [reactor-http-nio-12] o.s.w.s.adapter.HttpWebHandlerAdapter    : [1fcc0d16] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.624 DEBUG 12856 --- [reactor-http-nio-13] reactor.netty.channel.BootstrapHandlers  : [id: 0x60354f54, L:/10.5.0.2:8080 - R:/10.5.0.2:57520] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.624 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.624 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x0d18c3ea, L:/10.5.0.2:8080 - R:/10.5.0.2:57511] Last HTTP response frame
2019-07-08 09:27:14.624 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.624 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x60354f54, L:/10.5.0.2:8080 - R:/10.5.0.2:57520] Increasing pending responses, now 1
2019-07-08 09:27:14.624 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x0d18c3ea, L:/10.5.0.2:8080 - R:/10.5.0.2:57511] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.625 DEBUG 12856 --- [reactor-http-nio-13] reactor.netty.http.server.HttpServer     : [id: 0x60354f54, L:/10.5.0.2:8080 - R:/10.5.0.2:57520] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.625 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : [1fcc0d16] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.625 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.625 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x0d18c3ea, L:/10.5.0.2:8080 - R:/10.5.0.2:57511] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.625 DEBUG 12856 --- [reactor-http-nio-13] o.s.w.s.adapter.HttpWebHandlerAdapter    : [60354f54] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.625 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.625 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.625 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x0d18c3ea, L:/10.5.0.2:8080 - R:/10.5.0.2:57511] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.625 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.625 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.625 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.625 DEBUG 12856 --- [reactor-http-nio-12] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.625 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.625 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : [60354f54] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.625 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [8c4446fe] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.625 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0xf5924b43, L:/10.5.0.2:8080 - R:/10.5.0.2:57521] New http connection, requesting read
2019-07-08 09:27:14.625 DEBUG 12856 --- [reactor-http-nio-12] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.625 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.625 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x8c4446fe, L:/10.5.0.2:8080 - R:/10.5.0.2:57512] Last HTTP response frame
2019-07-08 09:27:14.625 DEBUG 12856 --- [reactor-http-nio-14] reactor.netty.channel.BootstrapHandlers  : [id: 0xf5924b43, L:/10.5.0.2:8080 - R:/10.5.0.2:57521] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.625 DEBUG 12856 --- [reactor-http-nio-12] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.626 DEBUG 12856 --- [reactor-http-nio-13] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.625 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x8c4446fe, L:/10.5.0.2:8080 - R:/10.5.0.2:57512] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.626 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0xf5924b43, L:/10.5.0.2:8080 - R:/10.5.0.2:57521] Increasing pending responses, now 1
2019-07-08 09:27:14.626 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.626 DEBUG 12856 --- [reactor-http-nio-14] reactor.netty.http.server.HttpServer     : [id: 0xf5924b43, L:/10.5.0.2:8080 - R:/10.5.0.2:57521] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.626 DEBUG 12856 --- [reactor-http-nio-13] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.626 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x8c4446fe, L:/10.5.0.2:8080 - R:/10.5.0.2:57512] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.626 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.626 DEBUG 12856 --- [reactor-http-nio-14] o.s.w.s.adapter.HttpWebHandlerAdapter    : [f5924b43] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.626 DEBUG 12856 --- [reactor-http-nio-13] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.626 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x8c4446fe, L:/10.5.0.2:8080 - R:/10.5.0.2:57512] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.626 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.626 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.626 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.626 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.626 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.626 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x642de019, L:/10.5.0.2:8080 - R:/10.5.0.2:57522] New http connection, requesting read
2019-07-08 09:27:14.626 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : [f5924b43] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.626 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.626 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.626 DEBUG 12856 --- [reactor-http-nio-15] reactor.netty.channel.BootstrapHandlers  : [id: 0x642de019, L:/10.5.0.2:8080 - R:/10.5.0.2:57522] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.626 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 60 bytes, 8 commands in the stack
2019-07-08 09:27:14.626 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x642de019, L:/10.5.0.2:8080 - R:/10.5.0.2:57522] Increasing pending responses, now 1
2019-07-08 09:27:14.626 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.626 DEBUG 12856 --- [reactor-http-nio-15] reactor.netty.http.server.HttpServer     : [id: 0x642de019, L:/10.5.0.2:8080 - R:/10.5.0.2:57522] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.626 DEBUG 12856 --- [reactor-http-nio-14] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.626 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.626 DEBUG 12856 --- [reactor-http-nio-15] o.s.w.s.adapter.HttpWebHandlerAdapter    : [642de019] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.627 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.627 DEBUG 12856 --- [reactor-http-nio-14] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.627 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.627 DEBUG 12856 --- [reactor-http-nio-14] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.627 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.627 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.627 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [d1694ff5] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.627 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : [642de019] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.627 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xd1694ff5, L:/10.5.0.2:8080 - R:/10.5.0.2:57513] Last HTTP response frame
2019-07-08 09:27:14.627 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.627 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xd1694ff5, L:/10.5.0.2:8080 - R:/10.5.0.2:57513] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.627 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.627 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0xd1694ff5, L:/10.5.0.2:8080 - R:/10.5.0.2:57513] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.627 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.627 DEBUG 12856 --- [reactor-http-nio-15] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.627 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0xd1694ff5, L:/10.5.0.2:8080 - R:/10.5.0.2:57513] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.627 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.627 DEBUG 12856 --- [reactor-http-nio-15] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.627 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.627 DEBUG 12856 --- [reactor-http-nio-15] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.627 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [4a1157c7] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.627 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x4a1157c7, L:/10.5.0.2:8080 - R:/10.5.0.2:57514] Last HTTP response frame
2019-07-08 09:27:14.628 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x44d9c124, L:/10.5.0.2:8080 - R:/10.5.0.2:57523] New http connection, requesting read
2019-07-08 09:27:14.628 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x4a1157c7, L:/10.5.0.2:8080 - R:/10.5.0.2:57514] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.628 DEBUG 12856 --- [reactor-http-nio-16] reactor.netty.channel.BootstrapHandlers  : [id: 0x44d9c124, L:/10.5.0.2:8080 - R:/10.5.0.2:57523] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.628 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x4a1157c7, L:/10.5.0.2:8080 - R:/10.5.0.2:57514] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.628 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.628 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x44d9c124, L:/10.5.0.2:8080 - R:/10.5.0.2:57523] Increasing pending responses, now 1
2019-07-08 09:27:14.628 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x4a1157c7, L:/10.5.0.2:8080 - R:/10.5.0.2:57514] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.628 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.628 DEBUG 12856 --- [reactor-http-nio-16] reactor.netty.http.server.HttpServer     : [id: 0x44d9c124, L:/10.5.0.2:8080 - R:/10.5.0.2:57523] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.628 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.628 DEBUG 12856 --- [reactor-http-nio-16] o.s.w.s.adapter.HttpWebHandlerAdapter    : [44d9c124] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.628 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.628 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.628 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [a9e96602] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.628 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0xf2971583, L:/10.5.0.2:8080 - R:/10.5.0.2:57524] New http connection, requesting read
2019-07-08 09:27:14.628 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.628 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xa9e96602, L:/10.5.0.2:8080 - R:/10.5.0.2:57515] Last HTTP response frame
2019-07-08 09:27:14.628 DEBUG 12856 --- [reactor-http-nio-1] reactor.netty.channel.BootstrapHandlers  : [id: 0xf2971583, L:/10.5.0.2:8080 - R:/10.5.0.2:57524] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.628 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : [44d9c124] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.628 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0xf2971583, L:/10.5.0.2:8080 - R:/10.5.0.2:57524] Increasing pending responses, now 1
2019-07-08 09:27:14.628 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xa9e96602, L:/10.5.0.2:8080 - R:/10.5.0.2:57515] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.628 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.628 DEBUG 12856 --- [reactor-http-nio-1] reactor.netty.http.server.HttpServer     : [id: 0xf2971583, L:/10.5.0.2:8080 - R:/10.5.0.2:57524] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.628 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.628 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0xa9e96602, L:/10.5.0.2:8080 - R:/10.5.0.2:57515] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.628 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.628 DEBUG 12856 --- [reactor-http-nio-16] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.628 DEBUG 12856 --- [reactor-http-nio-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [f2971583] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.628 DEBUG 12856 --- [reactor-http-nio-16] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.628 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.628 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0xa9e96602, L:/10.5.0.2:8080 - R:/10.5.0.2:57515] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.628 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.628 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.629 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [c74b3e15] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.629 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.628 DEBUG 12856 --- [reactor-http-nio-16] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.629 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xc74b3e15, L:/10.5.0.2:8080 - R:/10.5.0.2:57516] Last HTTP response frame
2019-07-08 09:27:14.629 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : [f2971583] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.629 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xc74b3e15, L:/10.5.0.2:8080 - R:/10.5.0.2:57516] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.629 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.629 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 4 commands
2019-07-08 09:27:14.629 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0xc74b3e15, L:/10.5.0.2:8080 - R:/10.5.0.2:57516] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.629 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.629 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0xc74b3e15, L:/10.5.0.2:8080 - R:/10.5.0.2:57516] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.629 DEBUG 12856 --- [reactor-http-nio-1] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.629 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.629 DEBUG 12856 --- [reactor-http-nio-1] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.629 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.629 DEBUG 12856 --- [reactor-http-nio-1] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.629 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [61bc3abd] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.629 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x61bc3abd, L:/10.5.0.2:8080 - R:/10.5.0.2:57517] Last HTTP response frame
2019-07-08 09:27:14.629 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x61bc3abd, L:/10.5.0.2:8080 - R:/10.5.0.2:57517] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.629 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x167a2dfe, L:/10.5.0.2:8080 - R:/10.5.0.2:57525] New http connection, requesting read
2019-07-08 09:27:14.629 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x61bc3abd, L:/10.5.0.2:8080 - R:/10.5.0.2:57517] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.629 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.629 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0xc95e5d21, L:/10.5.0.2:8080 - R:/10.5.0.2:57526] New http connection, requesting read
2019-07-08 09:27:14.629 DEBUG 12856 --- [reactor-http-nio-2] reactor.netty.channel.BootstrapHandlers  : [id: 0x167a2dfe, L:/10.5.0.2:8080 - R:/10.5.0.2:57525] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.629 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x61bc3abd, L:/10.5.0.2:8080 - R:/10.5.0.2:57517] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.629 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.629 DEBUG 12856 --- [reactor-http-nio-3] reactor.netty.channel.BootstrapHandlers  : [id: 0xc95e5d21, L:/10.5.0.2:8080 - R:/10.5.0.2:57526] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.629 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x167a2dfe, L:/10.5.0.2:8080 - R:/10.5.0.2:57525] Increasing pending responses, now 1
2019-07-08 09:27:14.629 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0xc95e5d21, L:/10.5.0.2:8080 - R:/10.5.0.2:57526] Increasing pending responses, now 1
2019-07-08 09:27:14.629 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.629 DEBUG 12856 --- [reactor-http-nio-2] reactor.netty.http.server.HttpServer     : [id: 0x167a2dfe, L:/10.5.0.2:8080 - R:/10.5.0.2:57525] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.630 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x1731d1a2, L:/10.5.0.2:8080 - R:/10.5.0.2:57527] New http connection, requesting read
2019-07-08 09:27:14.630 DEBUG 12856 --- [reactor-http-nio-3] reactor.netty.http.server.HttpServer     : [id: 0xc95e5d21, L:/10.5.0.2:8080 - R:/10.5.0.2:57526] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.630 DEBUG 12856 --- [reactor-http-nio-4] reactor.netty.channel.BootstrapHandlers  : [id: 0x1731d1a2, L:/10.5.0.2:8080 - R:/10.5.0.2:57527] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.630 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.630 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x1731d1a2, L:/10.5.0.2:8080 - R:/10.5.0.2:57527] Increasing pending responses, now 1
2019-07-08 09:27:14.630 DEBUG 12856 --- [reactor-http-nio-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [167a2dfe] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.630 DEBUG 12856 --- [reactor-http-nio-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [c95e5d21] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.630 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.630 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.630 DEBUG 12856 --- [reactor-http-nio-4] reactor.netty.http.server.HttpServer     : [id: 0x1731d1a2, L:/10.5.0.2:8080 - R:/10.5.0.2:57527] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.630 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.630 DEBUG 12856 --- [reactor-http-nio-4] o.s.w.s.adapter.HttpWebHandlerAdapter    : [1731d1a2] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.630 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.630 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.630 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.630 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.630 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.630 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.630 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : [c95e5d21] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.630 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : [167a2dfe] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.630 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : [1731d1a2] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.630 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.630 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.630 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.631 DEBUG 12856 --- [reactor-http-nio-4] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.630 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.630 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 36 bytes, 7 commands in the stack
2019-07-08 09:27:14.631 DEBUG 12856 --- [reactor-http-nio-4] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.631 DEBUG 12856 --- [reactor-http-nio-3] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.631 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.631 DEBUG 12856 --- [reactor-http-nio-4] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.631 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.631 DEBUG 12856 --- [reactor-http-nio-2] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.631 DEBUG 12856 --- [reactor-http-nio-3] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.631 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.631 DEBUG 12856 --- [reactor-http-nio-2] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.631 DEBUG 12856 --- [reactor-http-nio-3] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.631 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.631 DEBUG 12856 --- [reactor-http-nio-2] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.631 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [baa02663] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.631 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xbaa02663, L:/10.5.0.2:8080 - R:/10.5.0.2:57518] Last HTTP response frame
2019-07-08 09:27:14.631 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xbaa02663, L:/10.5.0.2:8080 - R:/10.5.0.2:57518] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.631 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.631 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0xbaa02663, L:/10.5.0.2:8080 - R:/10.5.0.2:57518] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.631 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.631 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0xbaa02663, L:/10.5.0.2:8080 - R:/10.5.0.2:57518] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.631 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.631 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.632 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [1fcc0d16] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.632 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x1fcc0d16, L:/10.5.0.2:8080 - R:/10.5.0.2:57519] Last HTTP response frame
2019-07-08 09:27:14.632 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x1fcc0d16, L:/10.5.0.2:8080 - R:/10.5.0.2:57519] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.632 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.632 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0xd003d297, L:/10.5.0.2:8080 - R:/10.5.0.2:57528] New http connection, requesting read
2019-07-08 09:27:14.632 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.632 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x1fcc0d16, L:/10.5.0.2:8080 - R:/10.5.0.2:57519] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.632 DEBUG 12856 --- [reactor-http-nio-5] reactor.netty.channel.BootstrapHandlers  : [id: 0xd003d297, L:/10.5.0.2:8080 - R:/10.5.0.2:57528] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.632 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x1fcc0d16, L:/10.5.0.2:8080 - R:/10.5.0.2:57519] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.632 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.632 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0xd003d297, L:/10.5.0.2:8080 - R:/10.5.0.2:57528] Increasing pending responses, now 1
2019-07-08 09:27:14.632 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.632 DEBUG 12856 --- [reactor-http-nio-5] reactor.netty.http.server.HttpServer     : [id: 0xd003d297, L:/10.5.0.2:8080 - R:/10.5.0.2:57528] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.632 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [60354f54] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.632 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x05d98a71, L:/10.5.0.2:8080 - R:/10.5.0.2:57529] New http connection, requesting read
2019-07-08 09:27:14.632 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x60354f54, L:/10.5.0.2:8080 - R:/10.5.0.2:57520] Last HTTP response frame
2019-07-08 09:27:14.632 DEBUG 12856 --- [reactor-http-nio-5] o.s.w.s.adapter.HttpWebHandlerAdapter    : [d003d297] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.632 DEBUG 12856 --- [reactor-http-nio-6] reactor.netty.channel.BootstrapHandlers  : [id: 0x05d98a71, L:/10.5.0.2:8080 - R:/10.5.0.2:57529] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.632 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x60354f54, L:/10.5.0.2:8080 - R:/10.5.0.2:57520] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.632 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.632 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x05d98a71, L:/10.5.0.2:8080 - R:/10.5.0.2:57529] Increasing pending responses, now 1
2019-07-08 09:27:14.632 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x60354f54, L:/10.5.0.2:8080 - R:/10.5.0.2:57520] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.632 DEBUG 12856 --- [reactor-http-nio-6] reactor.netty.http.server.HttpServer     : [id: 0x05d98a71, L:/10.5.0.2:8080 - R:/10.5.0.2:57529] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.632 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.632 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.632 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x60354f54, L:/10.5.0.2:8080 - R:/10.5.0.2:57520] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.632 DEBUG 12856 --- [reactor-http-nio-6] o.s.w.s.adapter.HttpWebHandlerAdapter    : [05d98a71] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.632 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.633 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.632 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : [d003d297] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.633 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.633 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.633 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.633 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.633 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x01fdb1d9, L:/10.5.0.2:8080 - R:/10.5.0.2:57530] New http connection, requesting read
2019-07-08 09:27:14.633 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.633 DEBUG 12856 --- [reactor-http-nio-7] reactor.netty.channel.BootstrapHandlers  : [id: 0x01fdb1d9, L:/10.5.0.2:8080 - R:/10.5.0.2:57530] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.633 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : [05d98a71] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.633 DEBUG 12856 --- [reactor-http-nio-5] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.633 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.633 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x01fdb1d9, L:/10.5.0.2:8080 - R:/10.5.0.2:57530] Increasing pending responses, now 1
2019-07-08 09:27:14.633 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.633 DEBUG 12856 --- [reactor-http-nio-5] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.633 DEBUG 12856 --- [reactor-http-nio-7] reactor.netty.http.server.HttpServer     : [id: 0x01fdb1d9, L:/10.5.0.2:8080 - R:/10.5.0.2:57530] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.633 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 48 bytes, 7 commands in the stack
2019-07-08 09:27:14.633 DEBUG 12856 --- [reactor-http-nio-7] o.s.w.s.adapter.HttpWebHandlerAdapter    : [01fdb1d9] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.633 DEBUG 12856 --- [reactor-http-nio-5] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.633 DEBUG 12856 --- [reactor-http-nio-6] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.633 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.633 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.633 DEBUG 12856 --- [reactor-http-nio-6] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.633 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.634 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.634 DEBUG 12856 --- [reactor-http-nio-6] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.634 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.634 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : [01fdb1d9] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.634 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.634 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.634 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [f5924b43] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.634 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xf5924b43, L:/10.5.0.2:8080 - R:/10.5.0.2:57521] Last HTTP response frame
2019-07-08 09:27:14.634 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xf5924b43, L:/10.5.0.2:8080 - R:/10.5.0.2:57521] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.634 DEBUG 12856 --- [reactor-http-nio-7] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.634 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0xf5924b43, L:/10.5.0.2:8080 - R:/10.5.0.2:57521] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.634 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.634 DEBUG 12856 --- [reactor-http-nio-7] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.634 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0xf5924b43, L:/10.5.0.2:8080 - R:/10.5.0.2:57521] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.634 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.634 DEBUG 12856 --- [reactor-http-nio-7] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.634 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.634 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.634 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0xdfcf2454, L:/10.5.0.2:8080 - R:/10.5.0.2:57531] New http connection, requesting read
2019-07-08 09:27:14.634 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [642de019] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.634 DEBUG 12856 --- [reactor-http-nio-8] reactor.netty.channel.BootstrapHandlers  : [id: 0xdfcf2454, L:/10.5.0.2:8080 - R:/10.5.0.2:57531] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.634 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x642de019, L:/10.5.0.2:8080 - R:/10.5.0.2:57522] Last HTTP response frame
2019-07-08 09:27:14.634 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0xdfcf2454, L:/10.5.0.2:8080 - R:/10.5.0.2:57531] Increasing pending responses, now 1
2019-07-08 09:27:14.634 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x642de019, L:/10.5.0.2:8080 - R:/10.5.0.2:57522] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.635 DEBUG 12856 --- [reactor-http-nio-8] reactor.netty.http.server.HttpServer     : [id: 0xdfcf2454, L:/10.5.0.2:8080 - R:/10.5.0.2:57531] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.635 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x642de019, L:/10.5.0.2:8080 - R:/10.5.0.2:57522] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.635 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.635 DEBUG 12856 --- [reactor-http-nio-8] o.s.w.s.adapter.HttpWebHandlerAdapter    : [dfcf2454] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.635 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.635 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.635 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.635 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x642de019, L:/10.5.0.2:8080 - R:/10.5.0.2:57522] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.635 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.635 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.635 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : [dfcf2454] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.635 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0xf2cabdd9, L:/10.5.0.2:8080 - R:/10.5.0.2:57532] New http connection, requesting read
2019-07-08 09:27:14.635 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.635 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [44d9c124] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.635 DEBUG 12856 --- [reactor-http-nio-9] reactor.netty.channel.BootstrapHandlers  : [id: 0xf2cabdd9, L:/10.5.0.2:8080 - R:/10.5.0.2:57532] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.635 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x44d9c124, L:/10.5.0.2:8080 - R:/10.5.0.2:57523] Last HTTP response frame
2019-07-08 09:27:14.635 DEBUG 12856 --- [reactor-http-nio-8] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.635 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x44d9c124, L:/10.5.0.2:8080 - R:/10.5.0.2:57523] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.635 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0xf2cabdd9, L:/10.5.0.2:8080 - R:/10.5.0.2:57532] Increasing pending responses, now 1
2019-07-08 09:27:14.635 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 4 commands
2019-07-08 09:27:14.635 DEBUG 12856 --- [reactor-http-nio-8] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.635 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x44d9c124, L:/10.5.0.2:8080 - R:/10.5.0.2:57523] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.635 DEBUG 12856 --- [reactor-http-nio-9] reactor.netty.http.server.HttpServer     : [id: 0xf2cabdd9, L:/10.5.0.2:8080 - R:/10.5.0.2:57532] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.635 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.635 DEBUG 12856 --- [reactor-http-nio-8] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.635 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x44d9c124, L:/10.5.0.2:8080 - R:/10.5.0.2:57523] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.635 DEBUG 12856 --- [reactor-http-nio-9] o.s.w.s.adapter.HttpWebHandlerAdapter    : [f2cabdd9] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.635 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.635 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.635 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.635 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.636 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [f2971583] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.636 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x8088b4de, L:/10.5.0.2:8080 - R:/10.5.0.2:57533] New http connection, requesting read
2019-07-08 09:27:14.636 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : [f2cabdd9] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.636 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xf2971583, L:/10.5.0.2:8080 - R:/10.5.0.2:57524] Last HTTP response frame
2019-07-08 09:27:14.636 DEBUG 12856 --- [reactor-http-nio-10] reactor.netty.channel.BootstrapHandlers  : [id: 0x8088b4de, L:/10.5.0.2:8080 - R:/10.5.0.2:57533] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.636 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.636 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xf2971583, L:/10.5.0.2:8080 - R:/10.5.0.2:57524] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.636 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x8088b4de, L:/10.5.0.2:8080 - R:/10.5.0.2:57533] Increasing pending responses, now 1
2019-07-08 09:27:14.636 DEBUG 12856 --- [reactor-http-nio-10] reactor.netty.http.server.HttpServer     : [id: 0x8088b4de, L:/10.5.0.2:8080 - R:/10.5.0.2:57533] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.636 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.636 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0xf2971583, L:/10.5.0.2:8080 - R:/10.5.0.2:57524] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.636 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.636 DEBUG 12856 --- [reactor-http-nio-9] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.636 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.636 DEBUG 12856 --- [reactor-http-nio-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [8088b4de] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.636 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0xf2971583, L:/10.5.0.2:8080 - R:/10.5.0.2:57524] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.636 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.636 DEBUG 12856 --- [reactor-http-nio-9] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.636 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.636 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.636 DEBUG 12856 --- [reactor-http-nio-9] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.636 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : [8088b4de] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.636 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.636 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x60f34a32, L:/10.5.0.2:8080 - R:/10.5.0.2:57534] New http connection, requesting read
2019-07-08 09:27:14.636 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.637 DEBUG 12856 --- [reactor-http-nio-11] reactor.netty.channel.BootstrapHandlers  : [id: 0x60f34a32, L:/10.5.0.2:8080 - R:/10.5.0.2:57534] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.636 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.637 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.637 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x60f34a32, L:/10.5.0.2:8080 - R:/10.5.0.2:57534] Increasing pending responses, now 1
2019-07-08 09:27:14.637 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.637 DEBUG 12856 --- [reactor-http-nio-10] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.637 DEBUG 12856 --- [reactor-http-nio-11] reactor.netty.http.server.HttpServer     : [id: 0x60f34a32, L:/10.5.0.2:8080 - R:/10.5.0.2:57534] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.637 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.637 DEBUG 12856 --- [reactor-http-nio-10] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.637 DEBUG 12856 --- [reactor-http-nio-11] o.s.w.s.adapter.HttpWebHandlerAdapter    : [60f34a32] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.637 DEBUG 12856 --- [reactor-http-nio-10] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.637 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.637 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.637 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.637 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.637 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : [60f34a32] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.637 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.637 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.637 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 36 bytes, 9 commands in the stack
2019-07-08 09:27:14.638 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 9 commands
2019-07-08 09:27:14.638 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.638 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.638 DEBUG 12856 --- [reactor-http-nio-11] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.638 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.638 DEBUG 12856 --- [reactor-http-nio-11] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.638 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [1731d1a2] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.638 DEBUG 12856 --- [reactor-http-nio-11] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.638 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x1731d1a2, L:/10.5.0.2:8080 - R:/10.5.0.2:57527] Last HTTP response frame
2019-07-08 09:27:14.638 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x1731d1a2, L:/10.5.0.2:8080 - R:/10.5.0.2:57527] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.638 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.638 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x1731d1a2, L:/10.5.0.2:8080 - R:/10.5.0.2:57527] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.638 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.638 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x1731d1a2, L:/10.5.0.2:8080 - R:/10.5.0.2:57527] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.638 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.638 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.638 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [c95e5d21] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.638 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xc95e5d21, L:/10.5.0.2:8080 - R:/10.5.0.2:57526] Last HTTP response frame
2019-07-08 09:27:14.638 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xc95e5d21, L:/10.5.0.2:8080 - R:/10.5.0.2:57526] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.638 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x221918c9, L:/10.5.0.2:8080 - R:/10.5.0.2:57535] New http connection, requesting read
2019-07-08 09:27:14.638 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.638 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0xc95e5d21, L:/10.5.0.2:8080 - R:/10.5.0.2:57526] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.638 DEBUG 12856 --- [reactor-http-nio-12] reactor.netty.channel.BootstrapHandlers  : [id: 0x221918c9, L:/10.5.0.2:8080 - R:/10.5.0.2:57535] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.638 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0xc95e5d21, L:/10.5.0.2:8080 - R:/10.5.0.2:57526] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.638 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.638 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x221918c9, L:/10.5.0.2:8080 - R:/10.5.0.2:57535] Increasing pending responses, now 1
2019-07-08 09:27:14.638 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.638 DEBUG 12856 --- [reactor-http-nio-12] reactor.netty.http.server.HttpServer     : [id: 0x221918c9, L:/10.5.0.2:8080 - R:/10.5.0.2:57535] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.638 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.638 DEBUG 12856 --- [reactor-http-nio-12] o.s.w.s.adapter.HttpWebHandlerAdapter    : [221918c9] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.639 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x68cd00c7, L:/10.5.0.2:8080 - R:/10.5.0.2:57536] New http connection, requesting read
2019-07-08 09:27:14.639 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [167a2dfe] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.639 DEBUG 12856 --- [reactor-http-nio-13] reactor.netty.channel.BootstrapHandlers  : [id: 0x68cd00c7, L:/10.5.0.2:8080 - R:/10.5.0.2:57536] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.639 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.639 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x68cd00c7, L:/10.5.0.2:8080 - R:/10.5.0.2:57536] Increasing pending responses, now 1
2019-07-08 09:27:14.639 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x167a2dfe, L:/10.5.0.2:8080 - R:/10.5.0.2:57525] Last HTTP response frame
2019-07-08 09:27:14.639 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.639 DEBUG 12856 --- [reactor-http-nio-13] reactor.netty.http.server.HttpServer     : [id: 0x68cd00c7, L:/10.5.0.2:8080 - R:/10.5.0.2:57536] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.639 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x167a2dfe, L:/10.5.0.2:8080 - R:/10.5.0.2:57525] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.639 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : [221918c9] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.639 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.639 DEBUG 12856 --- [reactor-http-nio-13] o.s.w.s.adapter.HttpWebHandlerAdapter    : [68cd00c7] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.639 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x167a2dfe, L:/10.5.0.2:8080 - R:/10.5.0.2:57525] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.639 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.639 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.639 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.639 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x167a2dfe, L:/10.5.0.2:8080 - R:/10.5.0.2:57525] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.639 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 64 bytes, 7 commands in the stack
2019-07-08 09:27:14.639 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.639 DEBUG 12856 --- [reactor-http-nio-12] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.639 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.639 DEBUG 12856 --- [reactor-http-nio-12] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.639 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : [68cd00c7] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.639 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0xc194e362, L:/10.5.0.2:8080 - R:/10.5.0.2:57537] New http connection, requesting read
2019-07-08 09:27:14.639 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.639 DEBUG 12856 --- [reactor-http-nio-12] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.640 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.639 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.640 DEBUG 12856 --- [reactor-http-nio-14] reactor.netty.channel.BootstrapHandlers  : [id: 0xc194e362, L:/10.5.0.2:8080 - R:/10.5.0.2:57537] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.640 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.640 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [d003d297] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.640 DEBUG 12856 --- [reactor-http-nio-13] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.640 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0xc194e362, L:/10.5.0.2:8080 - R:/10.5.0.2:57537] Increasing pending responses, now 1
2019-07-08 09:27:14.640 DEBUG 12856 --- [reactor-http-nio-13] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.640 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xd003d297, L:/10.5.0.2:8080 - R:/10.5.0.2:57528] Last HTTP response frame
2019-07-08 09:27:14.640 DEBUG 12856 --- [reactor-http-nio-14] reactor.netty.http.server.HttpServer     : [id: 0xc194e362, L:/10.5.0.2:8080 - R:/10.5.0.2:57537] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.640 DEBUG 12856 --- [reactor-http-nio-13] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.640 DEBUG 12856 --- [reactor-http-nio-14] o.s.w.s.adapter.HttpWebHandlerAdapter    : [c194e362] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.640 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xd003d297, L:/10.5.0.2:8080 - R:/10.5.0.2:57528] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.640 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.640 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.640 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.640 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0xd003d297, L:/10.5.0.2:8080 - R:/10.5.0.2:57528] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.640 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.640 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : [c194e362] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.640 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0xd003d297, L:/10.5.0.2:8080 - R:/10.5.0.2:57528] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.640 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.640 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.640 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.640 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0xcb273a28, L:/10.5.0.2:8080 - R:/10.5.0.2:57538] New http connection, requesting read
2019-07-08 09:27:14.641 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [05d98a71] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.641 DEBUG 12856 --- [reactor-http-nio-15] reactor.netty.channel.BootstrapHandlers  : [id: 0xcb273a28, L:/10.5.0.2:8080 - R:/10.5.0.2:57538] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.641 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x05d98a71, L:/10.5.0.2:8080 - R:/10.5.0.2:57529] Last HTTP response frame
2019-07-08 09:27:14.641 DEBUG 12856 --- [reactor-http-nio-14] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.641 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x05d98a71, L:/10.5.0.2:8080 - R:/10.5.0.2:57529] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.641 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0xcb273a28, L:/10.5.0.2:8080 - R:/10.5.0.2:57538] Increasing pending responses, now 1
2019-07-08 09:27:14.641 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.641 DEBUG 12856 --- [reactor-http-nio-15] reactor.netty.http.server.HttpServer     : [id: 0xcb273a28, L:/10.5.0.2:8080 - R:/10.5.0.2:57538] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.641 DEBUG 12856 --- [reactor-http-nio-14] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.641 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x05d98a71, L:/10.5.0.2:8080 - R:/10.5.0.2:57529] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.641 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.641 DEBUG 12856 --- [reactor-http-nio-15] o.s.w.s.adapter.HttpWebHandlerAdapter    : [cb273a28] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.641 DEBUG 12856 --- [reactor-http-nio-14] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.641 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.641 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x05d98a71, L:/10.5.0.2:8080 - R:/10.5.0.2:57529] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.641 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.641 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.641 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.641 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [01fdb1d9] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.641 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x92ca4299, L:/10.5.0.2:8080 - R:/10.5.0.2:57539] New http connection, requesting read
2019-07-08 09:27:14.641 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : [cb273a28] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.641 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x01fdb1d9, L:/10.5.0.2:8080 - R:/10.5.0.2:57530] Last HTTP response frame
2019-07-08 09:27:14.641 DEBUG 12856 --- [reactor-http-nio-16] reactor.netty.channel.BootstrapHandlers  : [id: 0x92ca4299, L:/10.5.0.2:8080 - R:/10.5.0.2:57539] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.641 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.641 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x01fdb1d9, L:/10.5.0.2:8080 - R:/10.5.0.2:57530] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.641 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x92ca4299, L:/10.5.0.2:8080 - R:/10.5.0.2:57539] Increasing pending responses, now 1
2019-07-08 09:27:14.641 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 4 commands
2019-07-08 09:27:14.641 DEBUG 12856 --- [reactor-http-nio-16] reactor.netty.http.server.HttpServer     : [id: 0x92ca4299, L:/10.5.0.2:8080 - R:/10.5.0.2:57539] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.641 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x01fdb1d9, L:/10.5.0.2:8080 - R:/10.5.0.2:57530] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.641 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.641 DEBUG 12856 --- [reactor-http-nio-16] o.s.w.s.adapter.HttpWebHandlerAdapter    : [92ca4299] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.642 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.641 DEBUG 12856 --- [reactor-http-nio-15] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.642 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x01fdb1d9, L:/10.5.0.2:8080 - R:/10.5.0.2:57530] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.642 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.642 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.642 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.642 DEBUG 12856 --- [reactor-http-nio-15] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.642 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [dfcf2454] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.642 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : [92ca4299] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.642 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x65863081, L:/10.5.0.2:8080 - R:/10.5.0.2:57540] New http connection, requesting read
2019-07-08 09:27:14.642 DEBUG 12856 --- [reactor-http-nio-15] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.642 DEBUG 12856 --- [reactor-http-nio-1] reactor.netty.channel.BootstrapHandlers  : [id: 0x65863081, L:/10.5.0.2:8080 - R:/10.5.0.2:57540] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.642 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xdfcf2454, L:/10.5.0.2:8080 - R:/10.5.0.2:57531] Last HTTP response frame
2019-07-08 09:27:14.642 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x65863081, L:/10.5.0.2:8080 - R:/10.5.0.2:57540] Increasing pending responses, now 1
2019-07-08 09:27:14.642 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.642 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xdfcf2454, L:/10.5.0.2:8080 - R:/10.5.0.2:57531] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.642 DEBUG 12856 --- [reactor-http-nio-1] reactor.netty.http.server.HttpServer     : [id: 0x65863081, L:/10.5.0.2:8080 - R:/10.5.0.2:57540] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.642 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 3 commands
2019-07-08 09:27:14.642 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0xdfcf2454, L:/10.5.0.2:8080 - R:/10.5.0.2:57531] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.642 DEBUG 12856 --- [reactor-http-nio-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [65863081] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.642 DEBUG 12856 --- [reactor-http-nio-16] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.642 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.642 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0xdfcf2454, L:/10.5.0.2:8080 - R:/10.5.0.2:57531] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.642 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.642 DEBUG 12856 --- [reactor-http-nio-16] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.642 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.642 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.642 DEBUG 12856 --- [reactor-http-nio-16] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.642 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : [65863081] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.643 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.643 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.643 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [f2cabdd9] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.643 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xf2cabdd9, L:/10.5.0.2:8080 - R:/10.5.0.2:57532] Last HTTP response frame
2019-07-08 09:27:14.643 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xf2cabdd9, L:/10.5.0.2:8080 - R:/10.5.0.2:57532] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.643 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 2 commands
2019-07-08 09:27:14.643 DEBUG 12856 --- [reactor-http-nio-1] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.643 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0xf2cabdd9, L:/10.5.0.2:8080 - R:/10.5.0.2:57532] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.643 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.643 DEBUG 12856 --- [reactor-http-nio-1] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.643 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0xf2cabdd9, L:/10.5.0.2:8080 - R:/10.5.0.2:57532] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.643 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: false
2019-07-08 09:27:14.643 DEBUG 12856 --- [reactor-http-nio-1] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.643 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 20 bytes, 2 commands in the stack
2019-07-08 09:27:14.643 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 2 commands
2019-07-08 09:27:14.643 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.643 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x8b65a502, L:/10.5.0.2:8080 - R:/10.5.0.2:57541] New http connection, requesting read
2019-07-08 09:27:14.643 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x58e47305, L:/10.5.0.2:8080 - R:/10.5.0.2:57542] New http connection, requesting read
2019-07-08 09:27:14.643 DEBUG 12856 --- [reactor-http-nio-2] reactor.netty.channel.BootstrapHandlers  : [id: 0x8b65a502, L:/10.5.0.2:8080 - R:/10.5.0.2:57541] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.643 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.643 DEBUG 12856 --- [reactor-http-nio-3] reactor.netty.channel.BootstrapHandlers  : [id: 0x58e47305, L:/10.5.0.2:8080 - R:/10.5.0.2:57542] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.643 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.643 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x8b65a502, L:/10.5.0.2:8080 - R:/10.5.0.2:57541] Increasing pending responses, now 1
2019-07-08 09:27:14.643 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x58e47305, L:/10.5.0.2:8080 - R:/10.5.0.2:57542] Increasing pending responses, now 1
2019-07-08 09:27:14.643 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [8088b4de] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.643 DEBUG 12856 --- [reactor-http-nio-2] reactor.netty.http.server.HttpServer     : [id: 0x8b65a502, L:/10.5.0.2:8080 - R:/10.5.0.2:57541] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.643 DEBUG 12856 --- [reactor-http-nio-3] reactor.netty.http.server.HttpServer     : [id: 0x58e47305, L:/10.5.0.2:8080 - R:/10.5.0.2:57542] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.643 DEBUG 12856 --- [reactor-http-nio-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [8b65a502] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.643 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x8088b4de, L:/10.5.0.2:8080 - R:/10.5.0.2:57533] Last HTTP response frame
2019-07-08 09:27:14.643 DEBUG 12856 --- [reactor-http-nio-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [58e47305] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.643 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x8088b4de, L:/10.5.0.2:8080 - R:/10.5.0.2:57533] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.643 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.644 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 1 commands
2019-07-08 09:27:14.644 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.644 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.644 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x8088b4de, L:/10.5.0.2:8080 - R:/10.5.0.2:57533] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.644 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.644 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : [8b65a502] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.644 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.644 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x8088b4de, L:/10.5.0.2:8080 - R:/10.5.0.2:57533] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.644 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.644 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.644 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : [58e47305] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.644 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.644 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0xf102abc9, L:/10.5.0.2:8080 - R:/10.5.0.2:57543] New http connection, requesting read
2019-07-08 09:27:14.644 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [60f34a32] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.644 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.644 DEBUG 12856 --- [reactor-http-nio-4] reactor.netty.channel.BootstrapHandlers  : [id: 0xf102abc9, L:/10.5.0.2:8080 - R:/10.5.0.2:57543] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.644 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x60f34a32, L:/10.5.0.2:8080 - R:/10.5.0.2:57534] Last HTTP response frame
2019-07-08 09:27:14.644 DEBUG 12856 --- [reactor-http-nio-2] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.644 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0xf102abc9, L:/10.5.0.2:8080 - R:/10.5.0.2:57543] Increasing pending responses, now 1
2019-07-08 09:27:14.644 DEBUG 12856 --- [reactor-http-nio-2] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.644 DEBUG 12856 --- [reactor-http-nio-4] reactor.netty.http.server.HttpServer     : [id: 0xf102abc9, L:/10.5.0.2:8080 - R:/10.5.0.2:57543] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.644 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x60f34a32, L:/10.5.0.2:8080 - R:/10.5.0.2:57534] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.644 DEBUG 12856 --- [reactor-http-nio-3] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.644 DEBUG 12856 --- [reactor-http-nio-2] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.644 DEBUG 12856 --- [reactor-http-nio-4] o.s.w.s.adapter.HttpWebHandlerAdapter    : [f102abc9] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.644 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.644 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x60f34a32, L:/10.5.0.2:8080 - R:/10.5.0.2:57534] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.644 DEBUG 12856 --- [reactor-http-nio-3] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.645 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.645 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x60f34a32, L:/10.5.0.2:8080 - R:/10.5.0.2:57534] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.645 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.645 DEBUG 12856 --- [reactor-http-nio-3] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.645 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.645 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.645 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : [f102abc9] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.645 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x99cda29f, L:/10.5.0.2:8080 - R:/10.5.0.2:57544] New http connection, requesting read
2019-07-08 09:27:14.645 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.645 DEBUG 12856 --- [reactor-http-nio-5] reactor.netty.channel.BootstrapHandlers  : [id: 0x99cda29f, L:/10.5.0.2:8080 - R:/10.5.0.2:57544] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.645 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.645 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.645 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x99cda29f, L:/10.5.0.2:8080 - R:/10.5.0.2:57544] Increasing pending responses, now 1
2019-07-08 09:27:14.645 DEBUG 12856 --- [reactor-http-nio-5] reactor.netty.http.server.HttpServer     : [id: 0x99cda29f, L:/10.5.0.2:8080 - R:/10.5.0.2:57544] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.645 DEBUG 12856 --- [reactor-http-nio-4] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.645 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.645 DEBUG 12856 --- [reactor-http-nio-5] o.s.w.s.adapter.HttpWebHandlerAdapter    : [99cda29f] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.645 DEBUG 12856 --- [reactor-http-nio-4] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.645 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.645 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.645 DEBUG 12856 --- [reactor-http-nio-4] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.645 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.645 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.646 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.646 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : [99cda29f] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.646 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.646 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.646 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.646 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.646 DEBUG 12856 --- [reactor-http-nio-5] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.646 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.646 DEBUG 12856 --- [reactor-http-nio-5] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.646 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.646 DEBUG 12856 --- [reactor-http-nio-5] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.646 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.646 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.646 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.646 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.646 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.646 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.647 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 12 bytes, 10 commands in the stack
2019-07-08 09:27:14.647 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 10 commands
2019-07-08 09:27:14.647 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.647 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.647 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.647 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [221918c9] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.647 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x221918c9, L:/10.5.0.2:8080 - R:/10.5.0.2:57535] Last HTTP response frame
2019-07-08 09:27:14.647 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x221918c9, L:/10.5.0.2:8080 - R:/10.5.0.2:57535] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.647 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 12 bytes, 9 commands in the stack
2019-07-08 09:27:14.647 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x221918c9, L:/10.5.0.2:8080 - R:/10.5.0.2:57535] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.647 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 9 commands
2019-07-08 09:27:14.647 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.647 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x221918c9, L:/10.5.0.2:8080 - R:/10.5.0.2:57535] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.647 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.647 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.647 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [68cd00c7] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.647 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x68cd00c7, L:/10.5.0.2:8080 - R:/10.5.0.2:57536] Last HTTP response frame
2019-07-08 09:27:14.647 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x68cd00c7, L:/10.5.0.2:8080 - R:/10.5.0.2:57536] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.647 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x68cd00c7, L:/10.5.0.2:8080 - R:/10.5.0.2:57536] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.647 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0xfce5650a, L:/10.5.0.2:8080 - R:/10.5.0.2:57546] New http connection, requesting read
2019-07-08 09:27:14.647 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x68cd00c7, L:/10.5.0.2:8080 - R:/10.5.0.2:57536] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.647 DEBUG 12856 --- [reactor-http-nio-6] reactor.netty.channel.BootstrapHandlers  : [id: 0xfce5650a, L:/10.5.0.2:8080 - R:/10.5.0.2:57546] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.647 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0xfce5650a, L:/10.5.0.2:8080 - R:/10.5.0.2:57546] Increasing pending responses, now 1
2019-07-08 09:27:14.648 DEBUG 12856 --- [reactor-http-nio-6] reactor.netty.http.server.HttpServer     : [id: 0xfce5650a, L:/10.5.0.2:8080 - R:/10.5.0.2:57546] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.648 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x34af87e0, L:/10.5.0.2:8080 - R:/10.5.0.2:57547] New http connection, requesting read
2019-07-08 09:27:14.648 DEBUG 12856 --- [reactor-http-nio-6] o.s.w.s.adapter.HttpWebHandlerAdapter    : [fce5650a] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.648 DEBUG 12856 --- [reactor-http-nio-7] reactor.netty.channel.BootstrapHandlers  : [id: 0x34af87e0, L:/10.5.0.2:8080 - R:/10.5.0.2:57547] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.648 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.648 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 48 bytes, 8 commands in the stack
2019-07-08 09:27:14.648 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.648 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x34af87e0, L:/10.5.0.2:8080 - R:/10.5.0.2:57547] Increasing pending responses, now 1
2019-07-08 09:27:14.648 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.648 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : [fce5650a] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.648 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.648 DEBUG 12856 --- [reactor-http-nio-7] reactor.netty.http.server.HttpServer     : [id: 0x34af87e0, L:/10.5.0.2:8080 - R:/10.5.0.2:57547] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.648 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.648 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.648 DEBUG 12856 --- [reactor-http-nio-7] o.s.w.s.adapter.HttpWebHandlerAdapter    : [34af87e0] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.648 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.648 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.648 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [c194e362] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.648 DEBUG 12856 --- [reactor-http-nio-6] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.648 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.648 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xc194e362, L:/10.5.0.2:8080 - R:/10.5.0.2:57537] Last HTTP response frame
2019-07-08 09:27:14.648 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : [34af87e0] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.648 DEBUG 12856 --- [reactor-http-nio-6] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.648 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xc194e362, L:/10.5.0.2:8080 - R:/10.5.0.2:57537] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.649 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.649 DEBUG 12856 --- [reactor-http-nio-6] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.649 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.649 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0xc194e362, L:/10.5.0.2:8080 - R:/10.5.0.2:57537] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.649 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.649 DEBUG 12856 --- [reactor-http-nio-7] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.649 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0xc194e362, L:/10.5.0.2:8080 - R:/10.5.0.2:57537] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.649 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.649 DEBUG 12856 --- [reactor-http-nio-7] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.649 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.649 DEBUG 12856 --- [reactor-http-nio-7] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.649 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [cb273a28] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.649 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xcb273a28, L:/10.5.0.2:8080 - R:/10.5.0.2:57538] Last HTTP response frame
2019-07-08 09:27:14.649 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x66ab327b, L:/10.5.0.2:8080 - R:/10.5.0.2:57548] New http connection, requesting read
2019-07-08 09:27:14.649 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xcb273a28, L:/10.5.0.2:8080 - R:/10.5.0.2:57538] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.649 DEBUG 12856 --- [reactor-http-nio-8] reactor.netty.channel.BootstrapHandlers  : [id: 0x66ab327b, L:/10.5.0.2:8080 - R:/10.5.0.2:57548] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.649 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0xcb273a28, L:/10.5.0.2:8080 - R:/10.5.0.2:57538] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.649 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.649 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x66ab327b, L:/10.5.0.2:8080 - R:/10.5.0.2:57548] Increasing pending responses, now 1
2019-07-08 09:27:14.649 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0xcb273a28, L:/10.5.0.2:8080 - R:/10.5.0.2:57538] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.649 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.649 DEBUG 12856 --- [reactor-http-nio-8] reactor.netty.http.server.HttpServer     : [id: 0x66ab327b, L:/10.5.0.2:8080 - R:/10.5.0.2:57548] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.650 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.650 DEBUG 12856 --- [reactor-http-nio-8] o.s.w.s.adapter.HttpWebHandlerAdapter    : [66ab327b] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.650 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.650 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.650 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [92ca4299] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.650 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x1825459b, L:/10.5.0.2:8080 - R:/10.5.0.2:57549] New http connection, requesting read
2019-07-08 09:27:14.650 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x92ca4299, L:/10.5.0.2:8080 - R:/10.5.0.2:57539] Last HTTP response frame
2019-07-08 09:27:14.650 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.650 DEBUG 12856 --- [reactor-http-nio-9] reactor.netty.channel.BootstrapHandlers  : [id: 0x1825459b, L:/10.5.0.2:8080 - R:/10.5.0.2:57549] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.650 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x92ca4299, L:/10.5.0.2:8080 - R:/10.5.0.2:57539] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.650 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : [66ab327b] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.650 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x1825459b, L:/10.5.0.2:8080 - R:/10.5.0.2:57549] Increasing pending responses, now 1
2019-07-08 09:27:14.650 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.650 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x92ca4299, L:/10.5.0.2:8080 - R:/10.5.0.2:57539] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.650 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.650 DEBUG 12856 --- [reactor-http-nio-9] reactor.netty.http.server.HttpServer     : [id: 0x1825459b, L:/10.5.0.2:8080 - R:/10.5.0.2:57549] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.650 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.650 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0x92ca4299, L:/10.5.0.2:8080 - R:/10.5.0.2:57539] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.650 DEBUG 12856 --- [reactor-http-nio-9] o.s.w.s.adapter.HttpWebHandlerAdapter    : [1825459b] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.651 DEBUG 12856 --- [reactor-http-nio-8] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.651 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.651 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.651 DEBUG 12856 --- [reactor-http-nio-8] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.651 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.651 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.651 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x1e770c23, L:/10.5.0.2:8080 - R:/10.5.0.2:57550] New http connection, requesting read
2019-07-08 09:27:14.651 DEBUG 12856 --- [reactor-http-nio-8] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.651 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [65863081] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.651 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : [1825459b] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.651 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x65863081, L:/10.5.0.2:8080 - R:/10.5.0.2:57540] Last HTTP response frame
2019-07-08 09:27:14.651 DEBUG 12856 --- [reactor-http-nio-10] reactor.netty.channel.BootstrapHandlers  : [id: 0x1e770c23, L:/10.5.0.2:8080 - R:/10.5.0.2:57550] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.651 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.651 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x65863081, L:/10.5.0.2:8080 - R:/10.5.0.2:57540] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.651 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x1e770c23, L:/10.5.0.2:8080 - R:/10.5.0.2:57550] Increasing pending responses, now 1
2019-07-08 09:27:14.652 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.652 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x65863081, L:/10.5.0.2:8080 - R:/10.5.0.2:57540] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.652 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.652 DEBUG 12856 --- [reactor-http-nio-10] reactor.netty.http.server.HttpServer     : [id: 0x1e770c23, L:/10.5.0.2:8080 - R:/10.5.0.2:57550] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.652 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.652 DEBUG 12856 --- [reactor-http-nio-9] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.652 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x65863081, L:/10.5.0.2:8080 - R:/10.5.0.2:57540] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.652 DEBUG 12856 --- [reactor-http-nio-9] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.652 DEBUG 12856 --- [reactor-http-nio-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [1e770c23] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.652 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.652 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.652 DEBUG 12856 --- [reactor-http-nio-9] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.652 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.652 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.652 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0xf5d52f1e, L:/10.5.0.2:8080 - R:/10.5.0.2:57551] New http connection, requesting read
2019-07-08 09:27:14.652 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.652 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : [1e770c23] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.652 DEBUG 12856 --- [reactor-http-nio-11] reactor.netty.channel.BootstrapHandlers  : [id: 0xf5d52f1e, L:/10.5.0.2:8080 - R:/10.5.0.2:57551] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.652 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.652 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.652 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0xf5d52f1e, L:/10.5.0.2:8080 - R:/10.5.0.2:57551] Increasing pending responses, now 1
2019-07-08 09:27:14.652 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.653 DEBUG 12856 --- [reactor-http-nio-11] reactor.netty.http.server.HttpServer     : [id: 0xf5d52f1e, L:/10.5.0.2:8080 - R:/10.5.0.2:57551] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.653 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 48 bytes, 8 commands in the stack
2019-07-08 09:27:14.653 DEBUG 12856 --- [reactor-http-nio-11] o.s.w.s.adapter.HttpWebHandlerAdapter    : [f5d52f1e] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.653 DEBUG 12856 --- [reactor-http-nio-10] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.653 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.653 DEBUG 12856 --- [reactor-http-nio-10] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.653 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.653 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.653 DEBUG 12856 --- [reactor-http-nio-10] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.653 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.653 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.653 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.653 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : [f5d52f1e] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.654 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [8b65a502] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.654 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x8b65a502, L:/10.5.0.2:8080 - R:/10.5.0.2:57541] Last HTTP response frame
2019-07-08 09:27:14.654 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.654 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x8b65a502, L:/10.5.0.2:8080 - R:/10.5.0.2:57541] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.654 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.654 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x8b65a502, L:/10.5.0.2:8080 - R:/10.5.0.2:57541] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.654 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.654 DEBUG 12856 --- [reactor-http-nio-11] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.654 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x8b65a502, L:/10.5.0.2:8080 - R:/10.5.0.2:57541] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.654 DEBUG 12856 --- [reactor-http-nio-11] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.654 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.654 DEBUG 12856 --- [reactor-http-nio-11] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.654 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.654 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [58e47305] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.654 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0xc2d53276, L:/10.5.0.2:8080 - R:/10.5.0.2:57552] New http connection, requesting read
2019-07-08 09:27:14.654 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x58e47305, L:/10.5.0.2:8080 - R:/10.5.0.2:57542] Last HTTP response frame
2019-07-08 09:27:14.654 DEBUG 12856 --- [reactor-http-nio-12] reactor.netty.channel.BootstrapHandlers  : [id: 0xc2d53276, L:/10.5.0.2:8080 - R:/10.5.0.2:57552] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.654 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x58e47305, L:/10.5.0.2:8080 - R:/10.5.0.2:57542] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.654 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0xc2d53276, L:/10.5.0.2:8080 - R:/10.5.0.2:57552] Increasing pending responses, now 1
2019-07-08 09:27:14.654 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.654 DEBUG 12856 --- [reactor-http-nio-12] reactor.netty.http.server.HttpServer     : [id: 0xc2d53276, L:/10.5.0.2:8080 - R:/10.5.0.2:57552] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.654 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x58e47305, L:/10.5.0.2:8080 - R:/10.5.0.2:57542] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.655 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.655 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x58e47305, L:/10.5.0.2:8080 - R:/10.5.0.2:57542] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.655 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.655 DEBUG 12856 --- [reactor-http-nio-12] o.s.w.s.adapter.HttpWebHandlerAdapter    : [c2d53276] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.655 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.655 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.655 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [f102abc9] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.655 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.655 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xf102abc9, L:/10.5.0.2:8080 - R:/10.5.0.2:57543] Last HTTP response frame
2019-07-08 09:27:14.655 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0xf60e4cd0, L:/10.5.0.2:8080 - R:/10.5.0.2:57553] New http connection, requesting read
2019-07-08 09:27:14.655 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : [c2d53276] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.655 DEBUG 12856 --- [reactor-http-nio-13] reactor.netty.channel.BootstrapHandlers  : [id: 0xf60e4cd0, L:/10.5.0.2:8080 - R:/10.5.0.2:57553] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.655 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xf102abc9, L:/10.5.0.2:8080 - R:/10.5.0.2:57543] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.655 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.655 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0xf60e4cd0, L:/10.5.0.2:8080 - R:/10.5.0.2:57553] Increasing pending responses, now 1
2019-07-08 09:27:14.655 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.655 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0xf102abc9, L:/10.5.0.2:8080 - R:/10.5.0.2:57543] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.656 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.656 DEBUG 12856 --- [reactor-http-nio-12] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.655 DEBUG 12856 --- [reactor-http-nio-13] reactor.netty.http.server.HttpServer     : [id: 0xf60e4cd0, L:/10.5.0.2:8080 - R:/10.5.0.2:57553] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.656 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0xf102abc9, L:/10.5.0.2:8080 - R:/10.5.0.2:57543] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.656 DEBUG 12856 --- [reactor-http-nio-13] o.s.w.s.adapter.HttpWebHandlerAdapter    : [f60e4cd0] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.656 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.656 DEBUG 12856 --- [reactor-http-nio-12] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.656 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.656 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.656 DEBUG 12856 --- [reactor-http-nio-12] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.656 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [99cda29f] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.656 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.656 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x7c13805a, L:/10.5.0.2:8080 - R:/10.5.0.2:57554] New http connection, requesting read
2019-07-08 09:27:14.656 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x99cda29f, L:/10.5.0.2:8080 - R:/10.5.0.2:57544] Last HTTP response frame
2019-07-08 09:27:14.656 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : [f60e4cd0] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.656 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x99cda29f, L:/10.5.0.2:8080 - R:/10.5.0.2:57544] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.656 DEBUG 12856 --- [reactor-http-nio-14] reactor.netty.channel.BootstrapHandlers  : [id: 0x7c13805a, L:/10.5.0.2:8080 - R:/10.5.0.2:57554] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.656 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.656 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.656 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x99cda29f, L:/10.5.0.2:8080 - R:/10.5.0.2:57544] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.656 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x7c13805a, L:/10.5.0.2:8080 - R:/10.5.0.2:57554] Increasing pending responses, now 1
2019-07-08 09:27:14.657 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.657 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x99cda29f, L:/10.5.0.2:8080 - R:/10.5.0.2:57544] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.657 DEBUG 12856 --- [reactor-http-nio-14] reactor.netty.http.server.HttpServer     : [id: 0x7c13805a, L:/10.5.0.2:8080 - R:/10.5.0.2:57554] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.657 DEBUG 12856 --- [reactor-http-nio-13] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.657 DEBUG 12856 --- [reactor-http-nio-14] o.s.w.s.adapter.HttpWebHandlerAdapter    : [7c13805a] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.657 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.657 DEBUG 12856 --- [reactor-http-nio-13] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.657 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.657 DEBUG 12856 --- [reactor-http-nio-13] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.657 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.657 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0xcade911a, L:/10.5.0.2:8080 - R:/10.5.0.2:57555] New http connection, requesting read
2019-07-08 09:27:14.657 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.657 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.657 DEBUG 12856 --- [reactor-http-nio-15] reactor.netty.channel.BootstrapHandlers  : [id: 0xcade911a, L:/10.5.0.2:8080 - R:/10.5.0.2:57555] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.657 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.657 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : [7c13805a] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.658 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.658 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.658 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0xcade911a, L:/10.5.0.2:8080 - R:/10.5.0.2:57555] Increasing pending responses, now 1
2019-07-08 09:27:14.658 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.658 DEBUG 12856 --- [reactor-http-nio-15] reactor.netty.http.server.HttpServer     : [id: 0xcade911a, L:/10.5.0.2:8080 - R:/10.5.0.2:57555] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.658 DEBUG 12856 --- [reactor-http-nio-14] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.658 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 48 bytes, 8 commands in the stack
2019-07-08 09:27:14.658 DEBUG 12856 --- [reactor-http-nio-14] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.658 DEBUG 12856 --- [reactor-http-nio-15] o.s.w.s.adapter.HttpWebHandlerAdapter    : [cade911a] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.658 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.658 DEBUG 12856 --- [reactor-http-nio-14] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.658 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.658 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.658 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.658 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.658 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : [cade911a] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.659 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.659 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.659 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [fce5650a] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.659 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xfce5650a, L:/10.5.0.2:8080 - R:/10.5.0.2:57546] Last HTTP response frame
2019-07-08 09:27:14.659 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xfce5650a, L:/10.5.0.2:8080 - R:/10.5.0.2:57546] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.659 DEBUG 12856 --- [reactor-http-nio-15] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.659 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.659 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0xfce5650a, L:/10.5.0.2:8080 - R:/10.5.0.2:57546] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.659 DEBUG 12856 --- [reactor-http-nio-15] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.659 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.659 DEBUG 12856 --- [reactor-http-nio-15] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.659 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.659 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0xfce5650a, L:/10.5.0.2:8080 - R:/10.5.0.2:57546] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.659 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.659 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [34af87e0] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.660 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x34af87e0, L:/10.5.0.2:8080 - R:/10.5.0.2:57547] Last HTTP response frame
2019-07-08 09:27:14.660 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0xd0d515db, L:/10.5.0.2:8080 - R:/10.5.0.2:57556] New http connection, requesting read
2019-07-08 09:27:14.660 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x34af87e0, L:/10.5.0.2:8080 - R:/10.5.0.2:57547] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.660 DEBUG 12856 --- [reactor-http-nio-16] reactor.netty.channel.BootstrapHandlers  : [id: 0xd0d515db, L:/10.5.0.2:8080 - R:/10.5.0.2:57556] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.660 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.660 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x34af87e0, L:/10.5.0.2:8080 - R:/10.5.0.2:57547] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.660 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0xd0d515db, L:/10.5.0.2:8080 - R:/10.5.0.2:57556] Increasing pending responses, now 1
2019-07-08 09:27:14.660 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.660 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x34af87e0, L:/10.5.0.2:8080 - R:/10.5.0.2:57547] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.660 DEBUG 12856 --- [reactor-http-nio-16] reactor.netty.http.server.HttpServer     : [id: 0xd0d515db, L:/10.5.0.2:8080 - R:/10.5.0.2:57556] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.660 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.660 DEBUG 12856 --- [reactor-http-nio-16] o.s.w.s.adapter.HttpWebHandlerAdapter    : [d0d515db] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.660 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.660 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.660 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [66ab327b] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.660 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x21cefe39, L:/10.5.0.2:8080 - R:/10.5.0.2:57557] New http connection, requesting read
2019-07-08 09:27:14.660 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.660 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x66ab327b, L:/10.5.0.2:8080 - R:/10.5.0.2:57548] Last HTTP response frame
2019-07-08 09:27:14.661 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : [d0d515db] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.660 DEBUG 12856 --- [reactor-http-nio-1] reactor.netty.channel.BootstrapHandlers  : [id: 0x21cefe39, L:/10.5.0.2:8080 - R:/10.5.0.2:57557] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.661 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.661 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x66ab327b, L:/10.5.0.2:8080 - R:/10.5.0.2:57548] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.661 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x21cefe39, L:/10.5.0.2:8080 - R:/10.5.0.2:57557] Increasing pending responses, now 1
2019-07-08 09:27:14.661 DEBUG 12856 --- [reactor-http-nio-16] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.661 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.661 DEBUG 12856 --- [reactor-http-nio-1] reactor.netty.http.server.HttpServer     : [id: 0x21cefe39, L:/10.5.0.2:8080 - R:/10.5.0.2:57557] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.661 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x66ab327b, L:/10.5.0.2:8080 - R:/10.5.0.2:57548] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.661 DEBUG 12856 --- [reactor-http-nio-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [21cefe39] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.661 DEBUG 12856 --- [reactor-http-nio-16] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.661 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.662 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.662 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x66ab327b, L:/10.5.0.2:8080 - R:/10.5.0.2:57548] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.662 DEBUG 12856 --- [reactor-http-nio-16] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.662 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.662 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.662 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.662 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : [21cefe39] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.662 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [1825459b] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.662 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.662 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x1825459b, L:/10.5.0.2:8080 - R:/10.5.0.2:57549] Last HTTP response frame
2019-07-08 09:27:14.663 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x1825459b, L:/10.5.0.2:8080 - R:/10.5.0.2:57549] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.663 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.663 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x1825459b, L:/10.5.0.2:8080 - R:/10.5.0.2:57549] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.663 DEBUG 12856 --- [reactor-http-nio-1] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.663 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.663 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x1825459b, L:/10.5.0.2:8080 - R:/10.5.0.2:57549] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.663 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.663 DEBUG 12856 --- [reactor-http-nio-1] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.663 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.663 DEBUG 12856 --- [reactor-http-nio-1] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.663 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.663 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x0b4007b9, L:/10.5.0.2:8080 - R:/10.5.0.2:57559] New http connection, requesting read
2019-07-08 09:27:14.663 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x214432b1, L:/10.5.0.2:8080 - R:/10.5.0.2:57558] New http connection, requesting read
2019-07-08 09:27:14.663 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.663 DEBUG 12856 --- [reactor-http-nio-3] reactor.netty.channel.BootstrapHandlers  : [id: 0x0b4007b9, L:/10.5.0.2:8080 - R:/10.5.0.2:57559] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.663 DEBUG 12856 --- [reactor-http-nio-2] reactor.netty.channel.BootstrapHandlers  : [id: 0x214432b1, L:/10.5.0.2:8080 - R:/10.5.0.2:57558] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.664 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.664 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x0b4007b9, L:/10.5.0.2:8080 - R:/10.5.0.2:57559] Increasing pending responses, now 1
2019-07-08 09:27:14.664 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x214432b1, L:/10.5.0.2:8080 - R:/10.5.0.2:57558] Increasing pending responses, now 1
2019-07-08 09:27:14.664 DEBUG 12856 --- [reactor-http-nio-3] reactor.netty.http.server.HttpServer     : [id: 0x0b4007b9, L:/10.5.0.2:8080 - R:/10.5.0.2:57559] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.664 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.664 DEBUG 12856 --- [reactor-http-nio-2] reactor.netty.http.server.HttpServer     : [id: 0x214432b1, L:/10.5.0.2:8080 - R:/10.5.0.2:57558] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.664 DEBUG 12856 --- [reactor-http-nio-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [0b4007b9] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.664 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 48 bytes, 8 commands in the stack
2019-07-08 09:27:14.664 DEBUG 12856 --- [reactor-http-nio-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [214432b1] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.664 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.664 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.664 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.664 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.664 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : [0b4007b9] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.664 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.664 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.664 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.664 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.665 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : [214432b1] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.665 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.665 DEBUG 12856 --- [reactor-http-nio-3] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.665 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.665 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [1e770c23] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.665 DEBUG 12856 --- [reactor-http-nio-3] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.665 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x1e770c23, L:/10.5.0.2:8080 - R:/10.5.0.2:57550] Last HTTP response frame
2019-07-08 09:27:14.665 DEBUG 12856 --- [reactor-http-nio-3] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.665 DEBUG 12856 --- [reactor-http-nio-2] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.665 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x1e770c23, L:/10.5.0.2:8080 - R:/10.5.0.2:57550] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.665 DEBUG 12856 --- [reactor-http-nio-2] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.665 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.665 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.665 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x1e770c23, L:/10.5.0.2:8080 - R:/10.5.0.2:57550] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.665 DEBUG 12856 --- [reactor-http-nio-2] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.665 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.665 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x1e770c23, L:/10.5.0.2:8080 - R:/10.5.0.2:57550] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.665 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.665 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [f5d52f1e] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.665 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xf5d52f1e, L:/10.5.0.2:8080 - R:/10.5.0.2:57551] Last HTTP response frame
2019-07-08 09:27:14.666 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xf5d52f1e, L:/10.5.0.2:8080 - R:/10.5.0.2:57551] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.666 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.666 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0xf5d52f1e, L:/10.5.0.2:8080 - R:/10.5.0.2:57551] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.666 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x1ff636dc, L:/10.5.0.2:8080 - R:/10.5.0.2:57560] New http connection, requesting read
2019-07-08 09:27:14.666 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0xf5d52f1e, L:/10.5.0.2:8080 - R:/10.5.0.2:57551] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.666 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.666 DEBUG 12856 --- [reactor-http-nio-4] reactor.netty.channel.BootstrapHandlers  : [id: 0x1ff636dc, L:/10.5.0.2:8080 - R:/10.5.0.2:57560] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.666 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.666 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x1ff636dc, L:/10.5.0.2:8080 - R:/10.5.0.2:57560] Increasing pending responses, now 1
2019-07-08 09:27:14.666 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.666 DEBUG 12856 --- [reactor-http-nio-4] reactor.netty.http.server.HttpServer     : [id: 0x1ff636dc, L:/10.5.0.2:8080 - R:/10.5.0.2:57560] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.666 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [c2d53276] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.666 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0xcb356b19, L:/10.5.0.2:8080 - R:/10.5.0.2:57561] New http connection, requesting read
2019-07-08 09:27:14.677 DEBUG 12856 --- [reactor-http-nio-4] o.s.w.s.adapter.HttpWebHandlerAdapter    : [1ff636dc] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.677 DEBUG 12856 --- [reactor-http-nio-5] reactor.netty.channel.BootstrapHandlers  : [id: 0xcb356b19, L:/10.5.0.2:8080 - R:/10.5.0.2:57561] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.677 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xc2d53276, L:/10.5.0.2:8080 - R:/10.5.0.2:57552] Last HTTP response frame
2019-07-08 09:27:14.677 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.678 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.677 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xc2d53276, L:/10.5.0.2:8080 - R:/10.5.0.2:57552] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.677 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0xcb356b19, L:/10.5.0.2:8080 - R:/10.5.0.2:57561] Increasing pending responses, now 1
2019-07-08 09:27:14.678 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : [1ff636dc] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.678 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.678 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0xc2d53276, L:/10.5.0.2:8080 - R:/10.5.0.2:57552] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.678 DEBUG 12856 --- [reactor-http-nio-5] reactor.netty.http.server.HttpServer     : [id: 0xcb356b19, L:/10.5.0.2:8080 - R:/10.5.0.2:57561] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.678 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.678 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.678 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.678 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0xc2d53276, L:/10.5.0.2:8080 - R:/10.5.0.2:57552] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.678 DEBUG 12856 --- [reactor-http-nio-5] o.s.w.s.adapter.HttpWebHandlerAdapter    : [cb356b19] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.678 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.678 DEBUG 12856 --- [reactor-http-nio-4] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.678 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [f60e4cd0] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.678 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.678 DEBUG 12856 --- [reactor-http-nio-4] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.678 DEBUG 12856 --- [reactor-http-nio-4] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.678 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xf60e4cd0, L:/10.5.0.2:8080 - R:/10.5.0.2:57553] Last HTTP response frame
2019-07-08 09:27:14.678 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.678 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : [cb356b19] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.678 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xf60e4cd0, L:/10.5.0.2:8080 - R:/10.5.0.2:57553] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.678 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x3cae6858, L:/10.5.0.2:8080 - R:/10.5.0.2:57562] New http connection, requesting read
2019-07-08 09:27:14.678 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0xf60e4cd0, L:/10.5.0.2:8080 - R:/10.5.0.2:57553] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.678 DEBUG 12856 --- [reactor-http-nio-6] reactor.netty.channel.BootstrapHandlers  : [id: 0x3cae6858, L:/10.5.0.2:8080 - R:/10.5.0.2:57562] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.678 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.678 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.679 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0xf60e4cd0, L:/10.5.0.2:8080 - R:/10.5.0.2:57553] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.679 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x3cae6858, L:/10.5.0.2:8080 - R:/10.5.0.2:57562] Increasing pending responses, now 1
2019-07-08 09:27:14.679 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.679 DEBUG 12856 --- [reactor-http-nio-5] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.679 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.679 DEBUG 12856 --- [reactor-http-nio-6] reactor.netty.http.server.HttpServer     : [id: 0x3cae6858, L:/10.5.0.2:8080 - R:/10.5.0.2:57562] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.679 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.679 DEBUG 12856 --- [reactor-http-nio-6] o.s.w.s.adapter.HttpWebHandlerAdapter    : [3cae6858] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.679 DEBUG 12856 --- [reactor-http-nio-5] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.679 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.679 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.679 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.679 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.679 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0xb92581fa, L:/10.5.0.2:8080 - R:/10.5.0.2:57563] New http connection, requesting read
2019-07-08 09:27:14.679 DEBUG 12856 --- [reactor-http-nio-5] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.679 DEBUG 12856 --- [reactor-http-nio-7] reactor.netty.channel.BootstrapHandlers  : [id: 0xb92581fa, L:/10.5.0.2:8080 - R:/10.5.0.2:57563] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.679 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.679 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0xb92581fa, L:/10.5.0.2:8080 - R:/10.5.0.2:57563] Increasing pending responses, now 1
2019-07-08 09:27:14.679 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : [3cae6858] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.679 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.679 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.679 DEBUG 12856 --- [reactor-http-nio-7] reactor.netty.http.server.HttpServer     : [id: 0xb92581fa, L:/10.5.0.2:8080 - R:/10.5.0.2:57563] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.679 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 48 bytes, 8 commands in the stack
2019-07-08 09:27:14.680 DEBUG 12856 --- [reactor-http-nio-7] o.s.w.s.adapter.HttpWebHandlerAdapter    : [b92581fa] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.680 DEBUG 12856 --- [reactor-http-nio-6] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.680 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.680 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.680 DEBUG 12856 --- [reactor-http-nio-6] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.680 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.680 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : [b92581fa] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.680 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.680 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.680 DEBUG 12856 --- [reactor-http-nio-6] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.680 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.680 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.680 DEBUG 12856 --- [reactor-http-nio-7] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.680 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [7c13805a] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.680 DEBUG 12856 --- [reactor-http-nio-7] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.680 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x7c13805a, L:/10.5.0.2:8080 - R:/10.5.0.2:57554] Last HTTP response frame
2019-07-08 09:27:14.680 DEBUG 12856 --- [reactor-http-nio-7] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.680 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x7c13805a, L:/10.5.0.2:8080 - R:/10.5.0.2:57554] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.681 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.681 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.681 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.681 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.681 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x7c13805a, L:/10.5.0.2:8080 - R:/10.5.0.2:57554] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.681 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [cade911a] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.681 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xcade911a, L:/10.5.0.2:8080 - R:/10.5.0.2:57555] Last HTTP response frame
2019-07-08 09:27:14.681 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xcade911a, L:/10.5.0.2:8080 - R:/10.5.0.2:57555] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.681 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x7c13805a, L:/10.5.0.2:8080 - R:/10.5.0.2:57554] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.681 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0xcade911a, L:/10.5.0.2:8080 - R:/10.5.0.2:57555] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.681 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.681 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.681 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0xcade911a, L:/10.5.0.2:8080 - R:/10.5.0.2:57555] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.681 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.681 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.681 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0xadb2deb0, L:/10.5.0.2:8080 - R:/10.5.0.2:57564] New http connection, requesting read
2019-07-08 09:27:14.681 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [d0d515db] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.681 DEBUG 12856 --- [reactor-http-nio-8] reactor.netty.channel.BootstrapHandlers  : [id: 0xadb2deb0, L:/10.5.0.2:8080 - R:/10.5.0.2:57564] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.681 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xd0d515db, L:/10.5.0.2:8080 - R:/10.5.0.2:57556] Last HTTP response frame
2019-07-08 09:27:14.681 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0xadb2deb0, L:/10.5.0.2:8080 - R:/10.5.0.2:57564] Increasing pending responses, now 1
2019-07-08 09:27:14.681 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xd0d515db, L:/10.5.0.2:8080 - R:/10.5.0.2:57556] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.681 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x27177030, L:/10.5.0.2:8080 - R:/10.5.0.2:57565] New http connection, requesting read
2019-07-08 09:27:14.681 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0xd0d515db, L:/10.5.0.2:8080 - R:/10.5.0.2:57556] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.681 DEBUG 12856 --- [reactor-http-nio-8] reactor.netty.http.server.HttpServer     : [id: 0xadb2deb0, L:/10.5.0.2:8080 - R:/10.5.0.2:57564] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.681 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0xd0d515db, L:/10.5.0.2:8080 - R:/10.5.0.2:57556] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.681 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.681 DEBUG 12856 --- [reactor-http-nio-9] reactor.netty.channel.BootstrapHandlers  : [id: 0x27177030, L:/10.5.0.2:8080 - R:/10.5.0.2:57565] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.681 DEBUG 12856 --- [reactor-http-nio-8] o.s.w.s.adapter.HttpWebHandlerAdapter    : [adb2deb0] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.681 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.682 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x27177030, L:/10.5.0.2:8080 - R:/10.5.0.2:57565] Increasing pending responses, now 1
2019-07-08 09:27:14.682 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.682 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x7b130046, L:/10.5.0.2:8080 - R:/10.5.0.2:57566] New http connection, requesting read
2019-07-08 09:27:14.682 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.682 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.682 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [21cefe39] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.682 DEBUG 12856 --- [reactor-http-nio-9] reactor.netty.http.server.HttpServer     : [id: 0x27177030, L:/10.5.0.2:8080 - R:/10.5.0.2:57565] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.682 DEBUG 12856 --- [reactor-http-nio-10] reactor.netty.channel.BootstrapHandlers  : [id: 0x7b130046, L:/10.5.0.2:8080 - R:/10.5.0.2:57566] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.682 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.682 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x21cefe39, L:/10.5.0.2:8080 - R:/10.5.0.2:57557] Last HTTP response frame
2019-07-08 09:27:14.682 DEBUG 12856 --- [reactor-http-nio-9] o.s.w.s.adapter.HttpWebHandlerAdapter    : [27177030] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.682 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x7b130046, L:/10.5.0.2:8080 - R:/10.5.0.2:57566] Increasing pending responses, now 1
2019-07-08 09:27:14.682 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : [adb2deb0] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.682 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x21cefe39, L:/10.5.0.2:8080 - R:/10.5.0.2:57557] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.682 DEBUG 12856 --- [reactor-http-nio-10] reactor.netty.http.server.HttpServer     : [id: 0x7b130046, L:/10.5.0.2:8080 - R:/10.5.0.2:57566] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.682 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.682 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.682 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.682 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x21cefe39, L:/10.5.0.2:8080 - R:/10.5.0.2:57557] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.682 DEBUG 12856 --- [reactor-http-nio-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [7b130046] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.682 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.682 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.682 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x21cefe39, L:/10.5.0.2:8080 - R:/10.5.0.2:57557] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.682 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.682 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.682 DEBUG 12856 --- [reactor-http-nio-8] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.682 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.683 DEBUG 12856 --- [reactor-http-nio-8] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.682 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : [27177030] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.683 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x156aaf78, L:/10.5.0.2:8080 - R:/10.5.0.2:57567] New http connection, requesting read
2019-07-08 09:27:14.682 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.683 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 48 bytes, 6 commands in the stack
2019-07-08 09:27:14.683 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : [7b130046] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.683 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.683 DEBUG 12856 --- [reactor-http-nio-8] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.683 DEBUG 12856 --- [reactor-http-nio-11] reactor.netty.channel.BootstrapHandlers  : [id: 0x156aaf78, L:/10.5.0.2:8080 - R:/10.5.0.2:57567] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.683 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.683 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.683 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.683 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x156aaf78, L:/10.5.0.2:8080 - R:/10.5.0.2:57567] Increasing pending responses, now 1
2019-07-08 09:27:14.683 DEBUG 12856 --- [reactor-http-nio-9] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.683 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.683 DEBUG 12856 --- [reactor-http-nio-10] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.683 DEBUG 12856 --- [reactor-http-nio-11] reactor.netty.http.server.HttpServer     : [id: 0x156aaf78, L:/10.5.0.2:8080 - R:/10.5.0.2:57567] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.683 DEBUG 12856 --- [reactor-http-nio-9] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.683 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.683 DEBUG 12856 --- [reactor-http-nio-10] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.683 DEBUG 12856 --- [reactor-http-nio-11] o.s.w.s.adapter.HttpWebHandlerAdapter    : [156aaf78] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.684 DEBUG 12856 --- [reactor-http-nio-10] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.683 DEBUG 12856 --- [reactor-http-nio-9] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.683 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [0b4007b9] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.684 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.684 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x0b4007b9, L:/10.5.0.2:8080 - R:/10.5.0.2:57559] Last HTTP response frame
2019-07-08 09:27:14.684 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.684 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x0b4007b9, L:/10.5.0.2:8080 - R:/10.5.0.2:57559] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.684 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : [156aaf78] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.684 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.684 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x0b4007b9, L:/10.5.0.2:8080 - R:/10.5.0.2:57559] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.684 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.684 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.684 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x0b4007b9, L:/10.5.0.2:8080 - R:/10.5.0.2:57559] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.684 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.684 DEBUG 12856 --- [reactor-http-nio-11] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.684 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.684 DEBUG 12856 --- [reactor-http-nio-11] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.684 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [214432b1] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.684 DEBUG 12856 --- [reactor-http-nio-11] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.684 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x214432b1, L:/10.5.0.2:8080 - R:/10.5.0.2:57558] Last HTTP response frame
2019-07-08 09:27:14.684 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0xb622ecc9, L:/10.5.0.2:8080 - R:/10.5.0.2:57568] New http connection, requesting read
2019-07-08 09:27:14.684 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x214432b1, L:/10.5.0.2:8080 - R:/10.5.0.2:57558] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.684 DEBUG 12856 --- [reactor-http-nio-12] reactor.netty.channel.BootstrapHandlers  : [id: 0xb622ecc9, L:/10.5.0.2:8080 - R:/10.5.0.2:57568] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.684 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 4 commands
2019-07-08 09:27:14.684 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x214432b1, L:/10.5.0.2:8080 - R:/10.5.0.2:57558] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.684 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.684 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0xb622ecc9, L:/10.5.0.2:8080 - R:/10.5.0.2:57568] Increasing pending responses, now 1
2019-07-08 09:27:14.684 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.684 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x214432b1, L:/10.5.0.2:8080 - R:/10.5.0.2:57558] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.684 DEBUG 12856 --- [reactor-http-nio-12] reactor.netty.http.server.HttpServer     : [id: 0xb622ecc9, L:/10.5.0.2:8080 - R:/10.5.0.2:57568] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.684 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.685 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [1ff636dc] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.685 DEBUG 12856 --- [reactor-http-nio-12] o.s.w.s.adapter.HttpWebHandlerAdapter    : [b622ecc9] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.685 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x1ff636dc, L:/10.5.0.2:8080 - R:/10.5.0.2:57560] Last HTTP response frame
2019-07-08 09:27:14.685 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0xbc3cef19, L:/10.5.0.2:8080 - R:/10.5.0.2:57569] New http connection, requesting read
2019-07-08 09:27:14.685 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x1ff636dc, L:/10.5.0.2:8080 - R:/10.5.0.2:57560] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.685 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.685 DEBUG 12856 --- [reactor-http-nio-13] reactor.netty.channel.BootstrapHandlers  : [id: 0xbc3cef19, L:/10.5.0.2:8080 - R:/10.5.0.2:57569] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.685 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 3 commands
2019-07-08 09:27:14.685 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x1ff636dc, L:/10.5.0.2:8080 - R:/10.5.0.2:57560] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.685 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.685 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0xbc3cef19, L:/10.5.0.2:8080 - R:/10.5.0.2:57569] Increasing pending responses, now 1
2019-07-08 09:27:14.685 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.685 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x1ff636dc, L:/10.5.0.2:8080 - R:/10.5.0.2:57560] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.685 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : [b622ecc9] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.685 DEBUG 12856 --- [reactor-http-nio-13] reactor.netty.http.server.HttpServer     : [id: 0xbc3cef19, L:/10.5.0.2:8080 - R:/10.5.0.2:57569] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.685 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.685 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.685 DEBUG 12856 --- [reactor-http-nio-13] o.s.w.s.adapter.HttpWebHandlerAdapter    : [bc3cef19] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.685 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.685 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x9be1bc16, L:/10.5.0.2:8080 - R:/10.5.0.2:57570] New http connection, requesting read
2019-07-08 09:27:14.685 DEBUG 12856 --- [reactor-http-nio-12] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.685 DEBUG 12856 --- [reactor-http-nio-14] reactor.netty.channel.BootstrapHandlers  : [id: 0x9be1bc16, L:/10.5.0.2:8080 - R:/10.5.0.2:57570] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.685 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.685 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [cb356b19] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.685 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.685 DEBUG 12856 --- [reactor-http-nio-12] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.685 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x9be1bc16, L:/10.5.0.2:8080 - R:/10.5.0.2:57570] Increasing pending responses, now 1
2019-07-08 09:27:14.685 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xcb356b19, L:/10.5.0.2:8080 - R:/10.5.0.2:57561] Last HTTP response frame
2019-07-08 09:27:14.685 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : [bc3cef19] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.685 DEBUG 12856 --- [reactor-http-nio-12] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.685 DEBUG 12856 --- [reactor-http-nio-14] reactor.netty.http.server.HttpServer     : [id: 0x9be1bc16, L:/10.5.0.2:8080 - R:/10.5.0.2:57570] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.685 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xcb356b19, L:/10.5.0.2:8080 - R:/10.5.0.2:57561] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.685 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.685 DEBUG 12856 --- [reactor-http-nio-14] o.s.w.s.adapter.HttpWebHandlerAdapter    : [9be1bc16] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.685 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.686 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.685 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0xcb356b19, L:/10.5.0.2:8080 - R:/10.5.0.2:57561] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.686 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.686 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.686 DEBUG 12856 --- [reactor-http-nio-13] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.686 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0xcb356b19, L:/10.5.0.2:8080 - R:/10.5.0.2:57561] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.686 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.686 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : [9be1bc16] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.686 DEBUG 12856 --- [reactor-http-nio-13] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.686 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.686 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.686 DEBUG 12856 --- [reactor-http-nio-13] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.686 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x5901f32c, L:/10.5.0.2:8080 - R:/10.5.0.2:57571] New http connection, requesting read
2019-07-08 09:27:14.686 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.686 DEBUG 12856 --- [reactor-http-nio-14] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.686 DEBUG 12856 --- [reactor-http-nio-15] reactor.netty.channel.BootstrapHandlers  : [id: 0x5901f32c, L:/10.5.0.2:8080 - R:/10.5.0.2:57571] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.686 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.686 DEBUG 12856 --- [reactor-http-nio-14] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.686 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x5901f32c, L:/10.5.0.2:8080 - R:/10.5.0.2:57571] Increasing pending responses, now 1
2019-07-08 09:27:14.687 DEBUG 12856 --- [reactor-http-nio-14] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.686 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.687 DEBUG 12856 --- [reactor-http-nio-15] reactor.netty.http.server.HttpServer     : [id: 0x5901f32c, L:/10.5.0.2:8080 - R:/10.5.0.2:57571] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.687 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.687 DEBUG 12856 --- [reactor-http-nio-15] o.s.w.s.adapter.HttpWebHandlerAdapter    : [5901f32c] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.687 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.687 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.687 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.687 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.687 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.687 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : [5901f32c] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.687 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.687 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.687 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.687 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.687 DEBUG 12856 --- [reactor-http-nio-15] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.687 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 24 bytes, 9 commands in the stack
2019-07-08 09:27:14.687 DEBUG 12856 --- [reactor-http-nio-15] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.687 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 9 commands
2019-07-08 09:27:14.687 DEBUG 12856 --- [reactor-http-nio-15] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.687 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.687 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.687 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.687 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [3cae6858] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.698 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x3cae6858, L:/10.5.0.2:8080 - R:/10.5.0.2:57562] Last HTTP response frame
2019-07-08 09:27:14.698 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x3cae6858, L:/10.5.0.2:8080 - R:/10.5.0.2:57562] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.698 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.698 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x3cae6858, L:/10.5.0.2:8080 - R:/10.5.0.2:57562] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.698 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.698 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x3cae6858, L:/10.5.0.2:8080 - R:/10.5.0.2:57562] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.698 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.699 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.699 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [b92581fa] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.699 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xb92581fa, L:/10.5.0.2:8080 - R:/10.5.0.2:57563] Last HTTP response frame
2019-07-08 09:27:14.699 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xb92581fa, L:/10.5.0.2:8080 - R:/10.5.0.2:57563] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.699 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.699 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0xb92581fa, L:/10.5.0.2:8080 - R:/10.5.0.2:57563] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.699 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.699 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0xf74268ca, L:/10.5.0.2:8080 - R:/10.5.0.2:57572] New http connection, requesting read
2019-07-08 09:27:14.699 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0xb92581fa, L:/10.5.0.2:8080 - R:/10.5.0.2:57563] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.699 DEBUG 12856 --- [reactor-http-nio-16] reactor.netty.channel.BootstrapHandlers  : [id: 0xf74268ca, L:/10.5.0.2:8080 - R:/10.5.0.2:57572] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.699 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 64 bytes, 8 commands in the stack
2019-07-08 09:27:14.699 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0xf74268ca, L:/10.5.0.2:8080 - R:/10.5.0.2:57572] Increasing pending responses, now 1
2019-07-08 09:27:14.699 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.699 DEBUG 12856 --- [reactor-http-nio-16] reactor.netty.http.server.HttpServer     : [id: 0xf74268ca, L:/10.5.0.2:8080 - R:/10.5.0.2:57572] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.699 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x8bb32d9f, L:/10.5.0.2:8080 - R:/10.5.0.2:57573] New http connection, requesting read
2019-07-08 09:27:14.699 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.699 DEBUG 12856 --- [reactor-http-nio-16] o.s.w.s.adapter.HttpWebHandlerAdapter    : [f74268ca] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.699 DEBUG 12856 --- [reactor-http-nio-1] reactor.netty.channel.BootstrapHandlers  : [id: 0x8bb32d9f, L:/10.5.0.2:8080 - R:/10.5.0.2:57573] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.699 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.699 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.699 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x8bb32d9f, L:/10.5.0.2:8080 - R:/10.5.0.2:57573] Increasing pending responses, now 1
2019-07-08 09:27:14.699 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.699 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.699 DEBUG 12856 --- [reactor-http-nio-1] reactor.netty.http.server.HttpServer     : [id: 0x8bb32d9f, L:/10.5.0.2:8080 - R:/10.5.0.2:57573] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.699 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [adb2deb0] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.700 DEBUG 12856 --- [reactor-http-nio-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [8bb32d9f] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.700 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : [f74268ca] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.700 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xadb2deb0, L:/10.5.0.2:8080 - R:/10.5.0.2:57564] Last HTTP response frame
2019-07-08 09:27:14.700 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.700 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xadb2deb0, L:/10.5.0.2:8080 - R:/10.5.0.2:57564] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.700 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.700 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.700 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.700 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0xadb2deb0, L:/10.5.0.2:8080 - R:/10.5.0.2:57564] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.700 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : [8bb32d9f] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.700 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.700 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.700 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0xadb2deb0, L:/10.5.0.2:8080 - R:/10.5.0.2:57564] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.700 DEBUG 12856 --- [reactor-http-nio-16] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.700 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.701 DEBUG 12856 --- [reactor-http-nio-1] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.701 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.701 DEBUG 12856 --- [reactor-http-nio-16] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.701 DEBUG 12856 --- [reactor-http-nio-1] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.701 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [27177030] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.701 DEBUG 12856 --- [reactor-http-nio-1] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.701 DEBUG 12856 --- [reactor-http-nio-16] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.701 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x27177030, L:/10.5.0.2:8080 - R:/10.5.0.2:57565] Last HTTP response frame
2019-07-08 09:27:14.701 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x27177030, L:/10.5.0.2:8080 - R:/10.5.0.2:57565] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.701 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x4bd4e3d8, L:/10.5.0.2:8080 - R:/10.5.0.2:57574] New http connection, requesting read
2019-07-08 09:27:14.701 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.701 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x27177030, L:/10.5.0.2:8080 - R:/10.5.0.2:57565] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.701 DEBUG 12856 --- [reactor-http-nio-2] reactor.netty.channel.BootstrapHandlers  : [id: 0x4bd4e3d8, L:/10.5.0.2:8080 - R:/10.5.0.2:57574] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.701 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.701 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x27177030, L:/10.5.0.2:8080 - R:/10.5.0.2:57565] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.701 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x4bd4e3d8, L:/10.5.0.2:8080 - R:/10.5.0.2:57574] Increasing pending responses, now 1
2019-07-08 09:27:14.701 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.701 DEBUG 12856 --- [reactor-http-nio-2] reactor.netty.http.server.HttpServer     : [id: 0x4bd4e3d8, L:/10.5.0.2:8080 - R:/10.5.0.2:57574] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.701 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.701 DEBUG 12856 --- [reactor-http-nio-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [4bd4e3d8] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.701 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [7b130046] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.701 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x9cfd970a, L:/10.5.0.2:8080 - R:/10.5.0.2:57575] New http connection, requesting read
2019-07-08 09:27:14.701 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.701 DEBUG 12856 --- [reactor-http-nio-3] reactor.netty.channel.BootstrapHandlers  : [id: 0x9cfd970a, L:/10.5.0.2:8080 - R:/10.5.0.2:57575] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.701 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x7b130046, L:/10.5.0.2:8080 - R:/10.5.0.2:57566] Last HTTP response frame
2019-07-08 09:27:14.701 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.702 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x9cfd970a, L:/10.5.0.2:8080 - R:/10.5.0.2:57575] Increasing pending responses, now 1
2019-07-08 09:27:14.702 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x7b130046, L:/10.5.0.2:8080 - R:/10.5.0.2:57566] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.702 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : [4bd4e3d8] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.702 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x7b130046, L:/10.5.0.2:8080 - R:/10.5.0.2:57566] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.702 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.702 DEBUG 12856 --- [reactor-http-nio-3] reactor.netty.http.server.HttpServer     : [id: 0x9cfd970a, L:/10.5.0.2:8080 - R:/10.5.0.2:57575] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.702 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.702 DEBUG 12856 --- [reactor-http-nio-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [9cfd970a] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.702 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.702 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.702 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x7b130046, L:/10.5.0.2:8080 - R:/10.5.0.2:57566] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.702 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.702 DEBUG 12856 --- [reactor-http-nio-2] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.702 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.702 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.702 DEBUG 12856 --- [reactor-http-nio-2] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.702 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : [9cfd970a] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.702 DEBUG 12856 --- [reactor-http-nio-2] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.702 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.702 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0xdda5c202, L:/10.5.0.2:8080 - R:/10.5.0.2:57576] New http connection, requesting read
2019-07-08 09:27:14.702 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [156aaf78] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.703 DEBUG 12856 --- [reactor-http-nio-4] reactor.netty.channel.BootstrapHandlers  : [id: 0xdda5c202, L:/10.5.0.2:8080 - R:/10.5.0.2:57576] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.703 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x156aaf78, L:/10.5.0.2:8080 - R:/10.5.0.2:57567] Last HTTP response frame
2019-07-08 09:27:14.703 DEBUG 12856 --- [reactor-http-nio-3] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.703 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0xdda5c202, L:/10.5.0.2:8080 - R:/10.5.0.2:57576] Increasing pending responses, now 1
2019-07-08 09:27:14.703 DEBUG 12856 --- [reactor-http-nio-3] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.703 DEBUG 12856 --- [reactor-http-nio-4] reactor.netty.http.server.HttpServer     : [id: 0xdda5c202, L:/10.5.0.2:8080 - R:/10.5.0.2:57576] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.703 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x156aaf78, L:/10.5.0.2:8080 - R:/10.5.0.2:57567] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.703 DEBUG 12856 --- [reactor-http-nio-3] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.703 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x156aaf78, L:/10.5.0.2:8080 - R:/10.5.0.2:57567] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.703 DEBUG 12856 --- [reactor-http-nio-4] o.s.w.s.adapter.HttpWebHandlerAdapter    : [dda5c202] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.703 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 4 commands
2019-07-08 09:27:14.703 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x156aaf78, L:/10.5.0.2:8080 - R:/10.5.0.2:57567] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.703 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.703 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.703 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.703 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.703 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x1e89869c, L:/10.5.0.2:8080 - R:/10.5.0.2:57577] New http connection, requesting read
2019-07-08 09:27:14.704 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.704 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : [dda5c202] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.704 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [b622ecc9] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.704 DEBUG 12856 --- [reactor-http-nio-5] reactor.netty.channel.BootstrapHandlers  : [id: 0x1e89869c, L:/10.5.0.2:8080 - R:/10.5.0.2:57577] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.704 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.704 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xb622ecc9, L:/10.5.0.2:8080 - R:/10.5.0.2:57568] Last HTTP response frame
2019-07-08 09:27:14.704 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x1e89869c, L:/10.5.0.2:8080 - R:/10.5.0.2:57577] Increasing pending responses, now 1
2019-07-08 09:27:14.704 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xb622ecc9, L:/10.5.0.2:8080 - R:/10.5.0.2:57568] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.704 DEBUG 12856 --- [reactor-http-nio-5] reactor.netty.http.server.HttpServer     : [id: 0x1e89869c, L:/10.5.0.2:8080 - R:/10.5.0.2:57577] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.704 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0xb622ecc9, L:/10.5.0.2:8080 - R:/10.5.0.2:57568] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.704 DEBUG 12856 --- [reactor-http-nio-4] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.704 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 3 commands
2019-07-08 09:27:14.704 DEBUG 12856 --- [reactor-http-nio-5] o.s.w.s.adapter.HttpWebHandlerAdapter    : [1e89869c] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.704 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0xb622ecc9, L:/10.5.0.2:8080 - R:/10.5.0.2:57568] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.704 DEBUG 12856 --- [reactor-http-nio-4] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.704 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.705 DEBUG 12856 --- [reactor-http-nio-4] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.705 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: false
2019-07-08 09:27:14.704 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.705 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 32 bytes, 3 commands in the stack
2019-07-08 09:27:14.705 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.705 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x6d385d26, L:/10.5.0.2:8080 - R:/10.5.0.2:57578] New http connection, requesting read
2019-07-08 09:27:14.705 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 3 commands
2019-07-08 09:27:14.705 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : [1e89869c] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.705 DEBUG 12856 --- [reactor-http-nio-6] reactor.netty.channel.BootstrapHandlers  : [id: 0x6d385d26, L:/10.5.0.2:8080 - R:/10.5.0.2:57578] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.705 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.705 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.705 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x6d385d26, L:/10.5.0.2:8080 - R:/10.5.0.2:57578] Increasing pending responses, now 1
2019-07-08 09:27:14.705 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.705 DEBUG 12856 --- [reactor-http-nio-6] reactor.netty.http.server.HttpServer     : [id: 0x6d385d26, L:/10.5.0.2:8080 - R:/10.5.0.2:57578] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.705 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.705 DEBUG 12856 --- [reactor-http-nio-5] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.705 DEBUG 12856 --- [reactor-http-nio-6] o.s.w.s.adapter.HttpWebHandlerAdapter    : [6d385d26] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.705 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [bc3cef19] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.705 DEBUG 12856 --- [reactor-http-nio-5] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.705 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.705 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xbc3cef19, L:/10.5.0.2:8080 - R:/10.5.0.2:57569] Last HTTP response frame
2019-07-08 09:27:14.705 DEBUG 12856 --- [reactor-http-nio-5] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.706 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.706 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xbc3cef19, L:/10.5.0.2:8080 - R:/10.5.0.2:57569] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.706 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : [6d385d26] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.706 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 2 commands
2019-07-08 09:27:14.706 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0xbc3cef19, L:/10.5.0.2:8080 - R:/10.5.0.2:57569] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.706 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.706 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.706 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0xbc3cef19, L:/10.5.0.2:8080 - R:/10.5.0.2:57569] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.707 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.707 DEBUG 12856 --- [reactor-http-nio-6] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.707 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.707 DEBUG 12856 --- [reactor-http-nio-6] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.707 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [9be1bc16] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.707 DEBUG 12856 --- [reactor-http-nio-6] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.707 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x9be1bc16, L:/10.5.0.2:8080 - R:/10.5.0.2:57570] Last HTTP response frame
2019-07-08 09:27:14.707 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x9be1bc16, L:/10.5.0.2:8080 - R:/10.5.0.2:57570] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.707 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x2c13d514, L:/10.5.0.2:8080 - R:/10.5.0.2:57579] New http connection, requesting read
2019-07-08 09:27:14.707 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 1 commands
2019-07-08 09:27:14.707 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x9be1bc16, L:/10.5.0.2:8080 - R:/10.5.0.2:57570] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.707 DEBUG 12856 --- [reactor-http-nio-7] reactor.netty.channel.BootstrapHandlers  : [id: 0x2c13d514, L:/10.5.0.2:8080 - R:/10.5.0.2:57579] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.707 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.707 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x2c13d514, L:/10.5.0.2:8080 - R:/10.5.0.2:57579] Increasing pending responses, now 1
2019-07-08 09:27:14.707 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x9be1bc16, L:/10.5.0.2:8080 - R:/10.5.0.2:57570] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.708 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.708 DEBUG 12856 --- [reactor-http-nio-7] reactor.netty.http.server.HttpServer     : [id: 0x2c13d514, L:/10.5.0.2:8080 - R:/10.5.0.2:57579] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.708 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.708 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [5901f32c] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.708 DEBUG 12856 --- [reactor-http-nio-7] o.s.w.s.adapter.HttpWebHandlerAdapter    : [2c13d514] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.708 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x5901f32c, L:/10.5.0.2:8080 - R:/10.5.0.2:57571] Last HTTP response frame
2019-07-08 09:27:14.708 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.708 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x5901f32c, L:/10.5.0.2:8080 - R:/10.5.0.2:57571] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.708 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x76d523f2, L:/10.5.0.2:8080 - R:/10.5.0.2:57580] New http connection, requesting read
2019-07-08 09:27:14.708 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.708 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x5901f32c, L:/10.5.0.2:8080 - R:/10.5.0.2:57571] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.708 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.708 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x5901f32c, L:/10.5.0.2:8080 - R:/10.5.0.2:57571] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.708 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.708 DEBUG 12856 --- [reactor-http-nio-8] reactor.netty.channel.BootstrapHandlers  : [id: 0x76d523f2, L:/10.5.0.2:8080 - R:/10.5.0.2:57580] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.708 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x560a94f7, L:/10.5.0.2:8080 - R:/10.5.0.2:57581] New http connection, requesting read
2019-07-08 09:27:14.708 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.708 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : [2c13d514] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.709 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x76d523f2, L:/10.5.0.2:8080 - R:/10.5.0.2:57580] Increasing pending responses, now 1
2019-07-08 09:27:14.709 DEBUG 12856 --- [reactor-http-nio-9] reactor.netty.channel.BootstrapHandlers  : [id: 0x560a94f7, L:/10.5.0.2:8080 - R:/10.5.0.2:57581] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.709 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.709 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.709 DEBUG 12856 --- [reactor-http-nio-8] reactor.netty.http.server.HttpServer     : [id: 0x76d523f2, L:/10.5.0.2:8080 - R:/10.5.0.2:57580] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.709 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x560a94f7, L:/10.5.0.2:8080 - R:/10.5.0.2:57581] Increasing pending responses, now 1
2019-07-08 09:27:14.709 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.709 DEBUG 12856 --- [reactor-http-nio-8] o.s.w.s.adapter.HttpWebHandlerAdapter    : [76d523f2] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.709 DEBUG 12856 --- [reactor-http-nio-9] reactor.netty.http.server.HttpServer     : [id: 0x560a94f7, L:/10.5.0.2:8080 - R:/10.5.0.2:57581] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.709 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.709 DEBUG 12856 --- [reactor-http-nio-7] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.709 DEBUG 12856 --- [reactor-http-nio-9] o.s.w.s.adapter.HttpWebHandlerAdapter    : [560a94f7] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.710 DEBUG 12856 --- [reactor-http-nio-7] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.709 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.710 DEBUG 12856 --- [reactor-http-nio-7] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.710 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.710 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.710 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.710 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.710 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.710 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : [76d523f2] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.710 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.710 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : [560a94f7] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.710 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.710 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.710 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.711 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.711 DEBUG 12856 --- [reactor-http-nio-8] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.711 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.711 DEBUG 12856 --- [reactor-http-nio-8] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.711 DEBUG 12856 --- [reactor-http-nio-9] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.711 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.711 DEBUG 12856 --- [reactor-http-nio-8] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.711 DEBUG 12856 --- [reactor-http-nio-9] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.711 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.712 DEBUG 12856 --- [reactor-http-nio-9] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.712 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.712 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.712 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.712 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.712 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.712 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.712 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 12 bytes, 10 commands in the stack
2019-07-08 09:27:14.712 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 10 commands
2019-07-08 09:27:14.712 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.712 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.712 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.712 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [f74268ca] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.712 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xf74268ca, L:/10.5.0.2:8080 - R:/10.5.0.2:57572] Last HTTP response frame
2019-07-08 09:27:14.713 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xf74268ca, L:/10.5.0.2:8080 - R:/10.5.0.2:57572] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.713 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 24 bytes, 9 commands in the stack
2019-07-08 09:27:14.713 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0xf74268ca, L:/10.5.0.2:8080 - R:/10.5.0.2:57572] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.713 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 9 commands
2019-07-08 09:27:14.713 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.713 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0xf74268ca, L:/10.5.0.2:8080 - R:/10.5.0.2:57572] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.713 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.713 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.713 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [8bb32d9f] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.713 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x8bb32d9f, L:/10.5.0.2:8080 - R:/10.5.0.2:57573] Last HTTP response frame
2019-07-08 09:27:14.713 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x8bb32d9f, L:/10.5.0.2:8080 - R:/10.5.0.2:57573] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.713 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.713 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.713 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x8bb32d9f, L:/10.5.0.2:8080 - R:/10.5.0.2:57573] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.713 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x84ff8d67, L:/10.5.0.2:8080 - R:/10.5.0.2:57582] New http connection, requesting read
2019-07-08 09:27:14.713 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x8bb32d9f, L:/10.5.0.2:8080 - R:/10.5.0.2:57573] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.713 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.713 DEBUG 12856 --- [reactor-http-nio-10] reactor.netty.channel.BootstrapHandlers  : [id: 0x84ff8d67, L:/10.5.0.2:8080 - R:/10.5.0.2:57582] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.713 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.714 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x84ff8d67, L:/10.5.0.2:8080 - R:/10.5.0.2:57582] Increasing pending responses, now 1
2019-07-08 09:27:14.714 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x72c183b0, L:/10.5.0.2:8080 - R:/10.5.0.2:57583] New http connection, requesting read
2019-07-08 09:27:14.714 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [4bd4e3d8] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.714 DEBUG 12856 --- [reactor-http-nio-10] reactor.netty.http.server.HttpServer     : [id: 0x84ff8d67, L:/10.5.0.2:8080 - R:/10.5.0.2:57582] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.714 DEBUG 12856 --- [reactor-http-nio-11] reactor.netty.channel.BootstrapHandlers  : [id: 0x72c183b0, L:/10.5.0.2:8080 - R:/10.5.0.2:57583] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.714 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x4bd4e3d8, L:/10.5.0.2:8080 - R:/10.5.0.2:57574] Last HTTP response frame
2019-07-08 09:27:14.714 DEBUG 12856 --- [reactor-http-nio-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [84ff8d67] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.714 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x4bd4e3d8, L:/10.5.0.2:8080 - R:/10.5.0.2:57574] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.714 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x72c183b0, L:/10.5.0.2:8080 - R:/10.5.0.2:57583] Increasing pending responses, now 1
2019-07-08 09:27:14.714 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.714 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x4bd4e3d8, L:/10.5.0.2:8080 - R:/10.5.0.2:57574] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.714 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 24 bytes, 7 commands in the stack
2019-07-08 09:27:14.714 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x4bd4e3d8, L:/10.5.0.2:8080 - R:/10.5.0.2:57574] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.714 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.714 DEBUG 12856 --- [reactor-http-nio-11] reactor.netty.http.server.HttpServer     : [id: 0x72c183b0, L:/10.5.0.2:8080 - R:/10.5.0.2:57583] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.714 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.714 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.714 DEBUG 12856 --- [reactor-http-nio-11] o.s.w.s.adapter.HttpWebHandlerAdapter    : [72c183b0] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.714 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.714 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x0e180156, L:/10.5.0.2:8080 - R:/10.5.0.2:57584] New http connection, requesting read
2019-07-08 09:27:14.715 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.714 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : [84ff8d67] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.715 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.715 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.715 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [9cfd970a] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.715 DEBUG 12856 --- [reactor-http-nio-12] reactor.netty.channel.BootstrapHandlers  : [id: 0x0e180156, L:/10.5.0.2:8080 - R:/10.5.0.2:57584] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.715 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.715 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : [72c183b0] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.715 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x9cfd970a, L:/10.5.0.2:8080 - R:/10.5.0.2:57575] Last HTTP response frame
2019-07-08 09:27:14.715 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x0e180156, L:/10.5.0.2:8080 - R:/10.5.0.2:57584] Increasing pending responses, now 1
2019-07-08 09:27:14.715 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x9cfd970a, L:/10.5.0.2:8080 - R:/10.5.0.2:57575] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.715 DEBUG 12856 --- [reactor-http-nio-12] reactor.netty.http.server.HttpServer     : [id: 0x0e180156, L:/10.5.0.2:8080 - R:/10.5.0.2:57584] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.715 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x9cfd970a, L:/10.5.0.2:8080 - R:/10.5.0.2:57575] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.715 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.715 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.715 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.715 DEBUG 12856 --- [reactor-http-nio-10] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.715 DEBUG 12856 --- [reactor-http-nio-11] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.715 DEBUG 12856 --- [reactor-http-nio-12] o.s.w.s.adapter.HttpWebHandlerAdapter    : [0e180156] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.715 DEBUG 12856 --- [reactor-http-nio-11] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.715 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.715 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x9cfd970a, L:/10.5.0.2:8080 - R:/10.5.0.2:57575] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.715 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.715 DEBUG 12856 --- [reactor-http-nio-10] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.716 DEBUG 12856 --- [reactor-http-nio-11] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.716 DEBUG 12856 --- [reactor-http-nio-10] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.716 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.716 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x0573e69a, L:/10.5.0.2:8080 - R:/10.5.0.2:57585] New http connection, requesting read
2019-07-08 09:27:14.716 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.716 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : [0e180156] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.716 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.716 DEBUG 12856 --- [reactor-http-nio-13] reactor.netty.channel.BootstrapHandlers  : [id: 0x0573e69a, L:/10.5.0.2:8080 - R:/10.5.0.2:57585] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.716 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [dda5c202] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.716 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x0573e69a, L:/10.5.0.2:8080 - R:/10.5.0.2:57585] Increasing pending responses, now 1
2019-07-08 09:27:14.716 DEBUG 12856 --- [reactor-http-nio-12] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.716 DEBUG 12856 --- [reactor-http-nio-12] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.716 DEBUG 12856 --- [reactor-http-nio-12] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.716 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xdda5c202, L:/10.5.0.2:8080 - R:/10.5.0.2:57576] Last HTTP response frame
2019-07-08 09:27:14.716 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xdda5c202, L:/10.5.0.2:8080 - R:/10.5.0.2:57576] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.716 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.716 DEBUG 12856 --- [reactor-http-nio-13] reactor.netty.http.server.HttpServer     : [id: 0x0573e69a, L:/10.5.0.2:8080 - R:/10.5.0.2:57585] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.716 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.716 DEBUG 12856 --- [reactor-http-nio-13] o.s.w.s.adapter.HttpWebHandlerAdapter    : [0573e69a] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.716 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0xdda5c202, L:/10.5.0.2:8080 - R:/10.5.0.2:57576] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.716 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.716 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.716 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0xdda5c202, L:/10.5.0.2:8080 - R:/10.5.0.2:57576] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.716 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.716 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.717 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.717 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x480a66d5, L:/10.5.0.2:8080 - R:/10.5.0.2:57586] New http connection, requesting read
2019-07-08 09:27:14.717 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : [0573e69a] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.717 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.717 DEBUG 12856 --- [reactor-http-nio-14] reactor.netty.channel.BootstrapHandlers  : [id: 0x480a66d5, L:/10.5.0.2:8080 - R:/10.5.0.2:57586] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.717 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 60 bytes, 8 commands in the stack
2019-07-08 09:27:14.717 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.717 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x480a66d5, L:/10.5.0.2:8080 - R:/10.5.0.2:57586] Increasing pending responses, now 1
2019-07-08 09:27:14.717 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.717 DEBUG 12856 --- [reactor-http-nio-14] reactor.netty.http.server.HttpServer     : [id: 0x480a66d5, L:/10.5.0.2:8080 - R:/10.5.0.2:57586] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.717 DEBUG 12856 --- [reactor-http-nio-13] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.717 DEBUG 12856 --- [reactor-http-nio-13] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.717 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.717 DEBUG 12856 --- [reactor-http-nio-13] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.717 DEBUG 12856 --- [reactor-http-nio-14] o.s.w.s.adapter.HttpWebHandlerAdapter    : [480a66d5] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.717 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.717 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.717 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [1e89869c] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.717 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.717 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x1e89869c, L:/10.5.0.2:8080 - R:/10.5.0.2:57577] Last HTTP response frame
2019-07-08 09:27:14.717 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.717 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x1e89869c, L:/10.5.0.2:8080 - R:/10.5.0.2:57577] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.717 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : [480a66d5] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.718 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.718 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.718 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x1e89869c, L:/10.5.0.2:8080 - R:/10.5.0.2:57577] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.718 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.718 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x1e89869c, L:/10.5.0.2:8080 - R:/10.5.0.2:57577] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.718 DEBUG 12856 --- [reactor-http-nio-14] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.718 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.718 DEBUG 12856 --- [reactor-http-nio-14] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.718 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.718 DEBUG 12856 --- [reactor-http-nio-14] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.718 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [6d385d26] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.718 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0xafe7ffa6, L:/10.5.0.2:8080 - R:/10.5.0.2:57587] New http connection, requesting read
2019-07-08 09:27:14.718 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x6d385d26, L:/10.5.0.2:8080 - R:/10.5.0.2:57578] Last HTTP response frame
2019-07-08 09:27:14.718 DEBUG 12856 --- [reactor-http-nio-15] reactor.netty.channel.BootstrapHandlers  : [id: 0xafe7ffa6, L:/10.5.0.2:8080 - R:/10.5.0.2:57587] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.718 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x6d385d26, L:/10.5.0.2:8080 - R:/10.5.0.2:57578] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.718 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0xafe7ffa6, L:/10.5.0.2:8080 - R:/10.5.0.2:57587] Increasing pending responses, now 1
2019-07-08 09:27:14.718 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x6d385d26, L:/10.5.0.2:8080 - R:/10.5.0.2:57578] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.718 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.718 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.718 DEBUG 12856 --- [reactor-http-nio-15] reactor.netty.http.server.HttpServer     : [id: 0xafe7ffa6, L:/10.5.0.2:8080 - R:/10.5.0.2:57587] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.718 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0x6d385d26, L:/10.5.0.2:8080 - R:/10.5.0.2:57578] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.718 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.718 DEBUG 12856 --- [reactor-http-nio-15] o.s.w.s.adapter.HttpWebHandlerAdapter    : [afe7ffa6] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.718 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.718 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.718 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [2c13d514] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.719 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.719 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x2c13d514, L:/10.5.0.2:8080 - R:/10.5.0.2:57579] Last HTTP response frame
2019-07-08 09:27:14.719 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x2c13d514, L:/10.5.0.2:8080 - R:/10.5.0.2:57579] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.719 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0xa9b0ac82, L:/10.5.0.2:8080 - R:/10.5.0.2:57588] New http connection, requesting read
2019-07-08 09:27:14.719 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : [afe7ffa6] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.719 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.719 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x2c13d514, L:/10.5.0.2:8080 - R:/10.5.0.2:57579] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.719 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.719 DEBUG 12856 --- [reactor-http-nio-16] reactor.netty.channel.BootstrapHandlers  : [id: 0xa9b0ac82, L:/10.5.0.2:8080 - R:/10.5.0.2:57588] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.719 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.719 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x2c13d514, L:/10.5.0.2:8080 - R:/10.5.0.2:57579] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.719 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.719 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0xa9b0ac82, L:/10.5.0.2:8080 - R:/10.5.0.2:57588] Increasing pending responses, now 1
2019-07-08 09:27:14.719 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.719 DEBUG 12856 --- [reactor-http-nio-15] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.719 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [76d523f2] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.719 DEBUG 12856 --- [reactor-http-nio-16] reactor.netty.http.server.HttpServer     : [id: 0xa9b0ac82, L:/10.5.0.2:8080 - R:/10.5.0.2:57588] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.719 DEBUG 12856 --- [reactor-http-nio-15] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.719 DEBUG 12856 --- [reactor-http-nio-15] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.719 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x76d523f2, L:/10.5.0.2:8080 - R:/10.5.0.2:57580] Last HTTP response frame
2019-07-08 09:27:14.719 DEBUG 12856 --- [reactor-http-nio-16] o.s.w.s.adapter.HttpWebHandlerAdapter    : [a9b0ac82] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.719 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0xfb6ab690, L:/10.5.0.2:8080 - R:/10.5.0.2:57589] New http connection, requesting read
2019-07-08 09:27:14.719 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.719 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x76d523f2, L:/10.5.0.2:8080 - R:/10.5.0.2:57580] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.719 DEBUG 12856 --- [reactor-http-nio-1] reactor.netty.channel.BootstrapHandlers  : [id: 0xfb6ab690, L:/10.5.0.2:8080 - R:/10.5.0.2:57589] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.719 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.719 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 4 commands
2019-07-08 09:27:14.719 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.719 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x76d523f2, L:/10.5.0.2:8080 - R:/10.5.0.2:57580] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.719 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0xfb6ab690, L:/10.5.0.2:8080 - R:/10.5.0.2:57589] Increasing pending responses, now 1
2019-07-08 09:27:14.720 DEBUG 12856 --- [reactor-http-nio-1] reactor.netty.http.server.HttpServer     : [id: 0xfb6ab690, L:/10.5.0.2:8080 - R:/10.5.0.2:57589] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.719 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : [a9b0ac82] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.720 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.720 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0x76d523f2, L:/10.5.0.2:8080 - R:/10.5.0.2:57580] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.720 DEBUG 12856 --- [reactor-http-nio-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [fb6ab690] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.720 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.720 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.720 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.720 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [560a94f7] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.720 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.720 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x560a94f7, L:/10.5.0.2:8080 - R:/10.5.0.2:57581] Last HTTP response frame
2019-07-08 09:27:14.720 DEBUG 12856 --- [reactor-http-nio-16] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.720 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : [fb6ab690] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.720 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x560a94f7, L:/10.5.0.2:8080 - R:/10.5.0.2:57581] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.720 DEBUG 12856 --- [reactor-http-nio-16] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.720 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x560a94f7, L:/10.5.0.2:8080 - R:/10.5.0.2:57581] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.720 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.720 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.720 DEBUG 12856 --- [reactor-http-nio-16] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.720 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x560a94f7, L:/10.5.0.2:8080 - R:/10.5.0.2:57581] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.720 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.720 DEBUG 12856 --- [reactor-http-nio-1] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.720 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.720 DEBUG 12856 --- [reactor-http-nio-1] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.720 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.720 DEBUG 12856 --- [reactor-http-nio-1] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.720 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.721 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.721 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x6b1210f2, L:/10.5.0.2:8080 - R:/10.5.0.2:57590] New http connection, requesting read
2019-07-08 09:27:14.721 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.721 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x8cf7a1a6, L:/10.5.0.2:8080 - R:/10.5.0.2:57591] New http connection, requesting read
2019-07-08 09:27:14.721 DEBUG 12856 --- [reactor-http-nio-2] reactor.netty.channel.BootstrapHandlers  : [id: 0x6b1210f2, L:/10.5.0.2:8080 - R:/10.5.0.2:57590] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.721 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.721 DEBUG 12856 --- [reactor-http-nio-3] reactor.netty.channel.BootstrapHandlers  : [id: 0x8cf7a1a6, L:/10.5.0.2:8080 - R:/10.5.0.2:57591] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.721 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x6b1210f2, L:/10.5.0.2:8080 - R:/10.5.0.2:57590] Increasing pending responses, now 1
2019-07-08 09:27:14.721 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.721 DEBUG 12856 --- [reactor-http-nio-2] reactor.netty.http.server.HttpServer     : [id: 0x6b1210f2, L:/10.5.0.2:8080 - R:/10.5.0.2:57590] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.721 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x8cf7a1a6, L:/10.5.0.2:8080 - R:/10.5.0.2:57591] Increasing pending responses, now 1
2019-07-08 09:27:14.721 DEBUG 12856 --- [reactor-http-nio-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [6b1210f2] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.721 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.721 DEBUG 12856 --- [reactor-http-nio-3] reactor.netty.http.server.HttpServer     : [id: 0x8cf7a1a6, L:/10.5.0.2:8080 - R:/10.5.0.2:57591] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.721 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.721 DEBUG 12856 --- [reactor-http-nio-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [8cf7a1a6] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.721 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.721 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 36 bytes, 8 commands in the stack
2019-07-08 09:27:14.721 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : [6b1210f2] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.721 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.721 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.721 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.721 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.721 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.722 DEBUG 12856 --- [reactor-http-nio-2] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.722 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : [8cf7a1a6] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.722 DEBUG 12856 --- [reactor-http-nio-2] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.722 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.722 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.722 DEBUG 12856 --- [reactor-http-nio-2] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.722 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.722 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [72c183b0] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.722 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x72c183b0, L:/10.5.0.2:8080 - R:/10.5.0.2:57583] Last HTTP response frame
2019-07-08 09:27:14.722 DEBUG 12856 --- [reactor-http-nio-3] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.722 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x72c183b0, L:/10.5.0.2:8080 - R:/10.5.0.2:57583] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.722 DEBUG 12856 --- [reactor-http-nio-3] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.722 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.722 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x72c183b0, L:/10.5.0.2:8080 - R:/10.5.0.2:57583] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.722 DEBUG 12856 --- [reactor-http-nio-3] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.722 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.722 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x72c183b0, L:/10.5.0.2:8080 - R:/10.5.0.2:57583] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.722 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.722 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.722 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [84ff8d67] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.722 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x84ff8d67, L:/10.5.0.2:8080 - R:/10.5.0.2:57582] Last HTTP response frame
2019-07-08 09:27:14.722 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x84ff8d67, L:/10.5.0.2:8080 - R:/10.5.0.2:57582] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.722 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.722 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x84ff8d67, L:/10.5.0.2:8080 - R:/10.5.0.2:57582] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.722 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.722 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x84ff8d67, L:/10.5.0.2:8080 - R:/10.5.0.2:57582] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.722 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.722 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x5f51efe2, L:/10.5.0.2:8080 - R:/10.5.0.2:57592] New http connection, requesting read
2019-07-08 09:27:14.722 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.723 DEBUG 12856 --- [reactor-http-nio-4] reactor.netty.channel.BootstrapHandlers  : [id: 0x5f51efe2, L:/10.5.0.2:8080 - R:/10.5.0.2:57592] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.723 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [0e180156] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.723 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x425f6e20, L:/10.5.0.2:8080 - R:/10.5.0.2:57593] New http connection, requesting read
2019-07-08 09:27:14.723 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x0e180156, L:/10.5.0.2:8080 - R:/10.5.0.2:57584] Last HTTP response frame
2019-07-08 09:27:14.723 DEBUG 12856 --- [reactor-http-nio-5] reactor.netty.channel.BootstrapHandlers  : [id: 0x425f6e20, L:/10.5.0.2:8080 - R:/10.5.0.2:57593] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.723 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x5f51efe2, L:/10.5.0.2:8080 - R:/10.5.0.2:57592] Increasing pending responses, now 1
2019-07-08 09:27:14.723 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x0e180156, L:/10.5.0.2:8080 - R:/10.5.0.2:57584] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.723 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x425f6e20, L:/10.5.0.2:8080 - R:/10.5.0.2:57593] Increasing pending responses, now 1
2019-07-08 09:27:14.723 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.723 DEBUG 12856 --- [reactor-http-nio-4] reactor.netty.http.server.HttpServer     : [id: 0x5f51efe2, L:/10.5.0.2:8080 - R:/10.5.0.2:57592] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.723 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.723 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x0e180156, L:/10.5.0.2:8080 - R:/10.5.0.2:57584] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.723 DEBUG 12856 --- [reactor-http-nio-5] reactor.netty.http.server.HttpServer     : [id: 0x425f6e20, L:/10.5.0.2:8080 - R:/10.5.0.2:57593] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.723 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0x0e180156, L:/10.5.0.2:8080 - R:/10.5.0.2:57584] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.723 DEBUG 12856 --- [reactor-http-nio-4] o.s.w.s.adapter.HttpWebHandlerAdapter    : [5f51efe2] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.723 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.723 DEBUG 12856 --- [reactor-http-nio-5] o.s.w.s.adapter.HttpWebHandlerAdapter    : [425f6e20] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.723 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.723 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.723 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.723 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.723 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 60 bytes, 7 commands in the stack
2019-07-08 09:27:14.723 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0xdc5a9a6b, L:/10.5.0.2:8080 - R:/10.5.0.2:57594] New http connection, requesting read
2019-07-08 09:27:14.723 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.h.RoutePredicateHandlerMapping   : [5f51efe2] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.723 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.723 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.723 DEBUG 12856 --- [reactor-http-nio-6] reactor.netty.channel.BootstrapHandlers  : [id: 0xdc5a9a6b, L:/10.5.0.2:8080 - R:/10.5.0.2:57594] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.723 DEBUG 12856 --- [reactor-http-nio-4] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.723 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.h.RoutePredicateHandlerMapping   : [425f6e20] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.723 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.724 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0xdc5a9a6b, L:/10.5.0.2:8080 - R:/10.5.0.2:57594] Increasing pending responses, now 1
2019-07-08 09:27:14.724 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.724 DEBUG 12856 --- [reactor-http-nio-5] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.724 DEBUG 12856 --- [reactor-http-nio-6] reactor.netty.http.server.HttpServer     : [id: 0xdc5a9a6b, L:/10.5.0.2:8080 - R:/10.5.0.2:57594] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.724 DEBUG 12856 --- [reactor-http-nio-4] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.724 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.724 DEBUG 12856 --- [reactor-http-nio-6] o.s.w.s.adapter.HttpWebHandlerAdapter    : [dc5a9a6b] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.724 DEBUG 12856 --- [reactor-http-nio-4] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.724 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [0573e69a] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.724 DEBUG 12856 --- [reactor-http-nio-5] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.724 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.724 DEBUG 12856 --- [reactor-http-nio-4] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.724 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.724 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x0573e69a, L:/10.5.0.2:8080 - R:/10.5.0.2:57585] Last HTTP response frame
2019-07-08 09:27:14.724 DEBUG 12856 --- [reactor-http-nio-5] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.724 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x0573e69a, L:/10.5.0.2:8080 - R:/10.5.0.2:57585] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.724 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.h.RoutePredicateHandlerMapping   : [dc5a9a6b] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.724 DEBUG 12856 --- [reactor-http-nio-5] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.724 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x0573e69a, L:/10.5.0.2:8080 - R:/10.5.0.2:57585] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.724 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.724 DEBUG 12856 --- [reactor-http-nio-6] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.724 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0x0573e69a, L:/10.5.0.2:8080 - R:/10.5.0.2:57585] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.724 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.725 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.725 DEBUG 12856 --- [reactor-http-nio-6] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.725 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.725 DEBUG 12856 --- [reactor-http-nio-6] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.725 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [480a66d5] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.725 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x0b85b255, L:/10.5.0.2:8080 - R:/10.5.0.2:57595] New http connection, requesting read
2019-07-08 09:27:14.725 DEBUG 12856 --- [reactor-http-nio-6] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.725 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x480a66d5, L:/10.5.0.2:8080 - R:/10.5.0.2:57586] Last HTTP response frame
2019-07-08 09:27:14.725 DEBUG 12856 --- [reactor-http-nio-7] reactor.netty.channel.BootstrapHandlers  : [id: 0x0b85b255, L:/10.5.0.2:8080 - R:/10.5.0.2:57595] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.725 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x480a66d5, L:/10.5.0.2:8080 - R:/10.5.0.2:57586] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.725 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x0b85b255, L:/10.5.0.2:8080 - R:/10.5.0.2:57595] Increasing pending responses, now 1
2019-07-08 09:27:14.725 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x480a66d5, L:/10.5.0.2:8080 - R:/10.5.0.2:57586] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.725 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.725 DEBUG 12856 --- [reactor-http-nio-7] reactor.netty.http.server.HttpServer     : [id: 0x0b85b255, L:/10.5.0.2:8080 - R:/10.5.0.2:57595] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.725 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.725 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0x480a66d5, L:/10.5.0.2:8080 - R:/10.5.0.2:57586] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.725 DEBUG 12856 --- [reactor-http-nio-7] o.s.w.s.adapter.HttpWebHandlerAdapter    : [0b85b255] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.725 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.725 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.725 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.725 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.725 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [afe7ffa6] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.725 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0xb1fcdf59, L:/10.5.0.2:8080 - R:/10.5.0.2:57596] New http connection, requesting read
2019-07-08 09:27:14.725 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.h.RoutePredicateHandlerMapping   : [0b85b255] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.725 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xafe7ffa6, L:/10.5.0.2:8080 - R:/10.5.0.2:57587] Last HTTP response frame
2019-07-08 09:27:14.725 DEBUG 12856 --- [reactor-http-nio-8] reactor.netty.channel.BootstrapHandlers  : [id: 0xb1fcdf59, L:/10.5.0.2:8080 - R:/10.5.0.2:57596] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.725 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xafe7ffa6, L:/10.5.0.2:8080 - R:/10.5.0.2:57587] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.725 DEBUG 12856 --- [reactor-http-nio-7] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.725 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 4 commands
2019-07-08 09:27:14.725 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0xb1fcdf59, L:/10.5.0.2:8080 - R:/10.5.0.2:57596] Increasing pending responses, now 1
2019-07-08 09:27:14.726 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.726 DEBUG 12856 --- [reactor-http-nio-8] reactor.netty.http.server.HttpServer     : [id: 0xb1fcdf59, L:/10.5.0.2:8080 - R:/10.5.0.2:57596] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.725 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0xafe7ffa6, L:/10.5.0.2:8080 - R:/10.5.0.2:57587] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.726 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.726 DEBUG 12856 --- [reactor-http-nio-8] o.s.w.s.adapter.HttpWebHandlerAdapter    : [b1fcdf59] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.726 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.726 DEBUG 12856 --- [reactor-http-nio-7] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.726 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0xafe7ffa6, L:/10.5.0.2:8080 - R:/10.5.0.2:57587] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.726 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.726 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [a9b0ac82] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.726 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.726 DEBUG 12856 --- [reactor-http-nio-7] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.726 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xa9b0ac82, L:/10.5.0.2:8080 - R:/10.5.0.2:57588] Last HTTP response frame
2019-07-08 09:27:14.726 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.h.RoutePredicateHandlerMapping   : [b1fcdf59] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.726 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x23d8b412, L:/10.5.0.2:8080 - R:/10.5.0.2:57597] New http connection, requesting read
2019-07-08 09:27:14.726 DEBUG 12856 --- [reactor-http-nio-7] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.726 DEBUG 12856 --- [reactor-http-nio-9] reactor.netty.channel.BootstrapHandlers  : [id: 0x23d8b412, L:/10.5.0.2:8080 - R:/10.5.0.2:57597] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.726 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xa9b0ac82, L:/10.5.0.2:8080 - R:/10.5.0.2:57588] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.726 DEBUG 12856 --- [reactor-http-nio-8] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.726 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x23d8b412, L:/10.5.0.2:8080 - R:/10.5.0.2:57597] Increasing pending responses, now 1
2019-07-08 09:27:14.726 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 3 commands
2019-07-08 09:27:14.726 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0xa9b0ac82, L:/10.5.0.2:8080 - R:/10.5.0.2:57588] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.726 DEBUG 12856 --- [reactor-http-nio-9] reactor.netty.http.server.HttpServer     : [id: 0x23d8b412, L:/10.5.0.2:8080 - R:/10.5.0.2:57597] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.726 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.726 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0xa9b0ac82, L:/10.5.0.2:8080 - R:/10.5.0.2:57588] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.726 DEBUG 12856 --- [reactor-http-nio-8] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.726 DEBUG 12856 --- [reactor-http-nio-9] o.s.w.s.adapter.HttpWebHandlerAdapter    : [23d8b412] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.726 DEBUG 12856 --- [reactor-http-nio-8] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.726 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.726 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.726 DEBUG 12856 --- [reactor-http-nio-8] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.727 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.727 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.727 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x014fb6af, L:/10.5.0.2:8080 - R:/10.5.0.2:57598] New http connection, requesting read
2019-07-08 09:27:14.727 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [fb6ab690] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.727 DEBUG 12856 --- [reactor-http-nio-10] reactor.netty.channel.BootstrapHandlers  : [id: 0x014fb6af, L:/10.5.0.2:8080 - R:/10.5.0.2:57598] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.727 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.h.RoutePredicateHandlerMapping   : [23d8b412] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.727 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xfb6ab690, L:/10.5.0.2:8080 - R:/10.5.0.2:57589] Last HTTP response frame
2019-07-08 09:27:14.727 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x014fb6af, L:/10.5.0.2:8080 - R:/10.5.0.2:57598] Increasing pending responses, now 1
2019-07-08 09:27:14.727 DEBUG 12856 --- [reactor-http-nio-9] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.727 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xfb6ab690, L:/10.5.0.2:8080 - R:/10.5.0.2:57589] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.727 DEBUG 12856 --- [reactor-http-nio-10] reactor.netty.http.server.HttpServer     : [id: 0x014fb6af, L:/10.5.0.2:8080 - R:/10.5.0.2:57598] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.727 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.727 DEBUG 12856 --- [reactor-http-nio-10] o.s.w.s.adapter.HttpWebHandlerAdapter    : [014fb6af] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.727 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0xfb6ab690, L:/10.5.0.2:8080 - R:/10.5.0.2:57589] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.727 DEBUG 12856 --- [reactor-http-nio-9] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.727 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.727 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.727 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0xfb6ab690, L:/10.5.0.2:8080 - R:/10.5.0.2:57589] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.727 DEBUG 12856 --- [reactor-http-nio-9] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.727 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.727 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.727 DEBUG 12856 --- [reactor-http-nio-9] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.727 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.727 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.h.RoutePredicateHandlerMapping   : [014fb6af] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.727 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.727 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x7d1b4933, L:/10.5.0.2:8080 - R:/10.5.0.2:57599] New http connection, requesting read
2019-07-08 09:27:14.727 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.727 DEBUG 12856 --- [reactor-http-nio-10] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.727 DEBUG 12856 --- [reactor-http-nio-11] reactor.netty.channel.BootstrapHandlers  : [id: 0x7d1b4933, L:/10.5.0.2:8080 - R:/10.5.0.2:57599] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.727 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.728 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x7d1b4933, L:/10.5.0.2:8080 - R:/10.5.0.2:57599] Increasing pending responses, now 1
2019-07-08 09:27:14.728 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.728 DEBUG 12856 --- [reactor-http-nio-10] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.728 DEBUG 12856 --- [reactor-http-nio-11] reactor.netty.http.server.HttpServer     : [id: 0x7d1b4933, L:/10.5.0.2:8080 - R:/10.5.0.2:57599] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.728 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.728 DEBUG 12856 --- [reactor-http-nio-10] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.728 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.728 DEBUG 12856 --- [reactor-http-nio-11] o.s.w.s.adapter.HttpWebHandlerAdapter    : [7d1b4933] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.728 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.728 DEBUG 12856 --- [reactor-http-nio-10] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.728 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.728 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.728 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.728 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.728 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.h.RoutePredicateHandlerMapping   : [7d1b4933] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.728 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.728 DEBUG 12856 --- [reactor-http-nio-11] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.728 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 24 bytes, 9 commands in the stack
2019-07-08 09:27:14.729 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 9 commands
2019-07-08 09:27:14.729 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.729 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.729 DEBUG 12856 --- [reactor-http-nio-11] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.729 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.729 DEBUG 12856 --- [reactor-http-nio-11] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.729 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [6b1210f2] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.729 DEBUG 12856 --- [reactor-http-nio-11] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.729 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x6b1210f2, L:/10.5.0.2:8080 - R:/10.5.0.2:57590] Last HTTP response frame
2019-07-08 09:27:14.729 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x6b1210f2, L:/10.5.0.2:8080 - R:/10.5.0.2:57590] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.729 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.729 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x6b1210f2, L:/10.5.0.2:8080 - R:/10.5.0.2:57590] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.729 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.729 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x6b1210f2, L:/10.5.0.2:8080 - R:/10.5.0.2:57590] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.729 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.729 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.729 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [8cf7a1a6] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.729 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x8cf7a1a6, L:/10.5.0.2:8080 - R:/10.5.0.2:57591] Last HTTP response frame
2019-07-08 09:27:14.729 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x8cf7a1a6, L:/10.5.0.2:8080 - R:/10.5.0.2:57591] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.729 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0xd4fcd374, L:/10.5.0.2:8080 - R:/10.5.0.2:57600] New http connection, requesting read
2019-07-08 09:27:14.729 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.729 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x8cf7a1a6, L:/10.5.0.2:8080 - R:/10.5.0.2:57591] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.729 DEBUG 12856 --- [reactor-http-nio-12] reactor.netty.channel.BootstrapHandlers  : [id: 0xd4fcd374, L:/10.5.0.2:8080 - R:/10.5.0.2:57600] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.729 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.729 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0x8cf7a1a6, L:/10.5.0.2:8080 - R:/10.5.0.2:57591] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.729 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0xd4fcd374, L:/10.5.0.2:8080 - R:/10.5.0.2:57600] Increasing pending responses, now 1
2019-07-08 09:27:14.729 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 36 bytes, 8 commands in the stack
2019-07-08 09:27:14.729 DEBUG 12856 --- [reactor-http-nio-12] reactor.netty.http.server.HttpServer     : [id: 0xd4fcd374, L:/10.5.0.2:8080 - R:/10.5.0.2:57600] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.729 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.729 DEBUG 12856 --- [reactor-http-nio-12] o.s.w.s.adapter.HttpWebHandlerAdapter    : [d4fcd374] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.730 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.730 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0xef6c6db1, L:/10.5.0.2:8080 - R:/10.5.0.2:57601] New http connection, requesting read
2019-07-08 09:27:14.730 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.730 DEBUG 12856 --- [reactor-http-nio-13] reactor.netty.channel.BootstrapHandlers  : [id: 0xef6c6db1, L:/10.5.0.2:8080 - R:/10.5.0.2:57601] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.730 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.730 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.730 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.730 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0xef6c6db1, L:/10.5.0.2:8080 - R:/10.5.0.2:57601] Increasing pending responses, now 1
2019-07-08 09:27:14.730 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [5f51efe2] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.730 DEBUG 12856 --- [reactor-http-nio-13] reactor.netty.http.server.HttpServer     : [id: 0xef6c6db1, L:/10.5.0.2:8080 - R:/10.5.0.2:57601] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.730 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.h.RoutePredicateHandlerMapping   : [d4fcd374] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.730 DEBUG 12856 --- [reactor-http-nio-13] o.s.w.s.adapter.HttpWebHandlerAdapter    : [ef6c6db1] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.730 DEBUG 12856 --- [reactor-http-nio-12] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.730 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x5f51efe2, L:/10.5.0.2:8080 - R:/10.5.0.2:57592] Last HTTP response frame
2019-07-08 09:27:14.730 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.730 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x5f51efe2, L:/10.5.0.2:8080 - R:/10.5.0.2:57592] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.730 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.730 DEBUG 12856 --- [reactor-http-nio-12] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.730 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.730 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x5f51efe2, L:/10.5.0.2:8080 - R:/10.5.0.2:57592] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.730 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.h.RoutePredicateHandlerMapping   : [ef6c6db1] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.730 DEBUG 12856 --- [reactor-http-nio-4] r.n.http.server.HttpServerOperations     : [id: 0x5f51efe2, L:/10.5.0.2:8080 - R:/10.5.0.2:57592] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.730 DEBUG 12856 --- [reactor-http-nio-12] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.730 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.731 DEBUG 12856 --- [reactor-http-nio-13] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.731 DEBUG 12856 --- [reactor-http-nio-12] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.731 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.731 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0xe0134ad3, L:/10.5.0.2:8080 - R:/10.5.0.2:57602] New http connection, requesting read
2019-07-08 09:27:14.731 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.731 DEBUG 12856 --- [reactor-http-nio-14] reactor.netty.channel.BootstrapHandlers  : [id: 0xe0134ad3, L:/10.5.0.2:8080 - R:/10.5.0.2:57602] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.731 DEBUG 12856 --- [reactor-http-nio-13] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.731 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [425f6e20] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.731 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0xe0134ad3, L:/10.5.0.2:8080 - R:/10.5.0.2:57602] Increasing pending responses, now 1
2019-07-08 09:27:14.731 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x425f6e20, L:/10.5.0.2:8080 - R:/10.5.0.2:57593] Last HTTP response frame
2019-07-08 09:27:14.731 DEBUG 12856 --- [reactor-http-nio-13] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.731 DEBUG 12856 --- [reactor-http-nio-14] reactor.netty.http.server.HttpServer     : [id: 0xe0134ad3, L:/10.5.0.2:8080 - R:/10.5.0.2:57602] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.731 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x425f6e20, L:/10.5.0.2:8080 - R:/10.5.0.2:57593] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.731 DEBUG 12856 --- [reactor-http-nio-14] o.s.w.s.adapter.HttpWebHandlerAdapter    : [e0134ad3] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.731 DEBUG 12856 --- [reactor-http-nio-13] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.731 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.731 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x425f6e20, L:/10.5.0.2:8080 - R:/10.5.0.2:57593] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.731 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.731 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.731 DEBUG 12856 --- [reactor-http-nio-5] r.n.http.server.HttpServerOperations     : [id: 0x425f6e20, L:/10.5.0.2:8080 - R:/10.5.0.2:57593] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.731 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.731 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.731 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.731 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.h.RoutePredicateHandlerMapping   : [e0134ad3] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.731 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [dc5a9a6b] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.731 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x42fb524a, L:/10.5.0.2:8080 - R:/10.5.0.2:57603] New http connection, requesting read
2019-07-08 09:27:14.731 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xdc5a9a6b, L:/10.5.0.2:8080 - R:/10.5.0.2:57594] Last HTTP response frame
2019-07-08 09:27:14.731 DEBUG 12856 --- [reactor-http-nio-14] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.731 DEBUG 12856 --- [reactor-http-nio-15] reactor.netty.channel.BootstrapHandlers  : [id: 0x42fb524a, L:/10.5.0.2:8080 - R:/10.5.0.2:57603] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.731 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xdc5a9a6b, L:/10.5.0.2:8080 - R:/10.5.0.2:57594] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.732 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x42fb524a, L:/10.5.0.2:8080 - R:/10.5.0.2:57603] Increasing pending responses, now 1
2019-07-08 09:27:14.732 DEBUG 12856 --- [reactor-http-nio-14] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.732 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.732 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0xdc5a9a6b, L:/10.5.0.2:8080 - R:/10.5.0.2:57594] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.732 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.732 DEBUG 12856 --- [reactor-http-nio-15] reactor.netty.http.server.HttpServer     : [id: 0x42fb524a, L:/10.5.0.2:8080 - R:/10.5.0.2:57603] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.732 DEBUG 12856 --- [reactor-http-nio-14] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.732 DEBUG 12856 --- [reactor-http-nio-6] r.n.http.server.HttpServerOperations     : [id: 0xdc5a9a6b, L:/10.5.0.2:8080 - R:/10.5.0.2:57594] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.732 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.732 DEBUG 12856 --- [reactor-http-nio-15] o.s.w.s.adapter.HttpWebHandlerAdapter    : [42fb524a] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.732 DEBUG 12856 --- [reactor-http-nio-14] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.732 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.732 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.732 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.732 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0xb0c9033a, L:/10.5.0.2:8080 - R:/10.5.0.2:57604] New http connection, requesting read
2019-07-08 09:27:14.732 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.732 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.732 DEBUG 12856 --- [reactor-http-nio-16] reactor.netty.channel.BootstrapHandlers  : [id: 0xb0c9033a, L:/10.5.0.2:8080 - R:/10.5.0.2:57604] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.732 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.h.RoutePredicateHandlerMapping   : [42fb524a] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.732 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 60 bytes, 8 commands in the stack
2019-07-08 09:27:14.732 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0xb0c9033a, L:/10.5.0.2:8080 - R:/10.5.0.2:57604] Increasing pending responses, now 1
2019-07-08 09:27:14.732 DEBUG 12856 --- [reactor-http-nio-15] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.732 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.732 DEBUG 12856 --- [reactor-http-nio-16] reactor.netty.http.server.HttpServer     : [id: 0xb0c9033a, L:/10.5.0.2:8080 - R:/10.5.0.2:57604] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.744 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.744 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.733 DEBUG 12856 --- [reactor-http-nio-15] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.744 DEBUG 12856 --- [reactor-http-nio-16] o.s.w.s.adapter.HttpWebHandlerAdapter    : [b0c9033a] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.744 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.744 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.744 DEBUG 12856 --- [reactor-http-nio-15] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.744 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.744 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [0b85b255] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.744 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x0b85b255, L:/10.5.0.2:8080 - R:/10.5.0.2:57595] Last HTTP response frame
2019-07-08 09:27:14.744 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x0b85b255, L:/10.5.0.2:8080 - R:/10.5.0.2:57595] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.744 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.744 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.744 DEBUG 12856 --- [reactor-http-nio-15] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.744 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.h.RoutePredicateHandlerMapping   : [b0c9033a] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.744 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x0b85b255, L:/10.5.0.2:8080 - R:/10.5.0.2:57595] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.744 DEBUG 12856 --- [reactor-http-nio-16] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.744 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.744 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.744 DEBUG 12856 --- [reactor-http-nio-7] r.n.http.server.HttpServerOperations     : [id: 0x0b85b255, L:/10.5.0.2:8080 - R:/10.5.0.2:57595] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.744 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [b1fcdf59] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.744 DEBUG 12856 --- [reactor-http-nio-16] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.744 DEBUG 12856 --- [reactor-http-nio-16] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.744 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xb1fcdf59, L:/10.5.0.2:8080 - R:/10.5.0.2:57596] Last HTTP response frame
2019-07-08 09:27:14.745 DEBUG 12856 --- [reactor-http-nio-16] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.745 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xb1fcdf59, L:/10.5.0.2:8080 - R:/10.5.0.2:57596] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.745 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.745 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x91c766cf, L:/10.5.0.2:8080 - R:/10.5.0.2:57605] New http connection, requesting read
2019-07-08 09:27:14.745 DEBUG 12856 --- [reactor-http-nio-1] reactor.netty.channel.BootstrapHandlers  : [id: 0x91c766cf, L:/10.5.0.2:8080 - R:/10.5.0.2:57605] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.745 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0xb1fcdf59, L:/10.5.0.2:8080 - R:/10.5.0.2:57596] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.745 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.745 DEBUG 12856 --- [reactor-http-nio-8] r.n.http.server.HttpServerOperations     : [id: 0xb1fcdf59, L:/10.5.0.2:8080 - R:/10.5.0.2:57596] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.745 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x91c766cf, L:/10.5.0.2:8080 - R:/10.5.0.2:57605] Increasing pending responses, now 1
2019-07-08 09:27:14.745 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.745 DEBUG 12856 --- [reactor-http-nio-1] reactor.netty.http.server.HttpServer     : [id: 0x91c766cf, L:/10.5.0.2:8080 - R:/10.5.0.2:57605] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.745 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.745 DEBUG 12856 --- [reactor-http-nio-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [91c766cf] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.745 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [23d8b412] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.745 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x23d8b412, L:/10.5.0.2:8080 - R:/10.5.0.2:57597] Last HTTP response frame
2019-07-08 09:27:14.745 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.745 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x23d8b412, L:/10.5.0.2:8080 - R:/10.5.0.2:57597] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.745 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.745 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.745 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x23d8b412, L:/10.5.0.2:8080 - R:/10.5.0.2:57597] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.745 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.h.RoutePredicateHandlerMapping   : [91c766cf] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.745 DEBUG 12856 --- [reactor-http-nio-9] r.n.http.server.HttpServerOperations     : [id: 0x23d8b412, L:/10.5.0.2:8080 - R:/10.5.0.2:57597] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.745 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.745 DEBUG 12856 --- [reactor-http-nio-1] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.745 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.746 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.746 DEBUG 12856 --- [reactor-http-nio-1] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.746 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [014fb6af] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.746 DEBUG 12856 --- [reactor-http-nio-1] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.746 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x014fb6af, L:/10.5.0.2:8080 - R:/10.5.0.2:57598] Last HTTP response frame
2019-07-08 09:27:14.746 DEBUG 12856 --- [reactor-http-nio-1] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.746 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x014fb6af, L:/10.5.0.2:8080 - R:/10.5.0.2:57598] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.746 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 4 commands
2019-07-08 09:27:14.746 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x014fb6af, L:/10.5.0.2:8080 - R:/10.5.0.2:57598] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.746 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x9a7fa355, L:/10.5.0.2:8080 - R:/10.5.0.2:57606] New http connection, requesting read
2019-07-08 09:27:14.746 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.746 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0xc7133454, L:/10.5.0.2:8080 - R:/10.5.0.2:57607] New http connection, requesting read
2019-07-08 09:27:14.746 DEBUG 12856 --- [reactor-http-nio-10] r.n.http.server.HttpServerOperations     : [id: 0x014fb6af, L:/10.5.0.2:8080 - R:/10.5.0.2:57598] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.746 DEBUG 12856 --- [reactor-http-nio-2] reactor.netty.channel.BootstrapHandlers  : [id: 0x9a7fa355, L:/10.5.0.2:8080 - R:/10.5.0.2:57606] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.746 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.746 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x9a7fa355, L:/10.5.0.2:8080 - R:/10.5.0.2:57606] Increasing pending responses, now 1
2019-07-08 09:27:14.746 DEBUG 12856 --- [reactor-http-nio-2] reactor.netty.http.server.HttpServer     : [id: 0x9a7fa355, L:/10.5.0.2:8080 - R:/10.5.0.2:57606] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.746 DEBUG 12856 --- [reactor-http-nio-3] reactor.netty.channel.BootstrapHandlers  : [id: 0xc7133454, L:/10.5.0.2:8080 - R:/10.5.0.2:57607] Initialized pipeline DefaultChannelPipeline{(BootstrapHandlers$BootstrapInitializerHandler#0 = reactor.netty.channel.BootstrapHandlers$BootstrapInitializerHandler), (reactor.left.httpCodec = io.netty.handler.codec.http.HttpServerCodec), (reactor.left.httpTrafficHandler = reactor.netty.http.server.HttpTrafficHandler), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}
2019-07-08 09:27:14.746 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.746 DEBUG 12856 --- [reactor-http-nio-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [9a7fa355] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.746 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0xc7133454, L:/10.5.0.2:8080 - R:/10.5.0.2:57607] Increasing pending responses, now 1
2019-07-08 09:27:14.746 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.746 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [7d1b4933] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.746 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.746 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.h.RoutePredicateHandlerMapping   : [9a7fa355] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.746 DEBUG 12856 --- [reactor-http-nio-3] reactor.netty.http.server.HttpServer     : [id: 0xc7133454, L:/10.5.0.2:8080 - R:/10.5.0.2:57607] Handler is being applied: org.springframework.http.server.reactive.ReactorHttpHandlerAdapter@7fc153cf
2019-07-08 09:27:14.746 DEBUG 12856 --- [reactor-http-nio-2] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.746 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x7d1b4933, L:/10.5.0.2:8080 - R:/10.5.0.2:57599] Last HTTP response frame
2019-07-08 09:27:14.746 DEBUG 12856 --- [reactor-http-nio-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [c7133454] HTTP GET "/price/index/test01?userId=123"
2019-07-08 09:27:14.746 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x7d1b4933, L:/10.5.0.2:8080 - R:/10.5.0.2:57599] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.747 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: path_route
2019-07-08 09:27:14.747 DEBUG 12856 --- [reactor-http-nio-2] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.747 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://10.5.0.2:8080/price/index/test01?userId=123] to Route{id='path_route', uri=http://10.5.0.2:8082/price, order=0, predicate=org.springframework.cloud.gateway.support.ServerWebExchangeUtils$$Lambda$510/0x0000000801762c40@1971cd44, gatewayFilters=[OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}]}
2019-07-08 09:27:14.747 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.h.RoutePredicateHandlerMapping   : [c7133454] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@72f9581c
2019-07-08 09:27:14.747 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.747 DEBUG 12856 --- [reactor-http-nio-3] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@1631549a}, order=-2147482648}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@6f0a120}, order=-1}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@3c0c43f5}, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestHeaderGatewayFilterFactory$$Lambda$513/0x0000000801770040@121a9856, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.AddRequestParameterGatewayFilterFactory$$Lambda$515/0x0000000801770840@4263c746, order=0}, OrderedGatewayFilter{delegate=org.springframework.cloud.gateway.filter.factory.RequestRateLimiterGatewayFilterFactory$$Lambda$572/0x0000000801801040@65f5b20b, order=0}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@301a880d}, order=10000}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@44bbfb87}, order=10100}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2005456a}, order=2147483646}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@49a8d965}, order=2147483647}, OrderedGatewayFilter{delegate=GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@3f761c9a}, order=2147483647}]
2019-07-08 09:27:14.747 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x7d1b4933, L:/10.5.0.2:8080 - R:/10.5.0.2:57599] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.747 DEBUG 12856 --- [reactor-http-nio-2] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.747 DEBUG 12856 --- [reactor-http-nio-11] r.n.http.server.HttpServerOperations     : [id: 0x7d1b4933, L:/10.5.0.2:8080 - R:/10.5.0.2:57599] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.747 DEBUG 12856 --- [reactor-http-nio-2] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.747 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.747 DEBUG 12856 --- [reactor-http-nio-3] io.lettuce.core.RedisChannelHandler      : dispatching command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.747 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.747 DEBUG 12856 --- [reactor-http-nio-3] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() writeAndFlush command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.747 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.747 DEBUG 12856 --- [reactor-http-nio-3] i.lettuce.core.protocol.DefaultEndpoint  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, epid=0x1] write() done
2019-07-08 09:27:14.747 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.747 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.747 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.747 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.747 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] write(ctx, SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command], promise)
2019-07-08 09:27:14.747 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandEncoder  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379] writing command SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.748 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 36 bytes, 8 commands in the stack
2019-07-08 09:27:14.748 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 8 commands
2019-07-08 09:27:14.748 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.748 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.748 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.748 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [d4fcd374] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.748 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xd4fcd374, L:/10.5.0.2:8080 - R:/10.5.0.2:57600] Last HTTP response frame
2019-07-08 09:27:14.748 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xd4fcd374, L:/10.5.0.2:8080 - R:/10.5.0.2:57600] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.748 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 7 commands
2019-07-08 09:27:14.748 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0xd4fcd374, L:/10.5.0.2:8080 - R:/10.5.0.2:57600] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.748 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.748 DEBUG 12856 --- [reactor-http-nio-12] r.n.http.server.HttpServerOperations     : [id: 0xd4fcd374, L:/10.5.0.2:8080 - R:/10.5.0.2:57600] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.748 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.748 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.748 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [ef6c6db1] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.748 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xef6c6db1, L:/10.5.0.2:8080 - R:/10.5.0.2:57601] Last HTTP response frame
2019-07-08 09:27:14.748 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xef6c6db1, L:/10.5.0.2:8080 - R:/10.5.0.2:57601] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.748 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 6 commands
2019-07-08 09:27:14.748 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0xef6c6db1, L:/10.5.0.2:8080 - R:/10.5.0.2:57601] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.748 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.748 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.748 DEBUG 12856 --- [reactor-http-nio-13] r.n.http.server.HttpServerOperations     : [id: 0xef6c6db1, L:/10.5.0.2:8080 - R:/10.5.0.2:57601] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.748 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.748 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [e0134ad3] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.749 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xe0134ad3, L:/10.5.0.2:8080 - R:/10.5.0.2:57602] Last HTTP response frame
2019-07-08 09:27:14.749 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xe0134ad3, L:/10.5.0.2:8080 - R:/10.5.0.2:57602] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.749 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0xe0134ad3, L:/10.5.0.2:8080 - R:/10.5.0.2:57602] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.749 DEBUG 12856 --- [reactor-http-nio-14] r.n.http.server.HttpServerOperations     : [id: 0xe0134ad3, L:/10.5.0.2:8080 - R:/10.5.0.2:57602] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.749 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 12 bytes, 5 commands in the stack
2019-07-08 09:27:14.749 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 5 commands
2019-07-08 09:27:14.749 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.749 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.749 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.749 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [42fb524a] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.749 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x42fb524a, L:/10.5.0.2:8080 - R:/10.5.0.2:57603] Last HTTP response frame
2019-07-08 09:27:14.749 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x42fb524a, L:/10.5.0.2:8080 - R:/10.5.0.2:57603] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.749 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 24 bytes, 4 commands in the stack
2019-07-08 09:27:14.749 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x42fb524a, L:/10.5.0.2:8080 - R:/10.5.0.2:57603] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.749 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 4 commands
2019-07-08 09:27:14.749 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.749 DEBUG 12856 --- [reactor-http-nio-15] r.n.http.server.HttpServerOperations     : [id: 0x42fb524a, L:/10.5.0.2:8080 - R:/10.5.0.2:57603] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.749 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.749 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.749 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [b0c9033a] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.749 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xb0c9033a, L:/10.5.0.2:8080 - R:/10.5.0.2:57604] Last HTTP response frame
2019-07-08 09:27:14.749 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xb0c9033a, L:/10.5.0.2:8080 - R:/10.5.0.2:57604] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.749 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 3 commands
2019-07-08 09:27:14.749 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0xb0c9033a, L:/10.5.0.2:8080 - R:/10.5.0.2:57604] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.749 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.749 DEBUG 12856 --- [reactor-http-nio-16] r.n.http.server.HttpServerOperations     : [id: 0xb0c9033a, L:/10.5.0.2:8080 - R:/10.5.0.2:57604] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.749 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.750 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.750 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [91c766cf] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.750 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x91c766cf, L:/10.5.0.2:8080 - R:/10.5.0.2:57605] Last HTTP response frame
2019-07-08 09:27:14.750 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x91c766cf, L:/10.5.0.2:8080 - R:/10.5.0.2:57605] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.750 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x91c766cf, L:/10.5.0.2:8080 - R:/10.5.0.2:57605] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.750 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 12 bytes, 2 commands in the stack
2019-07-08 09:27:14.750 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 2 commands
2019-07-08 09:27:14.750 DEBUG 12856 --- [reactor-http-nio-1] r.n.http.server.HttpServerOperations     : [id: 0x91c766cf, L:/10.5.0.2:8080 - R:/10.5.0.2:57605] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.750 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.750 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.750 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.750 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [9a7fa355] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.750 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x9a7fa355, L:/10.5.0.2:8080 - R:/10.5.0.2:57606] Last HTTP response frame
2019-07-08 09:27:14.750 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0x9a7fa355, L:/10.5.0.2:8080 - R:/10.5.0.2:57606] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.750 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Received: 12 bytes, 1 commands in the stack
2019-07-08 09:27:14.750 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x9a7fa355, L:/10.5.0.2:8080 - R:/10.5.0.2:57606] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.750 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] io.lettuce.core.protocol.CommandHandler  : [channel=0x04d94354, /10.5.0.2:51009 -> /10.5.0.2:6379, chid=0x1] Stack contains: 1 commands
2019-07-08 09:27:14.750 DEBUG 12856 --- [reactor-http-nio-2] r.n.http.server.HttpServerOperations     : [id: 0x9a7fa355, L:/10.5.0.2:8080 - R:/10.5.0.2:57606] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:14.750 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decode SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[], error='null'], commandType=io.lettuce.core.protocol.Command]
2019-07-08 09:27:14.750 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] i.l.core.protocol.RedisStateMachine      : Decoded SubscriptionCommand [type=EVALSHA, output=NestedMultiOutput [output=[0, 0], error='null'], commandType=io.lettuce.core.protocol.Command], empty stack: true
2019-07-08 09:27:14.750 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.c.g.f.ratelimit.RedisRateLimiter     : response: Response{allowed=false, headers={X-RateLimit-Remaining=0, X-RateLimit-Burst-Capacity=4, X-RateLimit-Replenish-Rate=2}, tokensRemaining=-1}
2019-07-08 09:27:14.750 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] o.s.w.s.adapter.HttpWebHandlerAdapter    : [c7133454] Completed 429 TOO_MANY_REQUESTS
2019-07-08 09:27:14.750 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xc7133454, L:/10.5.0.2:8080 - R:/10.5.0.2:57607] Last HTTP response frame
2019-07-08 09:27:14.750 DEBUG 12856 --- [lettuce-nioEventLoop-4-1] r.n.http.server.HttpServerOperations     : [id: 0xc7133454, L:/10.5.0.2:8080 - R:/10.5.0.2:57607] No sendHeaders() called before complete, sending zero-length header
2019-07-08 09:27:14.750 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0xc7133454, L:/10.5.0.2:8080 - R:/10.5.0.2:57607] Detected non persistent http connection, preparing to close
2019-07-08 09:27:14.751 DEBUG 12856 --- [reactor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0xc7133454, L:/10.5.0.2:8080 - R:/10.5.0.2:57607] Last HTTP packet was sent, terminating the channel
2019-07-08 09:27:43.063 DEBUG 12856 --- [reactor-http-nio-10] r.n.resources.PooledConnectionProvider   : [id: 0xbe3b51ca, L:/10.5.0.2:53201 ! R:/10.5.0.2:8082] Channel closed, now 0 active connections and 2 inactive connections
2019-07-08 09:27:43.063 DEBUG 12856 --- [reactor-http-nio-6] r.n.resources.PooledConnectionProvider   : [id: 0xdf468530, L:/10.5.0.2:53179 ! R:/10.5.0.2:8082] Channel closed, now 0 active connections and 2 inactive connections
2019-07-08 09:27:43.063 DEBUG 12856 --- [reactor-http-nio-10] r.n.resources.PooledConnectionProvider   : [id: 0xbe3b51ca, L:/10.5.0.2:53201 ! R:/10.5.0.2:8082] onStateChange(PooledConnection{channel=[id: 0xbe3b51ca, L:/10.5.0.2:53201 ! R:/10.5.0.2:8082]}, [disconnecting])
2019-07-08 09:27:43.063 DEBUG 12856 --- [reactor-http-nio-6] r.n.resources.PooledConnectionProvider   : [id: 0xdf468530, L:/10.5.0.2:53179 ! R:/10.5.0.2:8082] onStateChange(PooledConnection{channel=[id: 0xdf468530, L:/10.5.0.2:53179 ! R:/10.5.0.2:8082]}, [disconnecting])
2019-07-08 09:27:44.061 DEBUG 12856 --- [reactor-http-nio-11] r.n.resources.PooledConnectionProvider   : [id: 0x939fe8b7, L:/10.5.0.2:53191 ! R:/10.5.0.2:8082] Channel closed, now 0 active connections and 1 inactive connections
2019-07-08 09:27:44.061 DEBUG 12856 --- [reactor-http-nio-9] r.n.resources.PooledConnectionProvider   : [id: 0x3c4c8049, L:/10.5.0.2:53190 ! R:/10.5.0.2:8082] Channel closed, now 0 active connections and 0 inactive connections
2019-07-08 09:27:44.061 DEBUG 12856 --- [reactor-http-nio-11] r.n.resources.PooledConnectionProvider   : [id: 0x939fe8b7, L:/10.5.0.2:53191 ! R:/10.5.0.2:8082] onStateChange(PooledConnection{channel=[id: 0x939fe8b7, L:/10.5.0.2:53191 ! R:/10.5.0.2:8082]}, [disconnecting])
2019-07-08 09:27:44.061 DEBUG 12856 --- [reactor-http-nio-9] r.n.resources.PooledConnectionProvider   : [id: 0x3c4c8049, L:/10.5.0.2:53190 ! R:/10.5.0.2:8082] onStateChange(PooledConnection{channel=[id: 0x3c4c8049, L:/10.5.0.2:53190 ! R:/10.5.0.2:8082]}, [disconnecting])
